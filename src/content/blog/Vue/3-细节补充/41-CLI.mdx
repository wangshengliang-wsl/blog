---
title: 'Vite CLI 命令详解'
pubDate: 2024-01-15
category: 'Vue'
tags: ['Vue3', 'Vite']
description: 'Vite 命令行工具的常用命令和参数说明'
---

## 四类命令

| 命令                         | 作用           |
| ---------------------------- | -------------- |
| vite / vite dev / vite serve | 启动开发服务器 |
| vite build                   | 构建生产版本   |
| vite optimize                | 手动预构建依赖 |
| vite preview                 | 预览构建产物   |

## 开发服务器

```bash
vite [options]
```

常用参数：

| 参数             | 说明           |
| ---------------- | -------------- |
| --host           | 指定主机名     |
| --port \<port>   | 指定端口       |
| --open           | 自动打开浏览器 |
| --https          | 启用 HTTPS     |
| --config \<file> | 指定配置文件   |
| --force          | 强制重新预构建 |

```bash
vite --host 0.0.0.0 --port 3000 --open
```

## 构建生产版本

```bash
vite build [options]
```

常用参数：

| 参数               | 说明               |
| ------------------ | ------------------ |
| --target \<target> | 编译目标           |
| --outDir \<dir>    | 输出目录           |
| --assetsDir \<dir> | 静态资源目录       |
| --base \<path>     | 公共基础路径       |
| --sourcemap        | 生成 sourcemap     |
| --manifest         | 生成 manifest.json |

```bash
vite build --outDir dist --base /app/
```

## 预览构建产物

```bash
vite preview [options]
```

用于本地预览构建后的应用：

```bash
# 构建
vite build

# 预览（默认端口 4173）
vite preview --port 8080
```

## package.json 脚本

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  }
}
```

## 优先级

CLI 参数优先级高于配置文件：

```bash
# 即使配置文件指定了 port: 3000
# 命令行参数会覆盖它
vite --port 5000
```

## 直接执行

```bash
# 使用 node_modules 中的 vite
./node_modules/.bin/vite

# 或使用 npx
npx vite
```
