---
title: 'æŒ‡ä»¤çš„æœ¬è´¨ï¼šç¼–è¯‘ç»“æœåˆ†æ'
pubDate: 2024-01-15
category: 'Vue'
tags: ['Vue3', 'åŸç†', 'æŒ‡ä»¤']
description: 'é€šè¿‡åˆ†æç¼–è¯‘ç»“æœï¼Œç†è§£ v-ifã€v-forã€v-bind ç­‰æŒ‡ä»¤çš„æœ¬è´¨'
---

ğŸ™‹ Vue çš„æŒ‡ä»¤æœ€ç»ˆå˜æˆäº†ä»€ä¹ˆï¼Ÿ

**æŒ‡ä»¤åœ¨ç¼–è¯‘åå°±ä¸å­˜åœ¨äº†**ï¼Œå®ƒä»¬ä¼šè¢«ç¼–è¯‘æˆä¸åŒçš„å¤„ç†æ–¹å¼ã€‚

ä½¿ç”¨ `vite-plugin-inspect` æ’ä»¶å¯ä»¥æŸ¥çœ‹ç¼–è¯‘ç»“æœã€‚

## v-if â†’ ä¸‰å…ƒè¡¨è¾¾å¼

```vue
<template>
  <div v-if="type === 1">ç±»å‹ 1</div>
  <div v-else-if="type === 2">ç±»å‹ 2</div>
  <div v-else>å…¶ä»–</div>
</template>
```

ç¼–è¯‘åï¼š

```js
function render() {
  return $setup.type === 1
    ? h('div', 'ç±»å‹ 1')
    : $setup.type === 2
      ? h('div', 'ç±»å‹ 2')
      : h('div', 'å…¶ä»–')
}
```

**æœ¬è´¨**ï¼šåµŒå¥—çš„ä¸‰å…ƒè¡¨è¾¾å¼ã€‚

## v-for â†’ renderList

```vue
<template>
  <li v-for="item in list" :key="item.id">
    {{ item.name }}
  </li>
</template>
```

ç¼–è¯‘åï¼š

```js
import { renderList } from 'vue'

function render() {
  return renderList($setup.list, (item) => {
    return h('li', { key: item.id }, item.name)
  })
}
```

**æœ¬è´¨**ï¼šè°ƒç”¨ `renderList` è¾…åŠ©å‡½æ•°éå†æ•°ç»„ã€‚

## v-bind â†’ å±æ€§ç»‘å®š

```vue
<template>
  <div :id="dynamicId" :class="className">å†…å®¹</div>
</template>
```

ç¼–è¯‘åï¼š

```js
function render() {
  return h(
    'div',
    {
      id: $setup.dynamicId,
      class: $setup.className,
    },
    'å†…å®¹'
  )
}
```

**æœ¬è´¨**ï¼šæŠŠå“åº”å¼æ•°æ®ä½œä¸ºå±æ€§å€¼ä¼ å…¥ h å‡½æ•°ã€‚

## v-on â†’ äº‹ä»¶å¤„ç†

```vue
<template>
  <button @click="count++">+1</button>
</template>
```

ç¼–è¯‘åï¼š

```js
function render() {
  return h(
    'button',
    {
      onClick: ($event) => $setup.count++,
    },
    '+1'
  )
}
```

**æœ¬è´¨**ï¼šæŠŠäº‹ä»¶å¤„ç†å‡½æ•°ä½œä¸º onXxx å±æ€§ä¼ å…¥ã€‚

## v-model â†’ è¯­æ³•ç³–

```vue
<template>
  <input v-model="text" />
</template>
```

ç¼–è¯‘åï¼š

```js
function render() {
  return h('input', {
    value: $setup.text,
    onInput: ($event) => {
      $setup.text = $event.target.value
    },
  })
}
```

**æœ¬è´¨**ï¼švalue ç»‘å®š + input äº‹ä»¶ç›‘å¬ã€‚

## v-show â†’ display æ ·å¼

```vue
<template>
  <div v-show="visible">å†…å®¹</div>
</template>
```

ç¼–è¯‘åï¼š

```js
import { vShow, withDirectives } from 'vue'

function render() {
  return withDirectives(h('div', 'å†…å®¹'), [[vShow, $setup.visible]])
}
```

**æœ¬è´¨**ï¼šè¿è¡Œæ—¶æŒ‡ä»¤ï¼Œé€šè¿‡ `withDirectives` æ·»åŠ ï¼Œæ§åˆ¶ `display` æ ·å¼ã€‚

## v-if vs v-show

| æŒ‡ä»¤   | ç¼–è¯‘æ–¹å¼   | åˆ‡æ¢æ–¹å¼      |
| ------ | ---------- | ------------- |
| v-if   | ä¸‰å…ƒè¡¨è¾¾å¼ | é”€æ¯/åˆ›å»º DOM |
| v-show | è¿è¡Œæ—¶æŒ‡ä»¤ | åˆ‡æ¢ display  |

## è‡ªå®šä¹‰æŒ‡ä»¤

è‡ªå®šä¹‰æŒ‡ä»¤æ˜¯**è¿è¡Œæ—¶æŒ‡ä»¤**ï¼Œä¸ä¼šè¢«ç¼–è¯‘ä¼˜åŒ–ï¼š

```vue
<template>
  <div v-focus>å†…å®¹</div>
</template>
```

ç¼–è¯‘åï¼š

```js
import { withDirectives, resolveDirective } from 'vue'

function render() {
  const _directive_focus = resolveDirective('focus')
  return withDirectives(h('div', 'å†…å®¹'), [[_directive_focus]])
}
```

## å°ç»“

| æŒ‡ä»¤    | ç¼–è¯‘ç»“æœ        |
| ------- | --------------- |
| v-if    | ä¸‰å…ƒè¡¨è¾¾å¼      |
| v-for   | renderList å‡½æ•° |
| v-bind  | h å‡½æ•°çš„ props  |
| v-on    | onXxx äº‹ä»¶å±æ€§  |
| v-model | value + onInput |
| v-show  | è¿è¡Œæ—¶æŒ‡ä»¤      |
| è‡ªå®šä¹‰  | è¿è¡Œæ—¶æŒ‡ä»¤      |

**æ ¸å¿ƒç»“è®º**ï¼šå¤§éƒ¨åˆ†æŒ‡ä»¤åœ¨ç¼–è¯‘åå°±æ¶ˆå¤±äº†ï¼Œè¢«è½¬æ¢æˆäº†æ›´é«˜æ•ˆçš„ä»£ç ã€‚åªæœ‰ v-show å’Œè‡ªå®šä¹‰æŒ‡ä»¤æ˜¯è¿è¡Œæ—¶å¤„ç†çš„ã€‚

ä¸‹ä¸€ç¯‡æˆ‘ä»¬æ¥çœ‹æ’æ§½çš„æœ¬è´¨ã€‚
