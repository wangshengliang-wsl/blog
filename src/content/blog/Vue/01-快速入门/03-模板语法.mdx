---
title: 'Vue æ¨¡æ¿è¯­æ³•å®Œå…¨æŒ‡å—'
pubDate: 2024-01-15
category: 'Vue'
tags: ['Vue3', 'æ¨¡æ¿è¯­æ³•', 'å¿«é€Ÿå…¥é—¨']
description: 'æŒæ¡ Vue æ¨¡æ¿è¯­æ³•ï¼šæ–‡æœ¬æ’å€¼ã€å±æ€§ç»‘å®šã€JS è¡¨è¾¾å¼ï¼Œä»åŸºç¡€åˆ°è¿›é˜¶ä¸€ç¯‡æå®š'
---

ğŸ™‹ Vue çš„ `<template>` é‡Œèƒ½å†™ä»€ä¹ˆï¼Ÿ

å¾ˆå¤šåˆå­¦è€…ä»¥ä¸ºæ¨¡æ¿å°±æ˜¯æ™®é€š HTMLï¼Œå…¶å®ä¸ç„¶ã€‚Vue æ¨¡æ¿åœ¨ HTML åŸºç¡€ä¸Šæ‰©å±•äº†å¾ˆå¤šèƒ½åŠ›ï¼šåŠ¨æ€æ•°æ®ç»‘å®šã€å±æ€§ç»‘å®šã€è¡¨è¾¾å¼è®¡ç®—â€¦â€¦è¿™ç¯‡æ–‡ç« å¸¦ä½ ç³»ç»ŸæŒæ¡è¿™äº›è¯­æ³•ã€‚

## æ–‡æœ¬æ’å€¼ï¼šåŒå¤§æ‹¬å· `{{}}`

æœ€åŸºç¡€çš„ç”¨æ³•ï¼Œç”¨åŒå¤§æ‹¬å·æŠŠæ•°æ®"æ’"åˆ°æ¨¡æ¿é‡Œï¼š

```vue
<template>
  <div>Hello, {{ name }}!</div>
</template>

<script setup>
const name = 'Vue3'
</script>
```

é¡µé¢ä¼šæ¸²æŸ“å‡º `Hello, Vue3!`ã€‚è¿™å°±æ˜¯æ‰€è°“çš„"Mustache è¯­æ³•"ï¼ˆå› ä¸º `{{}}` åƒä¸¤æ’‡èƒ¡å­ ğŸ¥¸ï¼‰ã€‚

## æ¸²æŸ“ HTMLï¼šv-html æŒ‡ä»¤

ğŸ™‹ å¦‚æœæ•°æ®æœ¬èº«æ˜¯ä¸€æ®µ HTML ä»£ç å‘¢ï¼Ÿ

```vue
<script setup>
const htmlCode = '<span style="color:red">çº¢è‰²æ–‡å­—</span>'
</script>

<template>
  <!-- âŒ ä¼šåŸæ ·è¾“å‡º HTML æ ‡ç­¾ -->
  <div>{{ htmlCode }}</div>

  <!-- âœ… ä¼šæ¸²æŸ“æˆçœŸæ­£çš„ HTML -->
  <div v-html="htmlCode"></div>
</template>
```

`v-html` æ˜¯ Vue çš„**æŒ‡ä»¤**ï¼ˆä»¥ `v-` å¼€å¤´çš„ç‰¹æ®Šå±æ€§ï¼‰ã€‚ç”¨å®ƒå¯ä»¥æŠŠå­—ç¬¦ä¸²å½“æˆ HTML æ¸²æŸ“ã€‚

ğŸ”¶ **å®‰å…¨è­¦å‘Š**ï¼šæ°¸è¿œä¸è¦å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹ä½¿ç”¨ `v-html`ï¼Œä¼šå¯¼è‡´ XSS æ”»å‡»ã€‚

## å±æ€§ç»‘å®šï¼šv-bind

æ–‡æœ¬å¯ä»¥åŠ¨æ€ç»‘å®šï¼Œå±æ€§å½“ç„¶ä¹Ÿå¯ä»¥ã€‚ç”¨ `v-bind` æŒ‡ä»¤ï¼š

```vue
<script setup>
const imgUrl = 'https://example.com/avatar.png'
const isDisabled = true
</script>

<template>
  <!-- å®Œæ•´å†™æ³• -->
  <img v-bind:src="imgUrl" />

  <!-- ç®€å†™ï¼ˆæ¨èï¼‰ -->
  <img :src="imgUrl" />

  <!-- å¸ƒå°”å±æ€§ï¼šisDisabled ä¸º true æ—¶ï¼Œbutton ä¼šè¢«ç¦ç”¨ -->
  <button :disabled="isDisabled">ç‚¹å‡»</button>
</template>
```

`:` æ˜¯ `v-bind:` çš„ç®€å†™ï¼Œå®é™…å¼€å‘ä¸­å‡ ä¹éƒ½ç”¨ç®€å†™ã€‚

### Vue 3.4+ åŒåç®€å†™

å¦‚æœå±æ€§åå’Œå˜é‡åç›¸åŒï¼Œå¯ä»¥è¿›ä¸€æ­¥ç®€å†™ï¼š

```vue
<script setup>
const id = 'my-element'
const class = 'container'
</script>

<template>
  <!-- Vue 3.4 ä¹‹å‰ -->
  <div :id="id" :class="class"></div>

  <!-- Vue 3.4+ å¯ä»¥è¿™æ ·å†™ -->
  <div :id :class></div>
</template>
```

### æ‰¹é‡ç»‘å®šå±æ€§

æœ‰å¤šä¸ªå±æ€§è¦ç»‘å®šï¼Ÿå¯ä»¥ç”¨å¯¹è±¡ä¸€æ¬¡æ€§æå®šï¼š

```vue
<script setup>
const attrs = {
  'id': 'container',
  'class': 'wrapper',
  'data-index': 1,
}
</script>

<template>
  <div v-bind="attrs">å†…å®¹</div>
  <!-- ç­‰ä»·äº <div id="container" class="wrapper" data-index="1"> -->
</template>
```

## åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ JS è¡¨è¾¾å¼

æ¨¡æ¿é‡Œä¸åªèƒ½æ”¾å˜é‡ï¼Œè¿˜èƒ½å†™ JavaScript è¡¨è¾¾å¼ï¼š

```vue
<script setup>
const count = 10
const isVip = true
const message = 'hello'
</script>

<template>
  <!-- ç®—æœ¯è¿ç®— -->
  <div>{{ count + 1 }}</div>

  <!-- ä¸‰å…ƒè¡¨è¾¾å¼ -->
  <div>{{ isVip ? 'å°Šè´µVIP' : 'æ™®é€šç”¨æˆ·' }}</div>

  <!-- æ–¹æ³•è°ƒç”¨ -->
  <div>{{ message.toUpperCase() }}</div>

  <!-- æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆç”¨åœ¨å±æ€§ç»‘å®šé‡Œï¼‰ -->
  <div :id="`item-${count}`"></div>
</template>
```

ğŸ”¶ **æ³¨æ„**ï¼šåªèƒ½ç”¨**è¡¨è¾¾å¼**ï¼Œä¸èƒ½ç”¨**è¯­å¥**ã€‚

```vue
<!-- âŒ è¿™äº›æ˜¯è¯­å¥ï¼Œä¼šæŠ¥é”™ -->
{{ var a = 1 }}
{{ if (ok) { return 'yes' } }}

<!-- âœ… ç”¨ä¸‰å…ƒè¡¨è¾¾å¼æ›¿ä»£ if -->
{{ ok ? 'yes' : 'no' }}
```

ğŸ¤” æ€ä¹ˆåŒºåˆ†è¡¨è¾¾å¼å’Œè¯­å¥ï¼Ÿ

ä¸€ä¸ªç®€å•çš„åˆ¤æ–­æ–¹æ³•ï¼šèƒ½å†™åœ¨ `return` åé¢çš„å°±æ˜¯è¡¨è¾¾å¼ã€‚

```js
return count + 1        // âœ… è¡¨è¾¾å¼
return isVip ? 'a' : 'b' // âœ… è¡¨è¾¾å¼
return var a = 1         // âŒ è¯­å¥
```

## æ¨¡æ¿ä¸­çš„å…¨å±€å¯¹è±¡è®¿é—®

æ¨¡æ¿æ˜¯"æ²™ç›’åŒ–"çš„ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œåªèƒ½è®¿é—®[ç™½åå•å†…çš„å…¨å±€å¯¹è±¡](https://github.com/vuejs/core/blob/main/packages/shared/src/globalsAllowList.ts#L3)ï¼Œæ¯”å¦‚ `Math`ã€`Date`ã€`JSON` ç­‰ï¼š

```vue
<template>
  <!-- âœ… Math åœ¨ç™½åå•é‡Œ -->
  <div>{{ Math.random() }}</div>
  <div>{{ Math.floor(3.7) }}</div>

  <!-- âœ… Date ä¹Ÿåœ¨ -->
  <div>{{ new Date().toLocaleDateString() }}</div>
</template>
```

ğŸ™‹ æƒ³ç”¨è‡ªå®šä¹‰çš„å…¨å±€å¯¹è±¡æ€ä¹ˆåŠï¼Ÿ

éœ€è¦åœ¨ `main.js` ä¸­é€šè¿‡ `app.config.globalProperties` æ³¨å†Œï¼š

```js
// main.js
import { createApp } from 'vue'
import App from './App.vue'

const app = createApp(App)

// æ³¨å†Œå…¨å±€å¯¹è±¡
app.config.globalProperties.$utils = {
  formatDate(date) {
    return date.toISOString().slice(0, 10)
  },
}

app.mount('#app')
```

ç„¶ååœ¨ä»»æ„ç»„ä»¶æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š

```vue
<template>
  <div>{{ $utils.formatDate(new Date()) }}</div>
</template>
```

## å°ç»“

Vue æ¨¡æ¿è¯­æ³•çš„æ ¸å¿ƒå°±è¿™å‡ ä¸ªï¼š

| è¯­æ³•           | ç”¨é€”      | ç¤ºä¾‹                        |
| -------------- | --------- | --------------------------- |
| `{{ }}`        | æ–‡æœ¬æ’å€¼  | `{{ message }}`             |
| `v-html`       | æ¸²æŸ“ HTML | `<div v-html="html"></div>` |
| `:attr`        | å±æ€§ç»‘å®š  | `<img :src="url">`          |
| `v-bind="obj"` | æ‰¹é‡ç»‘å®š  | `<div v-bind="attrs">`      |

æ¨¡æ¿é‡Œå¯ä»¥å†™ JS è¡¨è¾¾å¼ï¼Œä½†ä¸èƒ½å†™è¯­å¥ã€‚å…¨å±€å¯¹è±¡è®¿é—®å—é™ï¼Œéœ€è¦ç”¨ `globalProperties` æ³¨å†Œã€‚

ä¸‹ä¸€ç¯‡æˆ‘ä»¬æ¥çœ‹ Vue æœ€æ ¸å¿ƒçš„æ¦‚å¿µâ€”â€”å“åº”å¼æ•°æ®ã€‚
