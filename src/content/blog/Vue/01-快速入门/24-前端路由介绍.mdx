---
title: 'Vue Router å¿«é€Ÿå…¥é—¨'
pubDate: 2024-01-15
category: 'Vue'
tags: ['Vue3', 'VueRouter', 'è·¯ç”±']
description: 'äº†è§£å‰ç«¯è·¯ç”±çš„æ¦‚å¿µï¼Œå¿«é€Ÿä¸Šæ‰‹ Vue Router çš„åŸºæœ¬é…ç½®å’Œä½¿ç”¨'
---

## ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±

ğŸ™‹ åœ¨å•é¡µåº”ç”¨ï¼ˆSPAï¼‰å‡ºç°ä¹‹å‰ï¼Œè·¯ç”±æ˜¯åç«¯çš„äº‹ï¼š

```
ç”¨æˆ·è®¿é—® /about â†’ æœåŠ¡å™¨è¿”å› about.html
ç”¨æˆ·è®¿é—® /home  â†’ æœåŠ¡å™¨è¿”å› home.html
```

æ¯æ¬¡é¡µé¢åˆ‡æ¢éƒ½è¦é‡æ–°è¯·æ±‚æœåŠ¡å™¨ï¼Œä½“éªŒä¸å¥½ã€‚

å•é¡µåº”ç”¨æ—¶ä»£ï¼Œåªæœ‰**ä¸€ä¸ª HTML é¡µé¢**ï¼Œè§†å›¾åˆ‡æ¢å˜æˆäº†**ç»„ä»¶åˆ‡æ¢**ï¼š

```
ç”¨æˆ·è®¿é—® /about â†’ æ˜¾ç¤º About ç»„ä»¶
ç”¨æˆ·è®¿é—® /home  â†’ æ˜¾ç¤º Home ç»„ä»¶
```

**å‰ç«¯è·¯ç”±** = URL è·¯å¾„ å’Œ ç»„ä»¶ çš„æ˜ å°„å…³ç³»ã€‚

## Vue Router åŸºç¡€

Vue å®˜æ–¹çš„è·¯ç”±åº“ï¼š[Vue Router](https://router.vuejs.org/zh/)

### å®‰è£…

```bash
npm install vue-router@4
```

### é…ç½®è·¯ç”±

åˆ›å»º `src/router/index.ts`ï¼š

```ts
import { createRouter, createWebHistory } from 'vue-router'
import Home from '@/views/Home.vue'
import About from '@/views/About.vue'

const router = createRouter({
  history: createWebHistory(), // HTML5 History æ¨¡å¼
  routes: [
    {
      path: '/',
      name: 'Home',
      component: Home,
    },
    {
      path: '/about',
      name: 'About',
      component: About,
    },
  ],
})

export default router
```

### æŒ‚è½½è·¯ç”±

åœ¨ `main.ts` ä¸­ï¼š

```ts
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'

createApp(App).use(router).mount('#app')
```

### ä½¿ç”¨è·¯ç”±

```vue
<template>
  <nav>
    <router-link to="/">é¦–é¡µ</router-link>
    <router-link to="/about">å…³äº</router-link>
  </nav>

  <!-- è·¯ç”±åŒ¹é…çš„ç»„ä»¶æ¸²æŸ“åœ¨è¿™é‡Œ -->
  <router-view />
</template>
```

| ç»„ä»¶            | ä½œç”¨                      |
| --------------- | ------------------------- |
| `<router-link>` | å¯¼èˆªé“¾æ¥ï¼Œç±»ä¼¼ `<a>` æ ‡ç­¾ |
| `<router-view>` | æ˜¾ç¤ºå½“å‰è·¯ç”±å¯¹åº”çš„ç»„ä»¶    |

## è·¯ç”±æ¨¡å¼

| æ¨¡å¼    | å‡½æ•°                     | URL ç¤ºä¾‹   | è¯´æ˜           |
| ------- | ------------------------ | ---------- | -------------- |
| History | `createWebHistory()`     | `/about`   | éœ€è¦æœåŠ¡å™¨é…ç½® |
| Hash    | `createWebHashHistory()` | `/#/about` | å…¼å®¹æ€§å¥½       |

## æ‡’åŠ è½½

è·¯ç”±ç»„ä»¶æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘é¦–å±ä½“ç§¯ï¼š

```ts
const routes = [
  {
    path: '/about',
    component: () => import('@/views/About.vue'), // æ‡’åŠ è½½
  },
]
```

## ç¼–ç¨‹å¼å¯¼èˆª

```ts
import { useRouter } from 'vue-router'

const router = useRouter()

// è·³è½¬
router.push('/about')
router.push({ name: 'About' })
router.push({ path: '/about', query: { id: 1 } })

// æ›¿æ¢ï¼ˆä¸äº§ç”Ÿå†å²è®°å½•ï¼‰
router.replace('/about')

// åé€€
router.back()
router.go(-1)
```

## è·å–è·¯ç”±ä¿¡æ¯

```ts
import { useRoute } from 'vue-router'

const route = useRoute()

console.log(route.path) // å½“å‰è·¯å¾„
console.log(route.params) // è·¯å¾„å‚æ•°
console.log(route.query) // æŸ¥è¯¢å‚æ•°
console.log(route.name) // è·¯ç”±åç§°
```

## å¿«é€Ÿç¤ºä¾‹

ç›®å½•ç»“æ„ï¼š

```
src/
  views/
    Home.vue
    About.vue
  router/
    index.ts
  App.vue
  main.ts
```

`views/Home.vue`ï¼š

```vue
<template>
  <h1>é¦–é¡µ</h1>
</template>
```

`views/About.vue`ï¼š

```vue
<template>
  <h1>å…³äºæˆ‘ä»¬</h1>
</template>
```

`App.vue`ï¼š

```vue
<template>
  <nav>
    <router-link to="/">é¦–é¡µ</router-link>
    <router-link to="/about">å…³äº</router-link>
  </nav>
  <main>
    <router-view />
  </main>
</template>

<style>
nav a {
  margin-right: 16px;
}
nav a.router-link-active {
  color: #42b983;
}
</style>
```

## å°ç»“

| æ¦‚å¿µ            | è¯´æ˜                              |
| --------------- | --------------------------------- |
| è·¯ç”±é…ç½®        | `routes` æ•°ç»„å®šä¹‰è·¯å¾„å’Œç»„ä»¶çš„æ˜ å°„ |
| `<router-link>` | å£°æ˜å¼å¯¼èˆª                        |
| `<router-view>` | è·¯ç”±å‡ºå£                          |
| `useRouter()`   | è·å–è·¯ç”±å®ä¾‹ï¼Œç”¨äºç¼–ç¨‹å¼å¯¼èˆª      |
| `useRoute()`    | è·å–å½“å‰è·¯ç”±ä¿¡æ¯                  |

Vue Router è¿˜æœ‰å¾ˆå¤šé«˜çº§åŠŸèƒ½ï¼ˆåŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€å¯¼èˆªå®ˆå«ç­‰ï¼‰ï¼Œåç»­æ–‡ç« ä¼šè¯¦ç»†ä»‹ç»ã€‚
