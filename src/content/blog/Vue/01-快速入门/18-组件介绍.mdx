---
title: 'Vue3 ç»„ä»¶åŸºç¡€'
pubDate: 2024-01-15
category: 'Vue'
tags: ['Vue3', 'ç»„ä»¶', 'SFC']
description: 'äº†è§£ Vue3 å•æ–‡ä»¶ç»„ä»¶çš„ç»“æ„ã€ç»„ä»¶æ³¨å†Œæ–¹å¼ã€ä»¥åŠå‘½åè§„èŒƒ'
---

ç»„ä»¶æ˜¯ Vue æœ€æ ¸å¿ƒçš„æ¦‚å¿µã€‚ä¸€ä¸ª Vue åº”ç”¨å°±æ˜¯ç”±ä¸€æ£µç»„ä»¶æ ‘æ„æˆçš„ã€‚

## å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰

Vue ä½¿ç”¨ `.vue` æ–‡ä»¶æ¥å®šä¹‰ç»„ä»¶ï¼Œä¸€ä¸ªæ–‡ä»¶åŒ…å«æ¨¡æ¿ã€é€»è¾‘ã€æ ·å¼ï¼š

```vue
<template>
  <button @click="count++">ç‚¹å‡»äº† {{ count }} æ¬¡</button>
</template>

<script setup>
import { ref } from 'vue'
const count = ref(0)
</script>

<style scoped>
button {
  padding: 8px 16px;
}
</style>
```

### ä¸‰ä¸ªéƒ¨åˆ†

| éƒ¨åˆ†             | ä½œç”¨ | è¯´æ˜                                    |
| ---------------- | ---- | --------------------------------------- |
| `<template>`     | æ¨¡æ¿ | ç»„ä»¶çš„ HTML ç»“æ„                        |
| `<script setup>` | é€»è¾‘ | ç»„ä»¶çš„ JS é€»è¾‘ï¼Œsetup è¯­æ³•ç³–ç®€åŒ–ä»£ç     |
| `<style scoped>` | æ ·å¼ | ç»„ä»¶ç§æœ‰æ ·å¼ï¼Œscoped ç¡®ä¿ä¸æ±¡æŸ“å…¶ä»–ç»„ä»¶ |

### script setup çš„å¥½å¤„

å¯¹æ¯”ä¼ ç»Ÿå†™æ³•ï¼š

```vue
<!-- ä¼ ç»Ÿå†™æ³• -->
<script>
import { ref } from 'vue'
export default {
  setup() {
    const count = ref(0)
    return { count } // éœ€è¦æ‰‹åŠ¨ return
  },
}
</script>

<!-- setup è¯­æ³•ç³– -->
<script setup>
import { ref } from 'vue'
const count = ref(0) // è‡ªåŠ¨æš´éœ²ç»™æ¨¡æ¿
</script>
```

ğŸ¯ **setup è¯­æ³•ç³–ä¼˜åŠ¿**ï¼š

- æ›´å°‘çš„æ ·æ¿ä»£ç 
- æ›´å¥½çš„ TypeScript ç±»å‹æ¨æ–­
- æ”¯æŒé¡¶çº§ await

## ç»„ä»¶æ³¨å†Œ

### å±€éƒ¨æ³¨å†Œï¼ˆæ¨èï¼‰

åœ¨ setup è¯­æ³•ç³–ä¸­ï¼Œå¯¼å…¥å³å¯ä½¿ç”¨ï¼š

```vue
<script setup>
import MyButton from './MyButton.vue'
// ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼Œæ— éœ€æ³¨å†Œ
</script>

<template>
  <MyButton />
</template>
```

### å…¨å±€æ³¨å†Œ

åœ¨ `main.ts` ä¸­æ³¨å†Œï¼Œå…¨å±€å¯ç”¨ï¼š

```ts
// main.ts
import { createApp } from 'vue'
import App from './App.vue'
import GlobalButton from './components/GlobalButton.vue'

const app = createApp(App)
app.component('GlobalButton', GlobalButton)
app.mount('#app')
```

ğŸ”¶ **å…¨å±€æ³¨å†Œçš„é—®é¢˜**ï¼š

- æ— æ³• Tree-shakingï¼ˆæœªä½¿ç”¨çš„ç»„ä»¶ä¹Ÿä¼šæ‰“åŒ…ï¼‰
- ä¾èµ–å…³ç³»ä¸æ˜ç¡®
- å¤§é¡¹ç›®éš¾ä»¥ç»´æŠ¤

ğŸ¯ **ç»“è®º**ï¼šä¼˜å…ˆä½¿ç”¨å±€éƒ¨æ³¨å†Œã€‚

## ç»„ä»¶å‘½å

### æ¨èï¼šPascalCaseï¼ˆå¤§é©¼å³°ï¼‰

```vue
<!-- âœ… æ¨è -->
<MyComponent />
<UserCard />
<TodoList />

<!-- âŒ ä¸æ¨è -->
<my-component />
<usercard />
```

å¤§é©¼å³°çš„å¥½å¤„ï¼š

- ä¸åŸç”Ÿ HTML å…ƒç´ åŒºåˆ†å¼€
- IDE æ”¯æŒæ›´å¥½
- ä¸ JS ç±»å‘½åé£æ ¼ä¸€è‡´

### æ–‡ä»¶å‘½å

```
components/
  UserCard.vue      âœ… å¤§é©¼å³°
  TodoList.vue      âœ… å¤§é©¼å³°
  BaseButton.vue    âœ… å¤§é©¼å³°
```

## ç»„ä»¶çš„æ ¸å¿ƒæ¦‚å¿µé¢„è§ˆ

ä¸€ä¸ªç»„ä»¶é™¤äº†è‡ªèº«çš„æ¨¡æ¿å’Œé€»è¾‘ï¼Œè¿˜éœ€è¦å’Œå¤–ç•Œäº¤äº’ï¼š

| æ¦‚å¿µ               | ä½œç”¨                 | æ–¹å‘        |
| ------------------ | -------------------- | ----------- |
| **Props**          | æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ® | çˆ¶ â†’ å­     |
| **Emits**          | å‘çˆ¶ç»„ä»¶å‘é€äº‹ä»¶     | å­ â†’ çˆ¶     |
| **Slots**          | æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„å†…å®¹ | çˆ¶ â†’ å­     |
| **Provide/Inject** | è·¨å±‚çº§ä¼ é€’æ•°æ®       | ç¥–å…ˆ â†’ åä»£ |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           çˆ¶ç»„ä»¶                â”‚
â”‚                                 â”‚
â”‚   props â†“        â†‘ emits       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚         â”‚   å­ç»„ä»¶      â”‚       â”‚
â”‚         â”‚               â”‚       â”‚
â”‚         â”‚  <slot />     â”‚       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚              slots â†‘            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿç¤ºä¾‹

çˆ¶ç»„ä»¶ï¼š

```vue
<script setup>
import UserCard from './UserCard.vue'
import { ref } from 'vue'

const user = ref({ name: 'å¼ ä¸‰', email: 'test@example.com' })
</script>

<template>
  <UserCard :user="user" />
</template>
```

å­ç»„ä»¶ UserCard.vueï¼š

```vue
<script setup>
defineProps<{
  user: { name: string; email: string }
}>()
</script>

<template>
  <div class="card">
    <h3>{{ user.name }}</h3>
    <p>{{ user.email }}</p>
  </div>
</template>

<style scoped>
.card {
  padding: 16px;
  border: 1px solid #eee;
  border-radius: 8px;
}
</style>
```

## å°ç»“

| è¦ç‚¹     | å»ºè®®                         |
| -------- | ---------------------------- |
| ç»„ä»¶å®šä¹‰ | ä½¿ç”¨ `.vue` å•æ–‡ä»¶ç»„ä»¶       |
| script   | ä½¿ç”¨ `<script setup>` è¯­æ³•ç³– |
| æ ·å¼     | æ·»åŠ  `scoped` é˜²æ­¢æ±¡æŸ“       |
| æ³¨å†Œæ–¹å¼ | ä¼˜å…ˆå±€éƒ¨æ³¨å†Œ                 |
| å‘½å     | ä½¿ç”¨ PascalCase              |

ä¸‹ä¸€ç¯‡æˆ‘ä»¬æ¥è¯¦ç»†å­¦ä¹  Propsã€‚
