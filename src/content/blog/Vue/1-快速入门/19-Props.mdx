---
title: 'Vue3 Props è¯¦è§£'
pubDate: 2024-01-15
category: 'Vue'
tags: ['Vue3', 'Props', 'ç»„ä»¶é€šä¿¡']
description: 'æŒæ¡ Props çš„å£°æ˜æ–¹å¼ã€ç±»å‹æ ¡éªŒã€å•å‘æ•°æ®æµåŸåˆ™'
---

Props æ˜¯çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®çš„æ–¹å¼ã€‚

## åŸºæœ¬ç”¨æ³•

å­ç»„ä»¶ç”¨ `defineProps` å£°æ˜è¦æ¥æ”¶çš„ propsï¼š

```vue
<!-- UserCard.vue -->
<script setup>
const props = defineProps({
  name: String,
  age: Number,
})
</script>

<template>
  <div>{{ name }} - {{ age }}å²</div>
</template>
```

çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼š

```vue
<script setup>
import UserCard from './UserCard.vue'
</script>

<template>
  <UserCard name="å¼ ä¸‰" :age="18" />
</template>
```

ğŸ”¶ **æ³¨æ„**ï¼šéå­—ç¬¦ä¸²ç±»å‹å¿…é¡»ç”¨ `v-bind`ï¼ˆ`:age="18"`ï¼‰ï¼Œå¦åˆ™ä¼šè¢«å½“ä½œå­—ç¬¦ä¸²ã€‚

## TypeScript å†™æ³•

ä½¿ç”¨æ³›å‹æ›´ç®€æ´ï¼š

```vue
<script setup lang="ts">
interface Props {
  name: string
  age?: number // å¯é€‰
  tags?: string[]
}

const props = defineProps<Props>()
</script>
```

å¸¦é»˜è®¤å€¼ï¼š

```vue
<script setup lang="ts">
interface Props {
  name: string
  age?: number
  tags?: string[]
}

const props = withDefaults(defineProps<Props>(), {
  age: 18,
  tags: () => [], // å¯¹è±¡/æ•°ç»„é»˜è®¤å€¼å¿…é¡»ç”¨å·¥å‚å‡½æ•°
})
</script>
```

## Props æ ¡éªŒ

```ts
defineProps({
  // åŸºç¡€ç±»å‹
  title: String,

  // å¤šç§ç±»å‹
  id: [String, Number],

  // å¿…å¡«
  name: {
    type: String,
    required: true,
  },

  // å¸¦é»˜è®¤å€¼
  count: {
    type: Number,
    default: 0,
  },

  // å¯¹è±¡é»˜è®¤å€¼ï¼ˆå¿…é¡»ç”¨å·¥å‚å‡½æ•°ï¼‰
  config: {
    type: Object,
    default: () => ({ theme: 'light' }),
  },

  // è‡ªå®šä¹‰æ ¡éªŒ
  status: {
    type: String,
    validator: (value) => ['pending', 'success', 'error'].includes(value),
  },
})
```

## å‘½åçº¦å®š

| ä½ç½®           | å‘½åé£æ ¼   | ç¤ºä¾‹                       |
| -------------- | ---------- | -------------------------- |
| defineProps ä¸­ | camelCase  | `userName`                 |
| æ¨¡æ¿ä¸­ä½¿ç”¨     | camelCase  | `{{ userName }}`           |
| çˆ¶ç»„ä»¶ä¼ é€’     | kebab-case | `<Comp user-name="..." />` |

Vue ä¼šè‡ªåŠ¨è½¬æ¢ `user-name` â†’ `userName`ã€‚

## å•å‘æ•°æ®æµ

ğŸ”¶ **æ ¸å¿ƒåŸåˆ™**ï¼šProps æ˜¯åªè¯»çš„ï¼Œå­ç»„ä»¶ä¸èƒ½ä¿®æ”¹ã€‚

```ts
const props = defineProps(['count'])

// âŒ é”™è¯¯ï¼ä¼šæŠ¥è­¦å‘Š
props.count = 10
```

### éœ€è¦ä¿®æ”¹æ€ä¹ˆåŠï¼Ÿ

**æ–¹æ¡ˆ 1**ï¼šç”¨æœ¬åœ°å˜é‡

```ts
const props = defineProps(['initialCount'])
const count = ref(props.initialCount) // å¤åˆ¶ä¸€ä»½
```

**æ–¹æ¡ˆ 2**ï¼šç”¨è®¡ç®—å±æ€§

```ts
const props = defineProps(['size'])
const normalizedSize = computed(() => props.size.toLowerCase())
```

**æ–¹æ¡ˆ 3**ï¼šè§¦å‘äº‹ä»¶è®©çˆ¶ç»„ä»¶ä¿®æ”¹

```ts
const emit = defineEmits(['update:count'])
const increment = () => emit('update:count', props.count + 1)
```

## åŠ¨æ€ Props

ç»‘å®šå“åº”å¼æ•°æ®ï¼š

```vue
<script setup>
import { ref } from 'vue'
const user = ref({ name: 'å¼ ä¸‰', age: 18 })
</script>

<template>
  <!-- ä¼ é€’æ•´ä¸ªå¯¹è±¡ -->
  <UserCard :user="user" />

  <!-- ä¼ é€’å¯¹è±¡çš„å±æ€§ -->
  <UserCard :name="user.name" :age="user.age" />

  <!-- å±•å¼€å¯¹è±¡ï¼ˆç­‰ä»·äºä¸Šé¢ï¼‰ -->
  <UserCard v-bind="user" />
</template>
```

## å®æˆ˜ç¤ºä¾‹

```vue
<!-- Button.vue -->
<script setup lang="ts">
interface Props {
  type?: 'primary' | 'default' | 'danger'
  size?: 'small' | 'medium' | 'large'
  disabled?: boolean
  loading?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  type: 'default',
  size: 'medium',
  disabled: false,
  loading: false,
})
</script>

<template>
  <button
    :class="['btn', `btn--${type}`, `btn--${size}`]"
    :disabled="disabled || loading"
  >
    <span v-if="loading">åŠ è½½ä¸­...</span>
    <slot v-else />
  </button>
</template>
```

ä½¿ç”¨ï¼š

```vue
<template>
  <Button type="primary" size="large">æäº¤</Button>
  <Button type="danger" :disabled="true">åˆ é™¤</Button>
  <Button :loading="isLoading">ä¿å­˜</Button>
</template>
```

## å°ç»“

| è¦ç‚¹     | è¯´æ˜                                |
| -------- | ----------------------------------- |
| å£°æ˜     | `defineProps` æˆ– `defineProps<T>()` |
| é»˜è®¤å€¼   | `withDefaults` æˆ– `default` é…ç½®    |
| å‘½å     | JS ç”¨ camelCaseï¼ŒHTML ç”¨ kebab-case |
| ä¿®æ”¹     | ä¸èƒ½ç›´æ¥æ”¹ï¼Œç”¨æœ¬åœ°å˜é‡æˆ–è§¦å‘äº‹ä»¶    |
| éå­—ç¬¦ä¸² | å¿…é¡»ç”¨ `v-bind`ï¼ˆ`:prop="value"`ï¼‰  |

ä¸‹ä¸€ç¯‡æˆ‘ä»¬æ¥çœ‹è‡ªå®šä¹‰äº‹ä»¶ã€‚
