---
title: 'è§£æ„èµ‹å€¼è¿›é˜¶'
description: 'æ·±å…¥æ¢è®¨åµŒå¥—è§£æ„ã€å‡½æ•°å‚æ•°è§£æ„ã€å¤æ‚æ•°æ®å¤„ç†ç­‰è§£æ„èµ‹å€¼çš„é«˜çº§ç”¨æ³•'
pubDate: 2024-01-03
toc: true
ogImage: true
category: 'ES6+'
tags: ['ES6', 'è§£æ„èµ‹å€¼', 'åµŒå¥—è§£æ„', 'é»˜è®¤å€¼']
---

æŒæ¡äº†åŸºç¡€è§£æ„åï¼Œæ¥çœ‹ä¸€äº›æ›´å¤æ‚çš„åœºæ™¯å’ŒæŠ€å·§ã€‚

## åµŒå¥—è§£æ„

### åµŒå¥—æ•°ç»„

```javascript
const matrix = [
  [1, 2],
  [3, 4],
]
const [[a, b], [c, d]] = matrix
console.log(a, b, c, d) // 1 2 3 4

// éƒ¨åˆ†è§£æ„
const [[first]] = matrix
console.log(first) // 1
```

### åµŒå¥—å¯¹è±¡

```javascript
const user = {
  name: 'å¼ ä¸‰',
  address: {
    city: 'åŒ—äº¬',
    district: 'æœé˜³',
  },
}

const {
  address: { city, district },
} = user
console.log(city) // 'åŒ—äº¬'
console.log(district) // 'æœé˜³'
// console.log(address); // ReferenceError: address æœªå®šä¹‰
```

ğŸ¤” å¦‚æœåŒæ—¶éœ€è¦ `address` å’Œå†…éƒ¨å±æ€§ï¼š

```javascript
const {
  address,
  address: { city },
} = user
console.log(address) // { city: 'åŒ—äº¬', district: 'æœé˜³' }
console.log(city) // 'åŒ—äº¬'
```

### æ··åˆè§£æ„

æ•°ç»„å’Œå¯¹è±¡æ··åˆï¼š

```javascript
const data = {
  items: [
    { id: 1, name: 'å•†å“A' },
    { id: 2, name: 'å•†å“B' },
  ],
}

const {
  items: [first, second],
} = data
console.log(first) // { id: 1, name: 'å•†å“A' }

// æ›´æ·±ä¸€å±‚
const {
  items: [{ name: firstName }, { name: secondName }],
} = data
console.log(firstName, secondName) // 'å•†å“A' 'å•†å“B'
```

## å‡½æ•°å‚æ•°è§£æ„

### åŸºæœ¬ç”¨æ³•

```javascript
function greet({ name, age }) {
  console.log(`${name}, ${age}å²`)
}

greet({ name: 'å¼ ä¸‰', age: 25 }) // å¼ ä¸‰, 25å²
```

### å¸¦é»˜è®¤å€¼çš„å‚æ•°è§£æ„

```javascript
function createUser({ name = 'åŒ¿å', age = 18, role = 'user' } = {}) {
  return { name, age, role }
}

createUser({ name: 'å¼ ä¸‰' }) // { name: 'å¼ ä¸‰', age: 18, role: 'user' }
createUser() // { name: 'åŒ¿å', age: 18, role: 18 }
```

ğŸ”¶ æ³¨æ„æœ€åçš„ `= {}`ï¼Œå®ƒç¡®ä¿ä¸ä¼ å‚æ•°æ—¶ä¹Ÿä¸ä¼šæŠ¥é”™ï¼š

```javascript
// æ²¡æœ‰ = {} çš„æƒ…å†µ
function badCreate({ name = 'åŒ¿å' }) {
  return name
}
// badCreate(); // TypeError: Cannot read properties of undefined
```

### æ··åˆæ™®é€šå‚æ•°å’Œè§£æ„

```javascript
function request(url, { method = 'GET', headers = {}, body } = {}) {
  console.log(url, method, headers, body)
}

request('/api/users') // '/api/users' 'GET' {} undefined
request('/api/users', { method: 'POST', body: '{}' })
```

### æ•°ç»„å‚æ•°è§£æ„

```javascript
function sum([a, b, c = 0]) {
  return a + b + c
}

sum([1, 2]) // 3
sum([1, 2, 3]) // 6

// å®ç”¨åœºæ™¯ï¼šå¤„ç†åæ ‡
function distance([x1, y1], [x2, y2]) {
  return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)
}

distance([0, 0], [3, 4]) // 5
```

## å¤æ‚åœºæ™¯å®æˆ˜

### API å“åº”å¤„ç†

```javascript
// æ¨¡æ‹Ÿ API å“åº”
const response = {
  status: 200,
  data: {
    user: {
      id: 1,
      profile: {
        name: 'å¼ ä¸‰',
        avatar: 'avatar.jpg',
      },
    },
    permissions: ['read', 'write'],
  },
  meta: {
    timestamp: 1699000000,
  },
}

// ä¸€æ¬¡æ€§æå–æ‰€éœ€æ•°æ®
const {
  data: {
    user: {
      id: userId,
      profile: { name: userName },
    },
    permissions: [primaryPermission],
  },
} = response

console.log(userId) // 1
console.log(userName) // 'å¼ ä¸‰'
console.log(primaryPermission) // 'read'
```

### é…ç½®å¯¹è±¡åˆå¹¶

```javascript
function initApp(options = {}) {
  const {
    debug = false,
    api: { baseUrl = 'https://api.example.com', timeout = 5000 } = {},
    ui: { theme = 'light', language = 'zh-CN' } = {},
  } = options

  return { debug, api: { baseUrl, timeout }, ui: { theme, language } }
}

// å®Œå…¨ä½¿ç”¨é»˜è®¤å€¼
initApp()

// éƒ¨åˆ†è¦†ç›–
initApp({
  debug: true,
  api: { timeout: 10000 },
})
```

### æ•°ç»„æ“ä½œ

```javascript
// å–é¦–å°¾
function getFirstAndLast(arr) {
  const [first, ...rest] = arr
  const last = rest.pop()
  return { first, last }
}

getFirstAndLast([1, 2, 3, 4]) // { first: 1, last: 4 }

// é€’å½’å¤„ç†é“¾è¡¨ç»“æ„
function sum([head, ...tail]) {
  return head === undefined ? 0 : head + sum(tail)
}

sum([1, 2, 3, 4]) // 10
```

### å¤„ç†å¯é€‰å±æ€§

```javascript
// å®‰å…¨åœ°å¤„ç†å¯èƒ½ä¸å­˜åœ¨çš„åµŒå¥—å±æ€§
const data = {
  user: {
    // address å¯èƒ½ä¸å­˜åœ¨
  },
}

// ä¼ ç»Ÿå†™æ³•
const city1 = data.user && data.user.address && data.user.address.city

// è§£æ„ + é»˜è®¤å€¼
const { user: { address: { city } = {} } = {} } = data
console.log(city) // undefinedï¼Œä¸ä¼šæŠ¥é”™

// æˆ–è€…ç”¨å¯é€‰é“¾ï¼ˆæ›´æ¨èï¼‰
const city2 = data.user?.address?.city
```

## å®ç”¨æŠ€å·§

### æå–å¯¹è±¡éƒ¨åˆ†å±æ€§

```javascript
// åªä¿ç•™éœ€è¦çš„å±æ€§
function pick(obj, keys) {
  return keys.reduce((result, key) => {
    if (key in obj) {
      result[key] = obj[key]
    }
    return result
  }, {})
}

const user = { id: 1, name: 'å¼ ä¸‰', password: '123', email: 'test@test.com' }
const safeUser = pick(user, ['id', 'name', 'email'])
// { id: 1, name: 'å¼ ä¸‰', email: 'test@test.com' }

// ç”¨è§£æ„å®ç°æ’é™¤
const { password, ...publicInfo } = user
// publicInfo: { id: 1, name: 'å¼ ä¸‰', email: 'test@test.com' }
```

### åŠ¨æ€å±æ€§åè§£æ„

```javascript
const key = 'name'
const obj = { name: 'å¼ ä¸‰', age: 25 }

const { [key]: value } = obj
console.log(value) // 'å¼ ä¸‰'

// å®é™…åº”ç”¨
function getProperty(obj, propName) {
  const { [propName]: value } = obj
  return value
}
```

### è§£æ„èµ‹å€¼çš„è¿ç»­ä½¿ç”¨

```javascript
let a, b, c
const arr1 = [1, 2]
const arr2 = [3, 4]

// è¿ç»­è§£æ„
;[a, b] = arr1
;[b, c] = arr2
console.log(a, b, c) // 1 3 4
```

### å…‹éš†ä¸åˆå¹¶

```javascript
// æµ…å…‹éš†æ•°ç»„
const original = [1, 2, 3]
const [...clone] = original

// æµ…å…‹éš†å¯¹è±¡
const obj = { a: 1, b: 2 }
const { ...objClone } = obj

// åˆå¹¶å¯¹è±¡ï¼ˆè¦†ç›–åŒåå±æ€§ï¼‰
const defaults = { theme: 'light', lang: 'en' }
const userSettings = { lang: 'zh' }
const settings = { ...defaults, ...userSettings }
// { theme: 'light', lang: 'zh' }
```

## æ€§èƒ½è€ƒè™‘

### ğŸ”¶ é¿å…è¿‡æ·±çš„è§£æ„

```javascript
// ä¸æ¨èï¼šéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤
const {
  a: {
    b: {
      c: {
        d: { e },
      },
    },
  },
} = deepObject

// æ¨èï¼šåˆ†æ­¥è§£æ„æˆ–ä½¿ç”¨å¯é€‰é“¾
const { a } = deepObject
const e = a?.b?.c?.d?.e
```

### ğŸ”¶ å¤§å¯¹è±¡è§£æ„

è§£æ„ä¼šåˆ›å»ºæ–°çš„å˜é‡ç»‘å®šï¼Œå¯¹äºé¢‘ç¹è°ƒç”¨çš„å‡½æ•°è¦æ³¨æ„ï¼š

```javascript
// åœ¨çƒ­è·¯å¾„ä¸­é¿å…åˆ›å»ºä¸å¿…è¦çš„è§£æ„
function processItem(item) {
  // å¦‚æœåªç”¨ä¸€æ¬¡ï¼Œç›´æ¥è®¿é—®æ›´å¥½
  return item.value * 2
}

// å¤šæ¬¡ä½¿ç”¨æ—¶è§£æ„æ˜¯å€¼å¾—çš„
function processItem(item) {
  const { value, multiplier, offset } = item
  return value * multiplier + offset
}
```

## å¸¸è§é”™è¯¯

### ğŸ”¶ å¿˜è®°å¤„ç†ç©ºå€¼

```javascript
// é”™è¯¯
function getName({ user: { name } }) {
  return name
}
getName({ user: null }) // TypeError

// æ­£ç¡®
function getName({ user: { name } = {} } = {}) {
  return name
}
getName({ user: null }) // undefined
```

### ğŸ”¶ è§£æ„å£°æ˜ä¸èµ‹å€¼æ··æ·†

```javascript
// å£°æ˜æ—¶è§£æ„
const { a } = obj

// å·²æœ‰å˜é‡èµ‹å€¼
let b
;({ b } = obj) // éœ€è¦æ‹¬å·

// åŒæ—¶å£°æ˜å¤šä¸ªä¸åŒç±»å‹
const { x } = obj1
const [y] = arr1
// ä¸èƒ½å†™æˆ const { x } = obj1, [y] = arr1;
```

## å°ç»“

åµŒå¥—è§£æ„è®©æˆ‘ä»¬èƒ½å¤Ÿä»å¤æ‚çš„æ•°æ®ç»“æ„ä¸­ç²¾ç¡®æå–éœ€è¦çš„éƒ¨åˆ†ï¼Œä½†è¦æ³¨æ„ï¼š

1. **å¯è¯»æ€§ä¼˜å…ˆ**ï¼šè¿‡æ·±çš„åµŒå¥—è§£æ„ä¼šé™ä½ä»£ç å¯è¯»æ€§
2. **æä¾›é»˜è®¤å€¼**ï¼šé˜²æ­¢è§£æ„ undefined/null æŠ¥é”™
3. **åˆç†ä½¿ç”¨**ï¼šä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½é€‚åˆè§£æ„
4. **é…åˆå¯é€‰é“¾**ï¼š`?.` æ“ä½œç¬¦åœ¨æŸäº›åœºæ™¯æ›´ç®€æ´
