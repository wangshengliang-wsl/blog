---
title: 'è§£æ„èµ‹å€¼åŸºç¡€'
description: 'æŒæ¡ ES6 æ•°ç»„è§£æ„å’Œå¯¹è±¡è§£æ„çš„åŸºæœ¬è¯­æ³•ã€é»˜è®¤å€¼è®¾ç½®ä¸å®é™…åº”ç”¨åœºæ™¯'
pubDate: 2024-01-02
toc: true
ogImage: true
category: 'ES6+'
tags: ['ES6', 'è§£æ„èµ‹å€¼', 'æ•°ç»„', 'å¯¹è±¡']
---

è§£æ„èµ‹å€¼æ˜¯ ES6 ä¸­æœ€å®ç”¨çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸ä»æ•°ç»„æˆ–å¯¹è±¡ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®æˆ–å±æ€§åèµ‹å€¼ç»™å˜é‡ã€‚

## ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦è§£æ„

ä¼ ç»Ÿæ–¹å¼ä»å¯¹è±¡ä¸­å–å€¼ï¼š

```javascript
const user = { name: 'å¼ ä¸‰', age: 25, city: 'åŒ—äº¬' }

// ES5 å†™æ³•
var name = user.name
var age = user.age
var city = user.city

// ES6 è§£æ„
const { name, age, city } = user
```

ä»£ç ç®€æ´äº†å¾ˆå¤šï¼Œè€Œä¸”æ„å›¾æ›´æ¸…æ™°ã€‚

## æ•°ç»„è§£æ„

### åŸºæœ¬è¯­æ³•

æŒ‰ä½ç½®åŒ¹é…ï¼š

```javascript
const [a, b, c] = [1, 2, 3]
console.log(a) // 1
console.log(b) // 2
console.log(c) // 3
```

### è·³è¿‡å…ƒç´ 

ç”¨é€—å·è·³è¿‡ä¸éœ€è¦çš„å…ƒç´ ï¼š

```javascript
const [first, , third] = [1, 2, 3]
console.log(first) // 1
console.log(third) // 3

// åªå–ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª
const arr = [1, 2, 3, 4, 5]
const [head, , , , tail] = arr
console.log(head, tail) // 1 5
```

### å‰©ä½™å…ƒç´ 

ç”¨ `...` æ”¶é›†å‰©ä½™å…ƒç´ ï¼š

```javascript
const [first, ...rest] = [1, 2, 3, 4]
console.log(first) // 1
console.log(rest) // [2, 3, 4]

// å®ç”¨åœºæ™¯ï¼šåˆ†ç¦»å¤´éƒ¨å’Œå°¾éƒ¨
const [head, ...tail] = ['a', 'b', 'c']
console.log(head) // 'a'
console.log(tail) // ['b', 'c']
```

ğŸ”¶ å‰©ä½™å…ƒç´ å¿…é¡»æ˜¯æœ€åä¸€ä¸ªï¼š

```javascript
// const [...rest, last] = [1, 2, 3]; // SyntaxError
```

### é»˜è®¤å€¼

è§£æ„å¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å€¼ï¼š

```javascript
const [a, b, c = 3] = [1, 2]
console.log(c) // 3

const [x = 1, y = 2] = [undefined, null]
console.log(x) // 1ï¼ˆundefined è§¦å‘é»˜è®¤å€¼ï¼‰
console.log(y) // nullï¼ˆnull ä¸è§¦å‘é»˜è®¤å€¼ï¼‰
```

é»˜è®¤å€¼å¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œæƒ°æ€§æ±‚å€¼ï¼š

```javascript
function getValue() {
  console.log('è®¡ç®—é»˜è®¤å€¼')
  return 100
}

const [a = getValue()] = [1]
// ä¸ä¼šæ‰“å°ï¼Œå› ä¸º a æœ‰å€¼

const [b = getValue()] = []
// æ‰“å° 'è®¡ç®—é»˜è®¤å€¼'
```

### äº¤æ¢å˜é‡

ä¸éœ€è¦ä¸´æ—¶å˜é‡ï¼š

```javascript
let x = 1
let y = 2

;[x, y] = [y, x]
console.log(x, y) // 2 1

// ä¸‰ä¸ªå˜é‡è½®æ¢
let a = 1,
  b = 2,
  c = 3
;[a, b, c] = [c, a, b]
console.log(a, b, c) // 3 1 2
```

## å¯¹è±¡è§£æ„

### åŸºæœ¬è¯­æ³•

æŒ‰å±æ€§ååŒ¹é…ï¼š

```javascript
const { name, age } = { name: 'å¼ ä¸‰', age: 25 }
console.log(name) // 'å¼ ä¸‰'
console.log(age) // 25
```

é¡ºåºæ— å…³ï¼š

```javascript
const { age, name } = { name: 'å¼ ä¸‰', age: 25 }
console.log(name) // 'å¼ ä¸‰'
console.log(age) // 25
```

### é‡å‘½åå˜é‡

å±æ€§åå’Œå˜é‡åå¯ä»¥ä¸åŒï¼š

```javascript
const { name: username, age: userAge } = { name: 'å¼ ä¸‰', age: 25 }
console.log(username) // 'å¼ ä¸‰'
console.log(userAge) // 25
// console.log(name); // ReferenceError
```

è¯­æ³•æ˜¯ `{ å±æ€§å: å˜é‡å }`ï¼š

```javascript
// ä» API å“åº”ä¸­æå–å¹¶é‡å‘½å
const response = {
  data: { id: 1, user_name: 'å¼ ä¸‰' },
}

const {
  data: { id, user_name: userName },
} = response
console.log(id) // 1
console.log(userName) // 'å¼ ä¸‰'
```

### é»˜è®¤å€¼

```javascript
const { name, age = 18 } = { name: 'å¼ ä¸‰' }
console.log(age) // 18

// é‡å‘½å + é»˜è®¤å€¼
const { name: username = 'åŒ¿å', role = 'user' } = {}
console.log(username) // 'åŒ¿å'
console.log(role) // 'user'
```

### å‰©ä½™å±æ€§

```javascript
const { a, ...rest } = { a: 1, b: 2, c: 3 }
console.log(a) // 1
console.log(rest) // { b: 2, c: 3 }

// å®ç”¨åœºæ™¯ï¼šæ’é™¤æŸäº›å±æ€§
const user = { id: 1, name: 'å¼ ä¸‰', password: '123456' }
const { password, ...safeUser } = user
console.log(safeUser) // { id: 1, name: 'å¼ ä¸‰' }
```

## è§£æ„çš„å®é™…åº”ç”¨

### å‡½æ•°å‚æ•°è§£æ„

```javascript
// ä¼ ç»Ÿå†™æ³•
function createUser(options) {
  const name = options.name
  const age = options.age || 18
  const role = options.role || 'user'
  // ...
}

// è§£æ„å†™æ³•
function createUser({ name, age = 18, role = 'user' }) {
  console.log(name, age, role)
}

createUser({ name: 'å¼ ä¸‰' }) // å¼ ä¸‰ 18 user
```

### å‡½æ•°è¿”å›å€¼è§£æ„

```javascript
function getPosition() {
  return { x: 100, y: 200 }
}

const { x, y } = getPosition()
console.log(x, y) // 100 200

// æ•°ç»„è¿”å›å€¼
function getRange() {
  return [0, 100]
}

const [min, max] = getRange()
console.log(min, max) // 0 100
```

### æ¨¡å—å¯¼å…¥

```javascript
// è§£æ„å¯¼å…¥
import { useState, useEffect } from 'react'

// ç­‰ä»·äº
import React from 'react'
const { useState, useEffect } = React
```

### éå† Map

```javascript
const map = new Map([
  ['name', 'å¼ ä¸‰'],
  ['age', 25],
])

for (const [key, value] of map) {
  console.log(`${key}: ${value}`)
}
// name: å¼ ä¸‰
// age: 25
```

### å¤„ç† JSON æ•°æ®

```javascript
const response = {
  status: 200,
  data: {
    users: [
      { id: 1, name: 'å¼ ä¸‰' },
      { id: 2, name: 'æå››' },
    ],
    total: 2,
  },
}

const {
  data: { users, total },
} = response
console.log(users) // [{ id: 1, name: 'å¼ ä¸‰' }, ...]
console.log(total) // 2
```

## å¸¸è§é™·é˜±

### ğŸ”¶ å·²å£°æ˜å˜é‡çš„å¯¹è±¡è§£æ„

```javascript
let name, age

// é”™è¯¯å†™æ³•
// { name, age } = { name: 'å¼ ä¸‰', age: 25 }; // SyntaxError

// æ­£ç¡®å†™æ³•ï¼šç”¨æ‹¬å·åŒ…è£¹
;({ name, age } = { name: 'å¼ ä¸‰', age: 25 })
```

å› ä¸º `{` å¼€å¤´ä¼šè¢«è§£æä¸ºä»£ç å—ï¼Œéœ€è¦æ‹¬å·å‘Šè¯‰è§£æå™¨è¿™æ˜¯è¡¨è¾¾å¼ã€‚

### ğŸ”¶ è§£æ„ null å’Œ undefined

```javascript
// const { name } = null; // TypeError
// const { name } = undefined; // TypeError

// å®‰å…¨å†™æ³•
const { name } = null || {}
console.log(name) // undefined
```

### ğŸ”¶ å­—ç¬¦ä¸²è§£æ„

å­—ç¬¦ä¸²å¯ä»¥è¢«å½“ä½œæ•°ç»„è§£æ„ï¼š

```javascript
const [a, b, c] = 'hello'
console.log(a, b, c) // h e l

// ä¹Ÿå¯ä»¥è§£æ„ length å±æ€§
const { length } = 'hello'
console.log(length) // 5
```

### ğŸ”¶ æ•°å­—å’Œå¸ƒå°”å€¼

æ•°å­—å’Œå¸ƒå°”å€¼ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ï¼š

```javascript
const { toString: fn } = 123
console.log(fn === Number.prototype.toString) // true

const { valueOf } = true
console.log(valueOf === Boolean.prototype.valueOf) // true
```

## å°ç»“

| ç±»å‹     | è¯­æ³•                   | åŒ¹é…æ–¹å¼         |
| -------- | ---------------------- | ---------------- |
| æ•°ç»„è§£æ„ | `[a, b] = arr`         | æŒ‰ä½ç½®           |
| å¯¹è±¡è§£æ„ | `{ a, b } = obj`       | æŒ‰å±æ€§å         |
| é‡å‘½å   | `{ a: newA } = obj`    | å±æ€§å:å˜é‡å    |
| é»˜è®¤å€¼   | `{ a = 1 } = obj`      | undefined æ—¶ç”Ÿæ•ˆ |
| å‰©ä½™å…ƒç´  | `{ a, ...rest } = obj` | æ”¶é›†å‰©ä½™éƒ¨åˆ†     |

è§£æ„è®©ä»£ç æ›´ç®€æ´ã€æ„å›¾æ›´æ¸…æ™°ï¼Œæ˜¯æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ ES6 ç‰¹æ€§ä¹‹ä¸€ã€‚
