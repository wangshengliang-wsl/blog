---
title: Claude Code 完全指南
description: Claude Code 是 Anthropic 官方的终端 AI 编程助手，本文涵盖安装配置、CLAUDE.md 项目上下文、MCP 插件扩展、实战案例与使用技巧
pubDate: 2025-11-13
toc: true
ogImage: true
category: AI工具
---

Claude Code 是 Anthropic 官方出品的 AI 编程助手，直接在终端里就能用。它不只是回答问题，还能帮你改代码、跑命令，说白了就是给你配了个懂代码的 AI 搭档。

## 快速上手

### 安装配置

```bash
# 安装
npm install @anthropic/claude-code

# 检查是否安装成功
claude --version
```

配置环境变量（用 zsh 的话）：

```bash
export ANTHROPIC_AUTH_TOKEN='你的token' >> ~/.zshrc
export ANTHROPIC_BASE_URL='API地址' >> ~/.zshrc  # 用中转的话填中转地址
source ~/.zshrc
```

如果用的是 bash，把 `.zshrc` 换成 `.bash_profile` 和 `.bashrc` 就行。

启动：

```bash
cd your-project-folder
claude
```

界面长这样：
![](https://raw.githubusercontent.com/wangshengliang-wsl/blog/main/img/20251113112858888.png)

### 基础用法

```bash
# 进入交互模式（输入 /exit 或 /quit 退出）
claude

# 问完就退出
claude -p "你是什么模型？"

# 带着问题进入交互模式
claude "你是什么模型？"

# 查看帮助
claude --help

# 恢复上次对话
claude -c

# 从历史中选一个对话恢复
claude -r

# YOLO 模式：不需要确认，直接执行（费 token，慎用）
claude --dangerously-skip-permissions
```

## 核心功能详解

### CLAUDE.md - 让 AI 懂你的项目

这是 Claude Code 的灵魂功能。用 `/init` 初始化后，会在项目根目录生成一个 `CLAUDE.md` 文件。

**这个文件能干啥？**

- 告诉 AI 你的项目是干什么的
- 记录代码风格和规范（比如用 tab 还是空格）
- 保存重要的架构决策
- 作为每次对话的上下文

**怎么用？**

```bash
# 初始化
/init

# 或者用 # 快速添加记录
# 我们统一用 axios，别用 fetch
```

子目录也能建 `CLAUDE.md`，AI 会自动识别。文件格式随意，能看懂就行。

### 快捷键速查

聊天输入框里这些快捷键超好用：

- **`!`**：直接跑 bash 命令，比如 `! npm test`
- **`/`**：唤起内置命令，比如 `/help`、`/clear`
- **`@`**：引用文件，支持 `@src/**/*.tsx` 这种通配符，也能直接拖文件进来
- **`#`**：快速添加记录到 CLAUDE.md
- **`tab`**：切换思考模式（能看到 AI 的思考过程，挺有意思）
- **`shift + tab`**：循环切换三种模式
  - 普通模式：你确认每个改动
  - 自动接受：AI 自动应用修改
  - 计划模式：先做计划再执行
- **`ctrl + t`**：查看 TODO 列表
- **`option + ⏎`**：换行

![](https://raw.githubusercontent.com/wangshengliang-wsl/blog/main/img/20251113123937430.png)

### Plan Mode - 大需求必备

按 `shift + tab` 切换到计划模式，让 AI 先制定开发计划，你看完没问题再让它执行。这样能：

- 避免走弯路
- 省 token
- 确保开发方向对路

![](https://raw.githubusercontent.com/wangshengliang-wsl/blog/main/img/20251113115149099.png)

比如开发一个用户管理系统：

```text
[Plan Mode]
"我要做个用户管理系统：
- 用户列表（分页、搜索、筛选）
- 用户详情页
- 新增/编辑用户
- 权限管理"
```

AI 会列出详细步骤，你觉得 OK 再继续。

### 常用命令

- `/help` - 查看所有命令
- `/init` - 初始化 CLAUDE.md
- `/clear` - 清空当前对话
- `/compact` - 压缩对话历史（保留摘要）
- `/resume` - 切换对话
- `/mcp` - 管理 MCP 插件

### MCP - 给 AI 开外挂

MCP (Model Context Protocol) 能让 Claude Code 连接外部数据源：

```bash
# 装个 context7 mcp server
claude mcp add --transport http context7 https://mcp.context7.com/mcp

# 查看已安装的 MCP
claude mcp list
```

装上 GitHub MCP，AI 就能查你的 repo；装上数据库 MCP，AI 就能查数据库。

## 实战案例

### 添加暗黑模式

```bash
claude "帮我加个暗黑模式：
1. 加个切换按钮
2. 跟随系统主题
3. 用户偏好存 localStorage
4. 所有组件都适配"
```

AI 会自动帮你：

- 找到相关文件
- 改配置和样式
- 加切换逻辑
- 测试功能

### 代码重构

```bash
claude "重构一下 src/utils/api.js：
1. Promise 改成 async/await
2. 加上错误处理
3. 统一返回格式
4. 加个请求拦截器"
```

### Bug 修复

```bash
claude "@src/components/UserList.tsx 加载数据时闪烁，帮我看看"
```

AI 会读文件、找问题（可能是缺 loading 状态）、自动修。

### 批量处理

```bash
claude "把 src/pages 下所有 .js 转成 TypeScript，加上类型"
```

一次搞定多个文件，代码风格还能保持一致。

## 进阶技巧

### 思考模式

按 `tab` 开启，能看到 AI 的思考过程：

- 学习 AI 怎么分析问题
- 理解复杂问题的解法
- 调试 AI 的决策

挺有意思的，特别是遇到复杂问题时。

### 结合 bash 命令

```bash
! npm test       # 跑测试
! git status     # 看 git 状态
! npm run build  # 构建
```

AI 会根据命令输出继续工作，比如测试挂了就自动修。

### 快速上手小技巧

```bash
# 项目间快速切换
cd project-a && claude
cd project-b && claude -c  # 恢复 project-b 的对话历史

# 代码审查
claude "看看最近的 commit 有没有问题"

# 生成文档
claude "给 @src/utils 生成 API 文档"

# 生成测试
claude "给 @src/components/Button.tsx 写测试用例"

# 性能分析
claude "看看 @src/App.tsx 有啥性能问题"
```

## 常见问题

### 和 Cursor 比有啥区别？

| 特性     | Claude Code              | Cursor                   |
| -------- | ------------------------ | ------------------------ |
| 运行方式 | 命令行工具               | 完整的 IDE               |
| 使用场景 | 快速任务、脚本、终端操作 | 大型项目开发             |
| 学习成本 | 低（会用终端就行）       | 中（要适应新 IDE）       |
| 灵活性   | 高（哪都能用）           | 中（得在 Cursor 里工作） |
| 价格     | API 按量付费             | 订阅制                   |

其实可以一起用，Cursor 日常开发，Claude Code 处理快速任务和自动化脚本。

### Token 消耗太快咋办？

几个省 token 的办法：

- 用 `/compact` 压缩对话历史
- CLAUDE.md 写简洁点
- 大需求别上来就用 YOLO 模式
- 先用 Plan Mode 确认方案
- 简单任务用 `claude -p` 一次搞定

### 会不会把代码改坏？

放心，有这些保护：

- 改之前会显示 diff，你确认了才改
- 每个修改都能选择接受或拒绝
- 用 git 的话随时能回退
- 重要项目建议先在分支上试

刚开始用别开 YOLO 模式，慢慢熟悉再说。

### 怎么让 AI 更懂我的项目？

几个建议：

- 认真写 `CLAUDE.md`：项目简介、技术栈、代码规范、架构决策
- 用 `#` 记录重要决策
- 别动不动就 `/clear`，保留对话历史
- 子目录也可以建特定的 `CLAUDE.md`

## 写在最后

Claude Code 核心价值：

- ⚡ 提效神器：自动化重复工作，快速实现需求
- 📚 学习助手：帮你理解陌生代码和技术
- 🔍 代码质量：自动发现问题，给最佳实践建议
- 🛠️ 超级灵活：命令行工具，哪都能用

**适合这些人：**

- 熟悉终端的开发者
- 需要快速出原型的团队
- 想提效的个人开发者
- 学新技术栈的初学者

**上手建议：**

1. 先拿小项目练手
2. 好好写 CLAUDE.md
3. 多用 Plan Mode，少用 YOLO Mode
4. 记得用 git 做版本控制
5. 慢慢探索高级功能（MCP、自定义命令等）

装上就能用，试试就知道有多香了～ 🚀
