---
title: nvm å®Œå…¨æŒ‡å—
description: nvm æ˜¯æœ€æµè¡Œçš„ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œæœ¬æ–‡æ¶µç›–å®‰è£…é…ç½®ã€ç‰ˆæœ¬ç®¡ç†ã€é¡¹ç›®çº§ç‰ˆæœ¬é”å®šåŠå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
pubDate: 2025-11-09
toc: true
ogImage: true
category: åŒ…ç®¡ç†å·¥å…·
tags: ['nvm', 'Node.js', 'ç‰ˆæœ¬ç®¡ç†', 'JavaScript']
---

nvmï¼ˆNode Version Managerï¼‰æ˜¯æœ€æ—©ä¹Ÿæ˜¯æœ€æµè¡Œçš„ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚å®ƒå…è®¸åœ¨åŒä¸€å°æœºå™¨ä¸Šå®‰è£…å’Œåˆ‡æ¢å¤šä¸ª Node.js ç‰ˆæœ¬ï¼Œè§£å†³äº†ä¸åŒé¡¹ç›®ä¾èµ–ä¸åŒ Node ç‰ˆæœ¬çš„é—®é¢˜ã€‚

ğŸ¯ **ç¯å¢ƒè¯´æ˜**ï¼šæœ¬æ–‡åŸºäº nvm v0.40.x ç¼–å†™ï¼Œä»…é€‚ç”¨äº macOS å’Œ Linuxã€‚Windows ç”¨æˆ·è¯·ä½¿ç”¨ [nvm-windows](https://github.com/coreybutler/nvm-windows) æˆ– fnmã€‚

## å®‰è£… nvm

### å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash

# æˆ–ä½¿ç”¨ wget
$ wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash
```

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° Shell é…ç½®æ–‡ä»¶ï¼ˆ`~/.bashrc`ã€`~/.zshrc` ç­‰ï¼‰ï¼š

```bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
```

é‡æ–°åŠ è½½é…ç½®ï¼š

```bash
$ source ~/.zshrc
# æˆ–
$ source ~/.bashrc
```

### é€šè¿‡ Homebrewï¼ˆmacOSï¼‰

```bash
$ brew install nvm
```

éœ€è¦æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨ `~/.zshrc` ä¸­æ·»åŠ ï¼š

```bash
export NVM_DIR="$HOME/.nvm"
[ -s "/opt/homebrew/opt/nvm/nvm.sh" ] && \. "/opt/homebrew/opt/nvm/nvm.sh"
[ -s "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm" ] && \. "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"
```

éªŒè¯å®‰è£…ï¼š

```bash
$ nvm --version
0.40.1
```

## å®‰è£… Node.js

```bash
# å®‰è£…æœ€æ–° LTS ç‰ˆæœ¬
$ nvm install --lts

# å®‰è£…æœ€æ–°ç‰ˆæœ¬
$ nvm install node

# å®‰è£…æŒ‡å®šç‰ˆæœ¬
$ nvm install 20.10.0

# å®‰è£…æŒ‡å®šä¸»ç‰ˆæœ¬çš„æœ€æ–°ç‰ˆ
$ nvm install 20
```

æŸ¥çœ‹å¯å®‰è£…çš„ç‰ˆæœ¬ï¼š

```bash
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨ç‰ˆæœ¬
$ nvm ls-remote

# åªåˆ—å‡º LTS ç‰ˆæœ¬
$ nvm ls-remote --lts

# è¿‡æ»¤ç‰¹å®šç‰ˆæœ¬
$ nvm ls-remote 20
```

å¸è½½ç‰ˆæœ¬ï¼š

```bash
$ nvm uninstall 18.19.0
```

## åˆ‡æ¢ç‰ˆæœ¬

```bash
# åˆ‡æ¢åˆ°æŒ‡å®šç‰ˆæœ¬
$ nvm use 20

# åˆ‡æ¢åˆ°æœ€æ–° LTS
$ nvm use --lts

# åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆæœ¬
$ nvm use node

# åˆ‡æ¢åˆ°ç³»ç»Ÿç‰ˆæœ¬
$ nvm use system
```

æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ï¼š

```bash
$ nvm current
v20.10.0

$ node -v
v20.10.0
```

æŸ¥çœ‹å·²å®‰è£…çš„ç‰ˆæœ¬ï¼š

```bash
$ nvm ls

->     v20.10.0
       v18.19.0
         system
default -> 20 (-> v20.10.0)
lts/* -> lts/iron (-> v20.10.0)
```

## è®¾ç½®é»˜è®¤ç‰ˆæœ¬

```bash
$ nvm alias default 20
```

è®¾ç½®åï¼Œæ–°ç»ˆç«¯çª—å£ä¼šè‡ªåŠ¨ä½¿ç”¨è¯¥ç‰ˆæœ¬ã€‚

## ç‰ˆæœ¬åˆ«å

```bash
# åˆ›å»ºåˆ«å
$ nvm alias my-project 20.10.0

# ä½¿ç”¨åˆ«å
$ nvm use my-project

# åˆ é™¤åˆ«å
$ nvm unalias my-project

# æŸ¥çœ‹æ‰€æœ‰åˆ«å
$ nvm alias
```

## é¡¹ç›®çº§ç‰ˆæœ¬é”å®š

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.nvmrc` æ–‡ä»¶ï¼š

```bash
$ echo "20" > .nvmrc
```

ç„¶åä½¿ç”¨ï¼š

```bash
$ nvm use
Found '/path/to/project/.nvmrc' with version <20>
Now using node v20.10.0 (npm v10.2.3)
```

### è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬

nvm é»˜è®¤ä¸æ”¯æŒç›®å½•åˆ‡æ¢æ—¶è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ã€‚

**Zshï¼ˆä½¿ç”¨ zsh-nvm æ’ä»¶æˆ–æ‰‹åŠ¨é…ç½®ï¼‰**

åœ¨ `~/.zshrc` ä¸­æ·»åŠ ï¼š

```bash
autoload -U add-zsh-hook

load-nvmrc() {
  local nvmrc_path
  nvmrc_path="$(nvm_find_nvmrc)"

  if [ -n "$nvmrc_path" ]; then
    local nvmrc_node_version
    nvmrc_node_version=$(nvm version "$(cat "${nvmrc_path}")")

    if [ "$nvmrc_node_version" = "N/A" ]; then
      nvm install
    elif [ "$nvmrc_node_version" != "$(nvm version)" ]; then
      nvm use
    fi
  elif [ -n "$(PWD=$OLDPWD nvm_find_nvmrc)" ] && [ "$(nvm version)" != "$(nvm version default)" ]; then
    echo "Reverting to nvm default version"
    nvm use default
  fi
}

add-zsh-hook chpwd load-nvmrc
load-nvmrc
```

**Bash**

åœ¨ `~/.bashrc` ä¸­æ·»åŠ ï¼š

```bash
cdnvm() {
    command cd "$@" || return $?
    nvm_path="$(nvm_find_up .nvmrc | command tr -d '\n')"

    if [[ ! $nvm_path = *[^[:space:]]* ]]; then
        declare default_version
        default_version="$(nvm version default)"

        if [ $? -eq 0 ]; then
            if [[ $(nvm current) != "${default_version}" ]]; then
                nvm use default
            fi
        fi
    elif [[ -s "${nvm_path}/.nvmrc" && -r "${nvm_path}/.nvmrc" ]]; then
        declare nvm_version
        nvm_version=$(<"${nvm_path}"/.nvmrc)

        declare locally_resolved_nvm_version
        locally_resolved_nvm_version=$(nvm ls --no-colors "${nvm_version}" | command tail -1 | command tr -d '\->*' | command tr -d '[:space:]')

        if [[ "${locally_resolved_nvm_version}" == "N/A" ]]; then
            nvm install "${nvm_version}"
        elif [[ $(nvm current) != "${locally_resolved_nvm_version}" ]]; then
            nvm use "${nvm_version}"
        fi
    fi
}

alias cd='cdnvm'
cdnvm "$PWD" || exit
```

## å…¨å±€åŒ…ç®¡ç†

ğŸ”¶ æ¯ä¸ª Node ç‰ˆæœ¬æœ‰ç‹¬ç«‹çš„å…¨å±€åŒ…ç›®å½•ã€‚åˆ‡æ¢ç‰ˆæœ¬åï¼Œå…¨å±€åŒ…ä¸ä¼šè‡ªåŠ¨è¿ç§»ã€‚

### è¿ç§»å…¨å±€åŒ…

```bash
# åˆ‡æ¢åˆ°æ–°ç‰ˆæœ¬æ—¶ï¼Œä»æŒ‡å®šç‰ˆæœ¬è¿ç§»å…¨å±€åŒ…
$ nvm install 20 --reinstall-packages-from=18

# ä»å½“å‰ç‰ˆæœ¬è¿ç§»
$ nvm install 22 --reinstall-packages-from=current
```

### è®¾ç½®é»˜è®¤å…¨å±€åŒ…

åˆ›å»º `~/.nvm/default-packages` æ–‡ä»¶ï¼Œåˆ—å‡ºéœ€è¦è‡ªåŠ¨å®‰è£…çš„åŒ…ï¼š

```
pnpm
typescript
@antfu/ni
```

ä¹‹åæ¯æ¬¡ `nvm install` éƒ½ä¼šè‡ªåŠ¨å®‰è£…è¿™äº›åŒ…ã€‚

## ç¯å¢ƒå˜é‡

| å˜é‡                    | è¯´æ˜             | é»˜è®¤å€¼                    |
| ----------------------- | ---------------- | ------------------------- |
| `NVM_DIR`               | nvm å®‰è£…ç›®å½•     | `~/.nvm`                  |
| `NVM_NODEJS_ORG_MIRROR` | Node.js ä¸‹è½½é•œåƒ | `https://nodejs.org/dist` |
| `NVM_IOJS_ORG_MIRROR`   | io.js ä¸‹è½½é•œåƒ   | `https://iojs.org/dist`   |

ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿï¼š

```bash
export NVM_NODEJS_ORG_MIRROR=https://npmmirror.com/mirrors/node
```

## å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤                          | ç”¨é€”                   |
| ----------------------------- | ---------------------- |
| `nvm install <version>`       | å®‰è£…æŒ‡å®šç‰ˆæœ¬           |
| `nvm install --lts`           | å®‰è£…æœ€æ–° LTS           |
| `nvm uninstall <version>`     | å¸è½½ç‰ˆæœ¬               |
| `nvm use <version>`           | åˆ‡æ¢ç‰ˆæœ¬               |
| `nvm use`                     | ä½¿ç”¨ .nvmrc æŒ‡å®šçš„ç‰ˆæœ¬ |
| `nvm current`                 | æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬           |
| `nvm ls`                      | åˆ—å‡ºå·²å®‰è£…ç‰ˆæœ¬         |
| `nvm ls-remote`               | åˆ—å‡ºå¯å®‰è£…ç‰ˆæœ¬         |
| `nvm alias <name> <version>`  | åˆ›å»ºåˆ«å               |
| `nvm alias default <version>` | è®¾ç½®é»˜è®¤ç‰ˆæœ¬           |
| `nvm unalias <name>`          | åˆ é™¤åˆ«å               |
| `nvm which <version>`         | æ˜¾ç¤ºç‰ˆæœ¬å®‰è£…è·¯å¾„       |
| `nvm cache clear`             | æ¸…ç†ç¼“å­˜               |

## æ€§èƒ½ä¼˜åŒ–

ğŸ”¶ nvm æ¯æ¬¡æ‰“å¼€ç»ˆç«¯éƒ½éœ€è¦åŠ è½½å¤§é‡ Shell è„šæœ¬ï¼Œå¯èƒ½å¯¼è‡´ç»ˆç«¯å¯åŠ¨å˜æ…¢ã€‚

### å»¶è¿ŸåŠ è½½

åœ¨ `~/.zshrc` ä¸­ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼š

```bash
export NVM_DIR="$HOME/.nvm"

# å»¶è¿ŸåŠ è½½ nvm
nvm() {
  unset -f nvm node npm npx
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
  nvm "$@"
}

node() {
  unset -f nvm node npm npx
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
  node "$@"
}

npm() {
  unset -f nvm node npm npx
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
  npm "$@"
}

npx() {
  unset -f nvm node npm npx
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
  npx "$@"
}
```

è¿™æ ·åªæœ‰åœ¨é¦–æ¬¡ä½¿ç”¨ nvm/node/npm æ—¶æ‰ä¼šåŠ è½½ã€‚

### è·³è¿‡è‡ªåŠ¨ä½¿ç”¨é»˜è®¤ç‰ˆæœ¬

åŠ è½½ nvm æ—¶è·³è¿‡è‡ªåŠ¨ä½¿ç”¨é»˜è®¤ç‰ˆæœ¬ï¼š

```bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" --no-use
```

### æ›´å¥½çš„é€‰æ‹©

ğŸ¤” å¦‚æœå¯¹ç»ˆç«¯å¯åŠ¨é€Ÿåº¦æœ‰è¦æ±‚ï¼Œå»ºè®®è¿ç§»åˆ° fnmã€‚fnm ä½¿ç”¨ Rust ç¼–å†™ï¼Œå¯åŠ¨é€Ÿåº¦å¿« 40 å€ä»¥ä¸Šï¼Œä¸”å‘½ä»¤å…¼å®¹ nvmã€‚

## å¸è½½ nvm

åˆ é™¤å®‰è£…ç›®å½•ï¼š

```bash
$ rm -rf "$NVM_DIR"
```

ä» Shell é…ç½®æ–‡ä»¶ä¸­ç§»é™¤ nvm ç›¸å…³é…ç½®ï¼š

```bash
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
```

## å¸¸è§é—®é¢˜

### nvm: command not found

ç¡®ä¿ Shell é…ç½®æ­£ç¡®ã€‚æ£€æŸ¥ `~/.nvm` ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œä»¥åŠé…ç½®æ˜¯å¦æ·»åŠ åˆ°æ­£ç¡®çš„æ–‡ä»¶ï¼ˆZsh ç”¨ `.zshrc`ï¼ŒBash ç”¨ `.bashrc`ï¼‰ã€‚

### æ–°ç»ˆç«¯çª—å£ Node ç‰ˆæœ¬ä¸¢å¤±

è®¾ç½®é»˜è®¤ç‰ˆæœ¬ï¼š

```bash
$ nvm alias default 20
```

### M1/M2 Mac å®‰è£…è€ç‰ˆæœ¬å¤±è´¥

Apple Silicon åŸç”Ÿæ”¯æŒä» Node 16 å¼€å§‹ã€‚å®‰è£…è€ç‰ˆæœ¬éœ€è¦ä½¿ç”¨ Rosettaï¼š

```bash
$ arch -x86_64 zsh
$ nvm install 14
```

### ä¸‹è½½é€Ÿåº¦æ…¢

é…ç½®å›½å†…é•œåƒï¼š

```bash
$ export NVM_NODEJS_ORG_MIRROR=https://npmmirror.com/mirrors/node
$ nvm install 20
```

## nvm vs fnm

| ç‰¹æ€§       | nvm         | fnm         |
| ---------- | ----------- | ----------- |
| è¯­è¨€       | Bash        | Rust        |
| å¯åŠ¨é€Ÿåº¦   | ~40ms+      | ~1ms        |
| Windows    | âŒ éœ€è¦ WSL | âœ… åŸç”Ÿæ”¯æŒ |
| è‡ªåŠ¨åˆ‡æ¢   | éœ€è¦é…ç½®    | å†…ç½®æ”¯æŒ    |
| ç”Ÿæ€æˆç†Ÿåº¦ | éå¸¸æˆç†Ÿ    | æˆç†Ÿ        |
| å…¼å®¹æ€§     | -           | .nvmrc å…¼å®¹ |

å¦‚æœç»ˆç«¯å¯åŠ¨é€Ÿåº¦ä¸æ˜¯é—®é¢˜ï¼Œnvm æ˜¯ç¨³å®šå¯é çš„é€‰æ‹©ï¼›è¿½æ±‚æ€§èƒ½å’Œè·¨å¹³å°æ”¯æŒï¼Œæ¨è fnmã€‚

## å‚è€ƒèµ„æ–™

- [nvm GitHub](https://github.com/nvm-sh/nvm)
- [nvm-windows](https://github.com/coreybutler/nvm-windows)
- [Node.js å‘å¸ƒè®¡åˆ’](https://nodejs.org/en/about/releases/)
