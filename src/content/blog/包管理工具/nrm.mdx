---
title: nrm å®Œå…¨æŒ‡å—
description: nrm æ˜¯ npm registry æºç®¡ç†å·¥å…·ï¼Œæœ¬æ–‡æ¶µç›–å®‰è£…é…ç½®ã€æºåˆ‡æ¢ã€è‡ªå®šä¹‰æºã€æµ‹é€Ÿå¯¹æ¯”ç­‰å®ç”¨æŠ€å·§
pubDate: 2025-11-09
toc: true
ogImage: true
category: åŒ…ç®¡ç†å·¥å…·
tags: ['nrm', 'npm', 'registry', 'é•œåƒæº', 'Node.js']
---

nrmï¼ˆNPM Registry Managerï¼‰ç”¨äºå¿«é€Ÿåˆ‡æ¢ npm æºã€‚å›½å†…å¼€å‘è€…ç»å¸¸éœ€è¦åœ¨ npm å®˜æ–¹æºå’Œå›½å†…é•œåƒä¹‹é—´åˆ‡æ¢ï¼Œæ‰‹åŠ¨ä¿®æ”¹é…ç½®ç¹çä¸”æ˜“å‡ºé”™ï¼Œnrm æä¾›äº†ç®€æ´çš„å‘½ä»¤è¡Œæ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

ğŸ¯ **ç¯å¢ƒè¯´æ˜**ï¼šæœ¬æ–‡åŸºäº nrm v1.2.6 ç¼–å†™ï¼Œé€‚ç”¨äº npmã€yarnã€pnpmã€‚

## ä¸ºä»€ä¹ˆéœ€è¦ nrm

npm é»˜è®¤ä» `https://registry.npmjs.org` ä¸‹è½½åŒ…ï¼Œç”±äºç½‘ç»œåŸå› ï¼Œå›½å†…è®¿é—®é€Ÿåº¦è¾ƒæ…¢ã€‚å¸¸è§åšæ³•æ˜¯åˆ‡æ¢åˆ°æ·˜å®é•œåƒï¼ˆnpmmirrorï¼‰æˆ–å…¶ä»–å›½å†…æºã€‚

æ‰‹åŠ¨åˆ‡æ¢æºéœ€è¦è®°ä½å®Œæ•´çš„ URL å¹¶æ‰§è¡Œé…ç½®å‘½ä»¤ï¼š

```bash
$ npm config set registry https://registry.npmmirror.com
```

ä½¿ç”¨ nrm åªéœ€ï¼š

```bash
$ nrm use taobao
```

## å®‰è£…

```bash
$ npm install -g nrm
```

éªŒè¯å®‰è£…ï¼š

```bash
$ nrm -V
1.2.6
```

## æŸ¥çœ‹å¯ç”¨æº

```bash
$ nrm ls

  npm ---------- https://registry.npmjs.org/
  yarn --------- https://registry.yarnpkg.com/
  tencent ------ https://mirrors.cloud.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
  taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/
* huawei ------- https://repo.huaweicloud.com/repository/npm/
```

`*` æ ‡è®°è¡¨ç¤ºå½“å‰ä½¿ç”¨çš„æºã€‚

## åˆ‡æ¢æº

```bash
# åˆ‡æ¢åˆ°æ·˜å®é•œåƒ
$ nrm use taobao
   Registry has been set to: https://registry.npmmirror.com/

# åˆ‡æ¢å› npm å®˜æ–¹æº
$ nrm use npm
   Registry has been set to: https://registry.npmjs.org/

# åˆ‡æ¢åˆ°è…¾è®¯æº
$ nrm use tencent
   Registry has been set to: https://mirrors.cloud.tencent.com/npm/
```

åˆ‡æ¢æ“ä½œä¼šä¿®æ”¹ `~/.npmrc` ä¸­çš„ `registry` é…ç½®ï¼Œå¯¹ npmã€yarnï¼ˆClassicï¼‰ã€pnpm å‡ç”Ÿæ•ˆã€‚

## æµ‹è¯•æºé€Ÿåº¦

```bash
# æµ‹è¯•æ‰€æœ‰æºçš„å“åº”é€Ÿåº¦
$ nrm test

  npm ---------- 873 ms
  yarn --------- 987 ms
  tencent ------ 134 ms
  cnpm --------- 236 ms
  taobao ------- 68 ms
  npmMirror ---- 1234 ms
  huawei ------- 89 ms

# æµ‹è¯•æŒ‡å®šæº
$ nrm test taobao
  taobao ------- 68 ms
```

æ ¹æ®æµ‹é€Ÿç»“æœé€‰æ‹©æœ€å¿«çš„æºã€‚é€šå¸¸å›½å†…æ¨èä½¿ç”¨ `taobao`ï¼ˆnpmmirrorï¼‰æˆ– `huawei`ã€‚

## æ·»åŠ è‡ªå®šä¹‰æº

ä¼ä¸šå†…éƒ¨ç§æœ‰ npm ä»“åº“å¯ä»¥æ·»åŠ ä¸ºè‡ªå®šä¹‰æºï¼š

```bash
$ nrm add <åç§°> <åœ°å€>

# ç¤ºä¾‹ï¼šæ·»åŠ å…¬å¸ç§æœ‰æº
$ nrm add company https://npm.company.com/

# éªŒè¯æ·»åŠ æˆåŠŸ
$ nrm ls
  npm ---------- https://registry.npmjs.org/
  ...
  company ------ https://npm.company.com/
```

å¸¦è®¤è¯çš„ç§æœ‰æºï¼š

```bash
$ nrm add company https://npm.company.com/ --home https://npm.company.com
```

æ·»åŠ ååˆ‡æ¢ä½¿ç”¨ï¼š

```bash
$ nrm use company
```

## åˆ é™¤æº

```bash
$ nrm del <åç§°>

# åˆ é™¤è‡ªå®šä¹‰æº
$ nrm del company
```

å†…ç½®æºæ— æ³•åˆ é™¤ã€‚

## æŸ¥çœ‹å½“å‰æº

```bash
$ nrm current

# è¾“å‡º
taobao
```

æˆ–å¸¦å®Œæ•´ URLï¼š

```bash
$ nrm current -u

# è¾“å‡º
https://registry.npmmirror.com/
```

## æ‰“å¼€æºä¸»é¡µ

```bash
$ nrm home taobao
```

ä¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¯¹åº”æºçš„ä¸»é¡µã€‚

## å¸¸ç”¨å›½å†…é•œåƒ

| åç§°                | åœ°å€                                         | è¯´æ˜                   |
| ------------------- | -------------------------------------------- | ---------------------- |
| npmmirrorï¼ˆåŸæ·˜å®ï¼‰ | https://registry.npmmirror.com               | åŒæ­¥é¢‘ç‡ 10 åˆ†é’Ÿï¼Œæ¨è |
| è…¾è®¯äº‘              | https://mirrors.cloud.tencent.com/npm/       | è…¾è®¯äº‘åŠ é€Ÿ             |
| åä¸ºäº‘              | https://repo.huaweicloud.com/repository/npm/ | åä¸ºäº‘åŠ é€Ÿ             |
| cnpm                | https://r.cnpmjs.org                         | é˜¿é‡Œå·´å·´               |

ğŸ”¶ **æ³¨æ„**ï¼šæ·˜å®æºåŸŸåå·²ä» `registry.npm.taobao.org` è¿ç§»åˆ° `registry.npmmirror.com`ï¼Œè€åŸŸåä»å¯ç”¨ä½†å»ºè®®æ›´æ–°ã€‚

## é…åˆ yarn/pnpm ä½¿ç”¨

nrm ä¿®æ”¹çš„æ˜¯ `~/.npmrc`ï¼Œyarnï¼ˆClassicï¼‰å’Œ pnpm é»˜è®¤ä¹Ÿä¼šè¯»å–è¿™ä¸ªé…ç½®ã€‚

è‹¥ yarn æˆ– pnpm æœ‰ç‹¬ç«‹é…ç½®æ–‡ä»¶è¦†ç›–äº† registryï¼Œéœ€å•ç‹¬å¤„ç†ï¼š

**Yarn Classic**

```bash
$ yarn config set registry https://registry.npmmirror.com
```

**Yarn Berry**

åœ¨ `.yarnrc.yml` ä¸­ï¼š

```yaml
npmRegistryServer: 'https://registry.npmmirror.com'
```

**pnpm**

åœ¨ `.npmrc`ï¼ˆé¡¹ç›®çº§æˆ–ç”¨æˆ·çº§ï¼‰ä¸­ï¼š

```ini
registry=https://registry.npmmirror.com
```

## é¡¹ç›®çº§æºé…ç½®

ğŸ¤” è‹¥ä¸æƒ³å…¨å±€åˆ‡æ¢æºï¼Œå¯åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.npmrc`ï¼š

```ini
registry=https://registry.npmmirror.com
```

é¡¹ç›®çº§é…ç½®ä¼˜å…ˆçº§é«˜äºç”¨æˆ·çº§ï¼Œä¾¿äºå›¢é˜Ÿç»Ÿä¸€æºé…ç½®ã€‚

è¿™ç§æ–¹å¼é€‚ç”¨äºï¼š

- å›¢é˜Ÿåä½œéœ€è¦ç»Ÿä¸€æº
- é¡¹ç›®ä¾èµ–ç§æœ‰åŒ…
- é¿å…å¼€å‘è€…æ‰‹åŠ¨åˆ‡æ¢æº

## nrm æ›¿ä»£æ–¹æ¡ˆ

### æ‰‹åŠ¨é…ç½®

ä¸ä½¿ç”¨ nrmï¼Œç›´æ¥ä¿®æ”¹ `~/.npmrc`ï¼š

```ini
registry=https://registry.npmmirror.com
```

æˆ–å‘½ä»¤è¡Œè®¾ç½®ï¼š

```bash
$ npm config set registry https://registry.npmmirror.com
```

### ä¸´æ—¶ä½¿ç”¨å…¶ä»–æº

å®‰è£…æ—¶æŒ‡å®šæºï¼Œä¸ä¿®æ”¹å…¨å±€é…ç½®ï¼š

```bash
$ npm install lodash --registry=https://registry.npmmirror.com
$ pnpm add lodash --registry=https://registry.npmmirror.com
```

### cgrï¼ˆåˆ‡æ¢æºå·¥å…·ï¼‰

ç±»ä¼¼ nrm çš„å¦ä¸€ä¸ªå·¥å…·ï¼š

```bash
$ npm install -g cgr
$ cgr use taobao
```

åŠŸèƒ½ä¸ nrm ç›¸ä¼¼ï¼ŒäºŒé€‰ä¸€å³å¯ã€‚

## å¸¸è§é—®é¢˜

### åˆ‡æ¢æºåä»ç„¶æ…¢

å¯èƒ½åŸå› ï¼š

1. **ç¼“å­˜é—®é¢˜**ï¼šæ¸…ç†ç¼“å­˜åé‡è¯•

```bash
$ npm cache clean --force
$ pnpm store prune
```

2. **é”æ–‡ä»¶ä¸­çš„ resolved åœ°å€**ï¼šé”æ–‡ä»¶ä¸­è®°å½•äº†åŒ…çš„ä¸‹è½½åœ°å€ï¼Œåˆ‡æ¢æºåå¯èƒ½ä»ä»è€åœ°å€ä¸‹è½½

```bash
$ rm -rf node_modules package-lock.json
$ npm install
```

### ç§æœ‰åŒ…å’Œå…¬å…±åŒ…æ··ç”¨

éƒ¨åˆ†åŒ…åœ¨ç§æœ‰æºï¼Œéƒ¨åˆ†åœ¨ npm å®˜æ–¹æºã€‚å¯åœ¨ `.npmrc` ä¸­é…ç½® scope æ˜ å°„ï¼š

```ini
registry=https://registry.npmmirror.com
@company:registry=https://npm.company.com/
```

`@company` å¼€å¤´çš„åŒ…ä»ç§æœ‰æºä¸‹è½½ï¼Œå…¶ä»–åŒ…ä» npmmirror ä¸‹è½½ã€‚

### nrm ls ä¸æ˜¾ç¤ºæ˜Ÿå·

æŸäº›ç»ˆç«¯æˆ– nrm ç‰ˆæœ¬å¯èƒ½æœ‰æ˜¾ç¤ºé—®é¢˜ï¼Œä½¿ç”¨ `nrm current` ç¡®è®¤å½“å‰æºã€‚

## å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤                   | ç”¨é€”           |
| ---------------------- | -------------- |
| `nrm ls`               | åˆ—å‡ºæ‰€æœ‰å¯ç”¨æº |
| `nrm current`          | æ˜¾ç¤ºå½“å‰æº     |
| `nrm use <name>`       | åˆ‡æ¢æº         |
| `nrm test`             | æµ‹è¯•æ‰€æœ‰æºé€Ÿåº¦ |
| `nrm test <name>`      | æµ‹è¯•æŒ‡å®šæºé€Ÿåº¦ |
| `nrm add <name> <url>` | æ·»åŠ è‡ªå®šä¹‰æº   |
| `nrm del <name>`       | åˆ é™¤æº         |
| `nrm home <name>`      | æ‰“å¼€æºä¸»é¡µ     |

## å‚è€ƒèµ„æ–™

- [nrm GitHub](https://github.com/Pana/nrm)
- [npmmirror ä¸­å›½é•œåƒç«™](https://npmmirror.com/)
- [npm é…ç½®æ–‡æ¡£](https://docs.npmjs.com/cli/v10/configuring-npm/npmrc)
