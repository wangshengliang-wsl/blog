---
title: 'å¯¹è±¡ç±»å‹'
description: 'TypeScript å¯¹è±¡ç±»å‹è¯¦è§£ï¼šå¯¹è±¡ç±»å‹æ³¨è§£ã€å¯é€‰å±æ€§ã€åªè¯»å±æ€§ã€ç´¢å¼•ç­¾åçš„ä½¿ç”¨æ–¹æ³•'
pubDate: 2024-01-18
toc: true
ogImage: true
category: 'TypeScript'
tags: ['TypeScript', 'å¯¹è±¡ç±»å‹', 'å¯é€‰å±æ€§', 'åªè¯»å±æ€§', 'ç´¢å¼•ç­¾å']
---

å¯¹è±¡æ˜¯ JavaScript ä¸­æœ€é‡è¦çš„æ•°æ®ç»“æ„ã€‚TypeScript æä¾›äº†å¤šç§æ–¹å¼æ¥æè¿°å¯¹è±¡çš„ç±»å‹ï¼Œç¡®ä¿å¯¹è±¡å±æ€§çš„ç±»å‹å®‰å…¨ã€‚

## å¯¹è±¡ç±»å‹åŸºç¡€

### å†…è”ç±»å‹æ³¨è§£

æœ€ç›´æ¥çš„æ–¹å¼æ˜¯åœ¨å˜é‡å£°æ˜æ—¶å†…è”å®šä¹‰å¯¹è±¡ç±»å‹ï¼š

```typescript
// TypeScript 5.x

// å†…è”å¯¹è±¡ç±»å‹
const user: { name: string; age: number } = {
  name: 'å¼ ä¸‰',
  age: 25,
}

// å‡½æ•°å‚æ•°ä½¿ç”¨å¯¹è±¡ç±»å‹
function printUser(user: { name: string; age: number }) {
  console.log(`${user.name}, ${user.age}å²`)
}

// å‡½æ•°è¿”å›å¯¹è±¡ç±»å‹
function createUser(): { id: number; name: string } {
  return { id: 1, name: 'æ–°ç”¨æˆ·' }
}
```

### ç±»å‹æ¨æ–­

TypeScript ä¼šè‡ªåŠ¨æ¨æ–­å¯¹è±¡å­—é¢é‡çš„ç±»å‹ï¼š

```typescript
// è‡ªåŠ¨æ¨æ–­ä¸º { name: string; age: number; active: boolean }
const person = {
  name: 'å¼ ä¸‰',
  age: 25,
  active: true,
}

// æ¨æ–­çš„ç±»å‹å¯ä»¥ç”¨äºåç»­æ“ä½œ
person.name = 'æå››' // âœ… æ­£ç¡®
// person.email = 'test@test.com';  // âŒ å±æ€§ä¸å­˜åœ¨
```

## å¯é€‰å±æ€§

ä½¿ç”¨ `?` æ ‡è®°å¯é€‰å±æ€§ï¼š

```typescript
// email å’Œ phone æ˜¯å¯é€‰çš„
const user: {
  name: string
  age: number
  email?: string
  phone?: string
} = {
  name: 'å¼ ä¸‰',
  age: 25,
  // email å’Œ phone å¯ä»¥ä¸æä¾›
}

// å¯é€‰å±æ€§çš„ç±»å‹æ˜¯ T | undefined
function greet(user: { name: string; title?: string }) {
  if (user.title) {
    console.log(`${user.title} ${user.name}`)
  } else {
    console.log(user.name)
  }
}

greet({ name: 'å¼ ä¸‰' }) // å¼ ä¸‰
greet({ name: 'å¼ ä¸‰', title: 'åšå£«' }) // åšå£« å¼ ä¸‰
```

ğŸ”¶ å¯é€‰å±æ€§çš„ç±»å‹å®é™…ä¸Šæ˜¯ `T | undefined`ï¼Œè®¿é—®å‰éœ€è¦æ£€æŸ¥ï¼š

```typescript
function getEmailLength(user: { email?: string }): number {
  // return user.email.length;  // âŒ é”™è¯¯ï¼šemail å¯èƒ½æ˜¯ undefined

  // æ–¹å¼1ï¼šæ¡ä»¶æ£€æŸ¥
  if (user.email) {
    return user.email.length
  }
  return 0

  // æ–¹å¼2ï¼šå¯é€‰é“¾
  return user.email?.length ?? 0

  // æ–¹å¼3ï¼šéç©ºæ–­è¨€ï¼ˆç¡®å®šä¸ä¸ºç©ºæ—¶ï¼‰
  return user.email!.length // è°¨æ…ä½¿ç”¨
}
```

## åªè¯»å±æ€§

ä½¿ç”¨ `readonly` æ ‡è®°åªè¯»å±æ€§ï¼š

```typescript
const config: {
  readonly apiUrl: string
  readonly timeout: number
  retries: number // å¯ä¿®æ”¹
} = {
  apiUrl: 'https://api.example.com',
  timeout: 5000,
  retries: 3,
}

// config.apiUrl = 'xxx';  // âŒ é”™è¯¯ï¼šåªè¯»å±æ€§
config.retries = 5 // âœ… æ­£ç¡®
```

ğŸ¤” `readonly` æ˜¯æµ…å±‚çš„ï¼š

```typescript
const user: {
  readonly info: { name: string; age: number }
} = {
  info: { name: 'å¼ ä¸‰', age: 25 },
}

// user.info = { name: 'æå››', age: 30 };  // âŒ ä¸èƒ½é‡æ–°èµ‹å€¼
user.info.name = 'æå››' // âœ… å¯ä»¥ä¿®æ”¹åµŒå¥—å±æ€§ï¼
```

## ç´¢å¼•ç­¾å

å½“å¯¹è±¡æœ‰åŠ¨æ€çš„å±æ€§åæ—¶ï¼Œä½¿ç”¨ç´¢å¼•ç­¾åï¼š

```typescript
// å­—ç¬¦ä¸²ç´¢å¼•ç­¾å
const scores: { [key: string]: number } = {
  math: 90,
  english: 85,
  physics: 88,
}

scores['chemistry'] = 92 // âœ… å¯ä»¥æ·»åŠ æ–°å±æ€§
console.log(scores['math']) // 90

// æ•°å­—ç´¢å¼•ç­¾åï¼ˆç±»ä¼¼æ•°ç»„ï¼‰
const items: { [index: number]: string } = {
  0: 'first',
  1: 'second',
  2: 'third',
}
```

### ç´¢å¼•ç­¾åä¸å›ºå®šå±æ€§

```typescript
// ç´¢å¼•ç­¾åå¯ä»¥å’Œå›ºå®šå±æ€§æ··ç”¨
interface Dictionary {
  length: number // å›ºå®šå±æ€§
  [key: string]: number // ç´¢å¼•ç­¾å
}

const dict: Dictionary = {
  length: 3,
  a: 1,
  b: 2,
  c: 3,
}

// ğŸ”¶ æ³¨æ„ï¼šå›ºå®šå±æ€§çš„ç±»å‹å¿…é¡»å…¼å®¹ç´¢å¼•ç­¾åçš„ç±»å‹
interface InvalidDict {
  name: string // âŒ é”™è¯¯ï¼šstring ä¸èƒ½èµ‹ç»™ number
  [key: string]: number
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨è”åˆç±»å‹
interface ValidDict {
  name: string
  [key: string]: string | number
}
```

### Record å·¥å…·ç±»å‹

`Record<K, V>` æ˜¯æ›´ç®€æ´çš„ç´¢å¼•ç­¾åè¯­æ³•ï¼š

```typescript
// ç­‰ä»·äº { [key: string]: number }
const scores: Record<string, number> = {
  math: 90,
  english: 85,
}

// é™å®šé”®çš„ç±»å‹
type Subject = 'math' | 'english' | 'physics'
const grades: Record<Subject, number> = {
  math: 90,
  english: 85,
  physics: 88,
}
```

## åµŒå¥—å¯¹è±¡

```typescript
// åµŒå¥—å¯¹è±¡ç±»å‹
const company: {
  name: string
  address: {
    city: string
    street: string
    zipCode: string
  }
  employees: {
    name: string
    role: string
  }[]
} = {
  name: 'Acme Inc',
  address: {
    city: 'åŒ—äº¬',
    street: 'ä¸­å…³æ‘å¤§è¡—1å·',
    zipCode: '100000',
  },
  employees: [
    { name: 'å¼ ä¸‰', role: 'å·¥ç¨‹å¸ˆ' },
    { name: 'æå››', role: 'è®¾è®¡å¸ˆ' },
  ],
}
```

ğŸ¯ å¯¹äºå¤æ‚çš„åµŒå¥—ç»“æ„ï¼Œå»ºè®®æ‹†åˆ†æˆå¤šä¸ªç±»å‹ï¼š

```typescript
// æ‹†åˆ†ç±»å‹å®šä¹‰ï¼ˆæ›´æ¸…æ™°ï¼‰
type Address = {
  city: string
  street: string
  zipCode: string
}

type Employee = {
  name: string
  role: string
}

type Company = {
  name: string
  address: Address
  employees: Employee[]
}

const company: Company = {
  name: 'Acme Inc',
  address: {
    city: 'åŒ—äº¬',
    street: 'ä¸­å…³æ‘å¤§è¡—1å·',
    zipCode: '100000',
  },
  employees: [
    { name: 'å¼ ä¸‰', role: 'å·¥ç¨‹å¸ˆ' },
    { name: 'æå››', role: 'è®¾è®¡å¸ˆ' },
  ],
}
```

## å¯¹è±¡ç±»å‹çš„ç»“æ„åŒ–ç±»å‹

TypeScript ä½¿ç”¨ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿï¼ˆé¸­å­ç±»å‹ï¼‰ï¼šåªè¦ç»“æ„åŒ¹é…ï¼Œç±»å‹å°±å…¼å®¹ã€‚

```typescript
type Point = {
  x: number
  y: number
}

// å¯¹è±¡å¯ä»¥æœ‰é¢å¤–å±æ€§
const point3D = { x: 1, y: 2, z: 3 }

function printPoint(p: Point) {
  console.log(`(${p.x}, ${p.y})`)
}

// âœ… æ­£ç¡®ï¼špoint3D æœ‰ x å’Œ y å±æ€§
printPoint(point3D)
```

ğŸ”¶ ä½†å¯¹è±¡å­—é¢é‡ä¼šæœ‰é¢å¤–å±æ€§æ£€æŸ¥ï¼š

```typescript
type Point = { x: number; y: number }

// âŒ å¯¹è±¡å­—é¢é‡ç›´æ¥èµ‹å€¼æ—¶ä¼šæ£€æŸ¥é¢å¤–å±æ€§
const p: Point = { x: 1, y: 2, z: 3 } // é”™è¯¯ï¼šz ä¸åœ¨ç±»å‹ä¸­

// âœ… é€šè¿‡å˜é‡èµ‹å€¼å¯ä»¥ç»•è¿‡æ£€æŸ¥
const temp = { x: 1, y: 2, z: 3 }
const p2: Point = temp // æ­£ç¡®

// âœ… æˆ–ä½¿ç”¨ç±»å‹æ–­è¨€
const p3 = { x: 1, y: 2, z: 3 } as Point
```

## ç©ºå¯¹è±¡ç±»å‹

```typescript
// ç©ºå¯¹è±¡ç±»å‹ {} è¡¨ç¤º"é null å’Œ undefined çš„ä»»æ„å€¼"
let obj: {} = { name: 'å¼ ä¸‰' }
obj = 'hello' // âœ… å­—ç¬¦ä¸²ä¹Ÿè¡Œ
obj = 123 // âœ… æ•°å­—ä¹Ÿè¡Œ
obj = [] // âœ… æ•°ç»„ä¹Ÿè¡Œ
// obj = null;     // âŒ é”™è¯¯
// obj = undefined; // âŒ é”™è¯¯

// çœŸæ­£çš„ç©ºå¯¹è±¡åº”è¯¥ç”¨å…¶ä»–æ–¹å¼è¡¨ç¤º
type EmptyObject = Record<string, never>
// æˆ–
type EmptyObject2 = { [key: string]: never }
```

## object ç±»å‹

`object` ç±»å‹è¡¨ç¤ºéåŸå§‹ç±»å‹çš„å€¼ï¼š

```typescript
// objectï¼šéåŸå§‹ç±»å‹ï¼ˆä¸æ˜¯ stringã€numberã€boolean ç­‰ï¼‰
let obj: object

obj = { name: 'å¼ ä¸‰' } // âœ…
obj = [1, 2, 3] // âœ…
obj = () => {} // âœ…

// obj = 'hello';  // âŒ åŸå§‹ç±»å‹
// obj = 123;      // âŒ åŸå§‹ç±»å‹
// obj = true;     // âŒ åŸå§‹ç±»å‹

// ğŸ”¶ object ç±»å‹æ— æ³•è®¿é—®å…·ä½“å±æ€§
const o: object = { name: 'å¼ ä¸‰' }
// console.log(o.name);  // âŒ é”™è¯¯
```

ğŸ¤” `object` vs `Object` vs `{}`ï¼š

| ç±»å‹     | å«ä¹‰                       | å¯æ¥å—çš„å€¼               |
| -------- | -------------------------- | ------------------------ |
| `object` | éåŸå§‹ç±»å‹                 | å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°         |
| `Object` | æ‰€æœ‰æœ‰ Object æ–¹æ³•çš„å€¼     | å‡ ä¹æ‰€æœ‰å€¼ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ |
| `{}`     | é null/undefined çš„ä»»æ„å€¼ | å‡ ä¹æ‰€æœ‰å€¼               |

## å®é™…åº”ç”¨

### API å“åº”ç±»å‹

```typescript
// API å“åº”çš„é€šç”¨ç»“æ„
type ApiResponse<T> = {
  code: number
  message: string
  data: T
  timestamp: number
}

// ç”¨æˆ·æ•°æ®
type User = {
  id: number
  name: string
  email: string
  createdAt: string
}

// ä½¿ç”¨
const response: ApiResponse<User> = {
  code: 200,
  message: 'success',
  data: {
    id: 1,
    name: 'å¼ ä¸‰',
    email: 'zhangsan@example.com',
    createdAt: '2024-01-01',
  },
  timestamp: Date.now(),
}
```

### é…ç½®å¯¹è±¡

```typescript
type DatabaseConfig = {
  readonly host: string
  readonly port: number
  readonly database: string
  username?: string
  password?: string
  options?: {
    ssl?: boolean
    timeout?: number
  }
}

const dbConfig: DatabaseConfig = {
  host: 'localhost',
  port: 5432,
  database: 'myapp',
  options: {
    ssl: true,
  },
}
```

### è¡¨å•æ•°æ®

```typescript
type FormData = {
  [field: string]: string | number | boolean | undefined
  name: string
  email: string
  age?: number
  newsletter?: boolean
}

function validateForm(data: FormData): boolean {
  return data.name.length > 0 && data.email.includes('@')
}
```

## å¸¸è§é—®é¢˜

### ğŸ™‹ ä»€ä¹ˆæ—¶å€™ç”¨ typeï¼Œä»€ä¹ˆæ—¶å€™ç”¨ interfaceï¼Ÿ

ä¸¤è€…åœ¨å®šä¹‰å¯¹è±¡ç±»å‹æ—¶åŸºæœ¬ç­‰ä»·ã€‚ä¸€èˆ¬å»ºè®®ï¼š

- å®šä¹‰å¯¹è±¡ç»“æ„ï¼šç”¨ `interface`ï¼ˆå¯æ‰©å±•ï¼‰
- å®šä¹‰è”åˆç±»å‹ã€å…ƒç»„ç­‰ï¼šç”¨ `type`
- é¡¹ç›®ç»Ÿä¸€é£æ ¼æœ€é‡è¦

```typescript
// ä¸¤è€…æ•ˆæœç›¸åŒ
interface User1 {
  name: string
  age: number
}

type User2 = {
  name: string
  age: number
}
```

### ğŸ™‹ å¦‚ä½•è®©æ‰€æœ‰å±æ€§å˜æˆå¯é€‰ï¼Ÿ

ä½¿ç”¨ `Partial<T>` å·¥å…·ç±»å‹ï¼š

```typescript
type User = {
  name: string
  age: number
  email: string
}

type PartialUser = Partial<User>
// ç­‰ä»·äº { name?: string; age?: number; email?: string }

const update: PartialUser = { name: 'æ–°åå­—' }
```

### ğŸ™‹ å¦‚ä½•è®©æ‰€æœ‰å±æ€§å˜æˆåªè¯»ï¼Ÿ

ä½¿ç”¨ `Readonly<T>` å·¥å…·ç±»å‹ï¼š

```typescript
type User = {
  name: string
  age: number
}

type ReadonlyUser = Readonly<User>
// ç­‰ä»·äº { readonly name: string; readonly age: number }

const user: ReadonlyUser = { name: 'å¼ ä¸‰', age: 25 }
// user.name = 'æå››';  // âŒ é”™è¯¯
```

## æ€»ç»“

| ç‰¹æ€§     | è¯­æ³•                      | ç”¨é€”           |
| -------- | ------------------------- | -------------- |
| å¯¹è±¡ç±»å‹ | `{ prop: type }`          | æè¿°å¯¹è±¡ç»“æ„   |
| å¯é€‰å±æ€§ | `prop?: type`             | å±æ€§å¯ä»¥ä¸å­˜åœ¨ |
| åªè¯»å±æ€§ | `readonly prop: type`     | å±æ€§ä¸å¯ä¿®æ”¹   |
| ç´¢å¼•ç­¾å | `{ [key: string]: type }` | åŠ¨æ€å±æ€§å     |
| Record   | `Record<K, V>`            | ç®€æ´çš„ç´¢å¼•ç±»å‹ |

ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†å­¦ä¹ å‡½æ•°ç±»å‹ï¼Œäº†è§£å¦‚ä½•ä¸ºå‡½æ•°æ·»åŠ å®Œæ•´çš„ç±»å‹æ³¨è§£ã€‚
