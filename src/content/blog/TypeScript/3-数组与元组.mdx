---
title: 'æ•°ç»„ä¸å…ƒç»„'
description: 'TypeScript æ•°ç»„ç±»å‹è¯¦è§£ï¼šæ•°ç»„å®šä¹‰ã€æ³›å‹æ•°ç»„ã€å…ƒç»„ç±»å‹ã€åªè¯»æ•°ç»„çš„ä½¿ç”¨æ–¹æ³•ä¸æœ€ä½³å®è·µ'
pubDate: 2024-01-17
toc: true
ogImage: true
category: 'TypeScript'
tags: ['TypeScript', 'æ•°ç»„', 'å…ƒç»„', 'Array', 'Tuple']
---

æ•°ç»„æ˜¯ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚TypeScript ä¸ºæ•°ç»„æä¾›äº†ä¸°å¯Œçš„ç±»å‹æ”¯æŒï¼Œç¡®ä¿æ•°ç»„å…ƒç´ çš„ç±»å‹ä¸€è‡´æ€§ã€‚å…ƒç»„åˆ™æ˜¯ TypeScript ç‰¹æœ‰çš„ç±»å‹ï¼Œç”¨äºè¡¨ç¤ºå›ºå®šé•¿åº¦å’Œç±»å‹çš„æ•°ç»„ã€‚

## æ•°ç»„ç±»å‹

### åŸºæœ¬è¯­æ³•

TypeScript ä¸­å®šä¹‰æ•°ç»„æœ‰ä¸¤ç§ç­‰ä»·çš„è¯­æ³•ï¼š

```typescript
// TypeScript 5.x

// è¯­æ³•ä¸€ï¼šç±»å‹[]ï¼ˆæ¨èï¼‰
const numbers: number[] = [1, 2, 3, 4, 5]
const names: string[] = ['å¼ ä¸‰', 'æå››', 'ç‹äº”']
const flags: boolean[] = [true, false, true]

// è¯­æ³•äºŒï¼šArray<ç±»å‹>ï¼ˆæ³›å‹è¯­æ³•ï¼‰
const scores: Array<number> = [95, 88, 92]
const users: Array<string> = ['user1', 'user2']
```

ğŸ¤” ä¸¤ç§è¯­æ³•æ•ˆæœå®Œå…¨ç›¸åŒï¼Œ`type[]` æ›´ç®€æ´ï¼Œ`Array<type>` åœ¨å¤æ‚ç±»å‹æ—¶å¯è¯»æ€§æ›´å¥½ã€‚

### ç±»å‹æ¨æ–­

åˆå§‹åŒ–æ—¶ TypeScript ä¼šè‡ªåŠ¨æ¨æ–­æ•°ç»„ç±»å‹ï¼š

```typescript
// è‡ªåŠ¨æ¨æ–­ä¸º number[]
const nums = [1, 2, 3]

// è‡ªåŠ¨æ¨æ–­ä¸º string[]
const strs = ['a', 'b', 'c']

// è‡ªåŠ¨æ¨æ–­ä¸º (string | number)[]
const mixed = [1, 'hello', 2, 'world']
```

### ç©ºæ•°ç»„éœ€è¦æ˜¾å¼æ ‡æ³¨

```typescript
// âŒ æ¨æ–­ä¸º never[]ï¼Œæ— æ³•æ·»åŠ å…ƒç´ 
const items = []
// items.push('hello'); // é”™è¯¯

// âœ… æ˜¾å¼æ ‡æ³¨ç±»å‹
const items2: string[] = []
items2.push('hello') // æ­£ç¡®

// âœ… æˆ–è€…åˆå§‹åŒ–æ—¶æä¾›å…ƒç´ 
const items3 = ['initial']
items3.push('hello') // æ­£ç¡®
```

## å¤šç»´æ•°ç»„

```typescript
// äºŒç»´æ•°ç»„
const matrix: number[][] = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9],
]

// ä¸‰ç»´æ•°ç»„
const cube: number[][][] = [
  [
    [1, 2],
    [3, 4],
  ],
  [
    [5, 6],
    [7, 8],
  ],
]

// ä½¿ç”¨æ³›å‹è¯­æ³•
const grid: Array<Array<number>> = [
  [1, 2],
  [3, 4],
]
```

## è”åˆç±»å‹æ•°ç»„

æ•°ç»„å…ƒç´ å¯ä»¥æ˜¯å¤šç§ç±»å‹ï¼š

```typescript
// æ•°å­—æˆ–å­—ç¬¦ä¸²æ•°ç»„
const ids: (number | string)[] = [1, '2', 3, 'four']

// æ³¨æ„æ‹¬å·ä½ç½®
// (number | string)[] - æ•°ç»„ï¼Œå…ƒç´ æ˜¯ number æˆ– string
// number | string[]   - number æˆ– stringæ•°ç»„ï¼ˆè¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ï¼‰

// åŒ…å« null çš„æ•°ç»„
const nullableItems: (string | null)[] = ['hello', null, 'world']

// å¯¹è±¡æ•°ç»„
interface User {
  id: number
  name: string
}
const users: User[] = [
  { id: 1, name: 'å¼ ä¸‰' },
  { id: 2, name: 'æå››' },
]
```

## åªè¯»æ•°ç»„

### readonly ä¿®é¥°ç¬¦

```typescript
// åªè¯»æ•°ç»„ï¼Œä¸èƒ½ä¿®æ”¹
const readonlyNums: readonly number[] = [1, 2, 3]

// âŒ ä»¥ä¸‹æ“ä½œéƒ½ä¼šæŠ¥é”™
// readonlyNums.push(4);
// readonlyNums.pop();
// readonlyNums[0] = 10;

// âœ… å¯ä»¥è¯»å–
console.log(readonlyNums[0]) // 1
console.log(readonlyNums.length) // 3
```

### ReadonlyArray æ³›å‹

```typescript
const readonlyItems: ReadonlyArray<string> = ['a', 'b', 'c']

// ç­‰ä»·äº
const readonlyItems2: readonly string[] = ['a', 'b', 'c']
```

ğŸ¯ åªè¯»æ•°ç»„çš„ä½¿ç”¨åœºæ™¯ï¼š

```typescript
// åœºæ™¯1ï¼šå‡½æ•°å‚æ•°ï¼Œé˜²æ­¢æ„å¤–ä¿®æ”¹
function processItems(items: readonly string[]) {
  // items.push('new'); // âŒ é”™è¯¯
  return items.map((item) => item.toUpperCase()) // âœ… è¿”å›æ–°æ•°ç»„
}

// åœºæ™¯2ï¼šé…ç½®å¸¸é‡
const ALLOWED_METHODS: readonly string[] = ['GET', 'POST', 'PUT', 'DELETE']

// åœºæ™¯3ï¼šä¸å¯å˜æ•°æ®æ¨¡å¼
function addItem(items: readonly number[], newItem: number): readonly number[] {
  return [...items, newItem] // è¿”å›æ–°æ•°ç»„
}
```

## å…ƒç»„ï¼ˆTupleï¼‰

å…ƒç»„æ˜¯å›ºå®šé•¿åº¦å’Œç±»å‹çš„æ•°ç»„ï¼Œæ¯ä¸ªä½ç½®çš„ç±»å‹å¯ä»¥ä¸åŒã€‚

### åŸºæœ¬ç”¨æ³•

```typescript
// å®šä¹‰å…ƒç»„ç±»å‹
let point: [number, number] = [10, 20]
let person: [string, number] = ['å¼ ä¸‰', 25]
let record: [number, string, boolean] = [1, 'active', true]

// è®¿é—®å…ƒç´ 
console.log(point[0]) // 10
console.log(person[1]) // 25

// è§£æ„èµ‹å€¼
const [x, y] = point
const [name, age] = person
```

### å…ƒç»„ vs æ•°ç»„

```typescript
// æ•°ç»„ï¼šé•¿åº¦å¯å˜ï¼Œæ‰€æœ‰å…ƒç´ åŒç±»å‹
const numbers: number[] = [1, 2, 3]
numbers.push(4) // âœ… å¯ä»¥æ·»åŠ 

// å…ƒç»„ï¼šå›ºå®šé•¿åº¦ï¼Œæ¯ä¸ªä½ç½®ç±»å‹ç¡®å®š
const pair: [string, number] = ['hello', 42]
// pair.push('extra');  // TypeScript å…è®¸ï¼Œä½†é€»è¾‘ä¸Šä¸æ¨è
// pair[2];             // âŒ é”™è¯¯ï¼šé•¿åº¦ä¸º 2 çš„å…ƒç»„æ²¡æœ‰ç´¢å¼• 2
```

ğŸ”¶ å…ƒç»„çš„ä¸€ä¸ªå‘ï¼šTypeScript å…è®¸å¯¹å…ƒç»„ä½¿ç”¨ push ç­‰æ–¹æ³•ï¼Œä½†è¿™ä¼šç ´åå…ƒç»„çš„å›ºå®šé•¿åº¦è¯­ä¹‰ã€‚

```typescript
const tuple: [string, number] = ['hello', 1]
tuple.push('extra') // ä¸æŠ¥é”™ï¼
console.log(tuple) // ['hello', 1, 'extra']
// ä½† tuple[2] ä»ç„¶ä¼šæŠ¥é”™
```

### å¯é€‰å…ƒç´ 

```typescript
// ç¬¬ä¸‰ä¸ªå…ƒç´ å¯é€‰
type Point2DOrPoint3D = [number, number, number?]

const point2D: Point2DOrPoint3D = [1, 2]
const point3D: Point2DOrPoint3D = [1, 2, 3]

// å¯é€‰å…ƒç´ å¿…é¡»åœ¨æœ«å°¾
type HttpResponse = [number, string, object?]
const success: HttpResponse = [200, 'OK', { data: [] }]
const notFound: HttpResponse = [404, 'Not Found']
```

### å‰©ä½™å…ƒç´ 

```typescript
// å‰ä¸¤ä¸ªæ˜¯å›ºå®šç±»å‹ï¼Œåé¢å¯ä»¥æœ‰ä»»æ„å¤šä¸ªå­—ç¬¦ä¸²
type StringList = [number, number, ...string[]]

const list1: StringList = [1, 2]
const list2: StringList = [1, 2, 'a']
const list3: StringList = [1, 2, 'a', 'b', 'c']

// å®é™…åº”ç”¨ï¼šå‡½æ•°å‚æ•°
type Args = [string, ...number[]]
function sum(label: string, ...nums: number[]): void {
  console.log(
    label,
    nums.reduce((a, b) => a + b, 0)
  )
}
sum('Total:', 1, 2, 3, 4, 5)
```

### åªè¯»å…ƒç»„

```typescript
// åªè¯»å…ƒç»„
const point: readonly [number, number] = [10, 20]
// point[0] = 30;  // âŒ é”™è¯¯

// ä½¿ç”¨ as const åˆ›å»ºåªè¯»å…ƒç»„
const colors = ['red', 'green', 'blue'] as const
// ç±»å‹æ˜¯ readonly ["red", "green", "blue"]
// colors.push('yellow');  // âŒ é”™è¯¯
// colors[0] = 'pink';     // âŒ é”™è¯¯
```

### å‘½åå…ƒç»„ï¼ˆTypeScript 4.0+ï¼‰

```typescript
// ç»™å…ƒç»„å…ƒç´ å‘½åï¼Œæé«˜å¯è¯»æ€§
type Person = [name: string, age: number, active: boolean]

const user: Person = ['å¼ ä¸‰', 25, true]

// å‘½åä¸»è¦ç”¨äºæ–‡æ¡£å’Œæç¤ºï¼Œä¸å½±å“å®é™…ä½¿ç”¨
function createPerson(...args: Person): void {
  const [name, age, active] = args
  console.log(name, age, active)
}
```

## å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯ä¸€ï¼šå‡½æ•°è¿”å›å¤šä¸ªå€¼

```typescript
// ä½¿ç”¨å…ƒç»„è¿”å›å¤šä¸ªå€¼
function useState<T>(initial: T): [T, (value: T) => void] {
  let state = initial
  const setState = (value: T) => {
    state = value
  }
  return [state, setState]
}

// ä½¿ç”¨æ—¶è§£æ„
const [count, setCount] = useState(0)
const [name, setName] = useState('å¼ ä¸‰')
```

### åœºæ™¯äºŒï¼šåæ ‡å’ŒèŒƒå›´

```typescript
type Point = [x: number, y: number]
type Range = [start: number, end: number]
type RGB = [red: number, green: number, blue: number]

const origin: Point = [0, 0]
const range: Range = [1, 100]
const color: RGB = [255, 128, 0]

function distance(p1: Point, p2: Point): number {
  const [x1, y1] = p1
  const [x2, y2] = p2
  return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2)
}
```

### åœºæ™¯ä¸‰ï¼šé”®å€¼å¯¹

```typescript
type Entry<K, V> = [key: K, value: V]

const entries: Entry<string, number>[] = [
  ['one', 1],
  ['two', 2],
  ['three', 3],
]

// é…åˆ Object.entries ä½¿ç”¨
const obj = { a: 1, b: 2, c: 3 }
const pairs: [string, number][] = Object.entries(obj)
```

## æ•°ç»„å¸¸ç”¨æ“ä½œçš„ç±»å‹

```typescript
const numbers: number[] = [1, 2, 3, 4, 5]

// mapï¼šè½¬æ¢ç±»å‹
const strings: string[] = numbers.map((n) => n.toString())

// filterï¼šä¿æŒç±»å‹
const evens: number[] = numbers.filter((n) => n % 2 === 0)

// reduceï¼šæŒ‡å®šè¿”å›ç±»å‹
const sum: number = numbers.reduce((acc, n) => acc + n, 0)

// findï¼šè¿”å› T | undefined
const found: number | undefined = numbers.find((n) => n > 3)

// ç±»å‹å®ˆå«è¿‡æ»¤
const mixed: (string | null)[] = ['a', null, 'b', null, 'c']
const filtered: string[] = mixed.filter((x): x is string => x !== null)
```

## å¸¸è§é—®é¢˜

### ğŸ™‹ å…ƒç»„å’Œæ•°ç»„æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ

- **æ•°ç»„**ï¼šåŒç±»å‹å…ƒç´ çš„é›†åˆï¼Œé•¿åº¦å¯å˜
- **å…ƒç»„**ï¼šå›ºå®šé•¿åº¦ï¼Œæ¯ä¸ªä½ç½®æœ‰ç¡®å®šç±»å‹ï¼Œç”¨äºè¡¨ç¤ºç»“æ„åŒ–æ•°æ®

```typescript
// æ•°ç»„é€‚åˆï¼šåŒç±»å‹çš„åˆ—è¡¨
const scores: number[] = [90, 85, 88]

// å…ƒç»„é€‚åˆï¼šç»“æ„åŒ–çš„å›ºå®šæ•°æ®
const user: [number, string, boolean] = [1, 'å¼ ä¸‰', true]
```

### ğŸ™‹ ä¸ºä»€ä¹ˆç©ºæ•°ç»„æ¨æ–­ä¸º never[]ï¼Ÿ

å› ä¸º TypeScript æ— æ³•ä»ç©ºæ•°ç»„æ¨æ–­å…ƒç´ ç±»å‹ï¼š

```typescript
const arr = [] // never[]

// è§£å†³æ–¹æ¡ˆ
const arr1: string[] = []
const arr2 = [] as string[]
const arr3: Array<string> = []
```

### ğŸ™‹ as const æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ

`as const` ä¼šå°†æ•°ç»„è½¬æ¢ä¸ºåªè¯»çš„å­—é¢é‡ç±»å‹å…ƒç»„ï¼š

```typescript
// æ™®é€šæ•°ç»„
const arr1 = [1, 2, 3] // number[]

// as const
const arr2 = [1, 2, 3] as const // readonly [1, 2, 3]

// å¸¸ç”¨äºå®šä¹‰å¸¸é‡
const DIRECTIONS = ['up', 'down', 'left', 'right'] as const
type Direction = (typeof DIRECTIONS)[number] // "up" | "down" | "left" | "right"
```

## æ€»ç»“

| ç±»å‹     | è¯­æ³•                | ç‰¹ç‚¹                     |
| -------- | ------------------- | ------------------------ |
| æ•°ç»„     | `T[]` æˆ– `Array<T>` | å¯å˜é•¿åº¦ï¼ŒåŒç±»å‹å…ƒç´      |
| åªè¯»æ•°ç»„ | `readonly T[]`      | ä¸å¯ä¿®æ”¹                 |
| å…ƒç»„     | `[T1, T2, ...]`     | å›ºå®šé•¿åº¦ï¼Œæ¯ä½ç½®ç±»å‹ç¡®å®š |
| åªè¯»å…ƒç»„ | `readonly [T1, T2]` | ä¸å¯ä¿®æ”¹çš„å…ƒç»„           |

ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†å­¦ä¹ å¯¹è±¡ç±»å‹ï¼Œäº†è§£å¦‚ä½•æè¿°å¤æ‚çš„å¯¹è±¡ç»“æ„ã€‚
