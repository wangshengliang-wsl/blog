---
title: 'æ¥å£ç»§æ‰¿ä¸å®ç°'
description: 'TypeScript æ¥å£ç»§æ‰¿è¯¦è§£ï¼šextends ç»§æ‰¿ã€å¤šç»§æ‰¿ã€ç±»å®ç°æ¥å£çš„ä½¿ç”¨æ–¹æ³•ä¸æœ€ä½³å®è·µ'
pubDate: 2024-01-25
toc: true
ogImage: true
category: 'TypeScript'
tags: ['TypeScript', 'æ¥å£ç»§æ‰¿', 'extends', 'implements', 'å¤šç»§æ‰¿']
---

æ¥å£å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥æ‰©å±•ï¼Œä¹Ÿå¯ä»¥è¢«ç±»å®ç°ã€‚è¿™ç§æœºåˆ¶è®©æˆ‘ä»¬èƒ½å¤Ÿå¤ç”¨ç±»å‹å®šä¹‰ï¼Œæ„å»ºçµæ´»çš„ç±»å‹å±‚æ¬¡ç»“æ„ã€‚

## æ¥å£ç»§æ‰¿

### åŸºæœ¬ç»§æ‰¿

ä½¿ç”¨ `extends` å…³é”®å­—ç»§æ‰¿æ¥å£ï¼š

```typescript
// TypeScript 5.x

// åŸºç¡€æ¥å£
interface Animal {
  name: string
  age: number
}

// ç»§æ‰¿æ¥å£
interface Dog extends Animal {
  breed: string
  bark(): void
}

// Dog æ‹¥æœ‰ Animal çš„æ‰€æœ‰å±æ€§ï¼ŒåŠ ä¸Šè‡ªå·±çš„å±æ€§
const dog: Dog = {
  name: 'æ—ºè´¢',
  age: 3,
  breed: 'æŸ´çŠ¬',
  bark() {
    console.log('æ±ªæ±ªï¼')
  },
}
```

### å¤šé‡ç»§æ‰¿

æ¥å£å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªæ¥å£ï¼š

```typescript
interface Flyable {
  fly(): void
  altitude: number
}

interface Swimmable {
  swim(): void
  depth: number
}

interface Walkable {
  walk(): void
  speed: number
}

// ç»§æ‰¿å¤šä¸ªæ¥å£
interface Duck extends Flyable, Swimmable, Walkable {
  quack(): void
}

const duck: Duck = {
  altitude: 100,
  depth: 5,
  speed: 2,
  fly() {
    console.log('é£è¡Œä¸­...')
  },
  swim() {
    console.log('æ¸¸æ³³ä¸­...')
  },
  walk() {
    console.log('è¡Œèµ°ä¸­...')
  },
  quack() {
    console.log('å˜å˜ï¼')
  },
}
```

### ç»§æ‰¿æ—¶è¦†ç›–å±æ€§

å­æ¥å£å¯ä»¥è¦†ç›–çˆ¶æ¥å£çš„å±æ€§ï¼Œä½†å¿…é¡»å…¼å®¹ï¼š

```typescript
interface Base {
  id: string | number
  name: string
}

// âœ… å¯ä»¥æ”¶çª„ç±»å‹
interface Derived extends Base {
  id: number // ä» string | number æ”¶çª„ä¸º number
}

// âŒ ä¸èƒ½æ‰©å±•ç±»å‹
// interface Invalid extends Base {
//   id: string | number | boolean;  // é”™è¯¯
// }

// âŒ ä¸èƒ½æ”¹å˜ç±»å‹
// interface Invalid2 extends Base {
//   name: number;  // é”™è¯¯ï¼šä¸ string ä¸å…¼å®¹
// }
```

### ç»§æ‰¿ä¸åˆå¹¶çš„ç»“åˆ

```typescript
// åŸºç¡€æ¥å£
interface Component {
  render(): void
}

// é€šè¿‡ç»§æ‰¿æ‰©å±•
interface ClickableComponent extends Component {
  onClick(): void
}

// é€šè¿‡åˆå¹¶æ‰©å±•ï¼ˆåŒåæ¥å£ï¼‰
interface Component {
  destroy(): void
}

// ç°åœ¨ Component æœ‰ render å’Œ destroy
// ClickableComponent æœ‰ renderã€destroy å’Œ onClick
```

## ç±»å®ç°æ¥å£

### implements å…³é”®å­—

ç±»ä½¿ç”¨ `implements` æ¥å®ç°æ¥å£ï¼š

```typescript
interface Printable {
  print(): void
}

class Document implements Printable {
  content: string

  constructor(content: string) {
    this.content = content
  }

  print() {
    console.log(this.content)
  }
}

const doc = new Document('Hello, World!')
doc.print()
```

### å®ç°å¤šä¸ªæ¥å£

```typescript
interface Serializable {
  serialize(): string
}

interface Deserializable {
  deserialize(data: string): void
}

interface Cloneable {
  clone(): this
}

// å®ç°å¤šä¸ªæ¥å£
class User implements Serializable, Deserializable, Cloneable {
  constructor(
    public name: string,
    public age: number
  ) {}

  serialize(): string {
    return JSON.stringify({ name: this.name, age: this.age })
  }

  deserialize(data: string): void {
    const parsed = JSON.parse(data)
    this.name = parsed.name
    this.age = parsed.age
  }

  clone(): this {
    return new (this.constructor as any)(this.name, this.age)
  }
}

const user = new User('å¼ ä¸‰', 25)
console.log(user.serialize()) // {"name":"å¼ ä¸‰","age":25}
const clone = user.clone()
```

### æ¥å£ä¸ç±»çš„å±æ€§

```typescript
interface Person {
  name: string
  age: number
  greet(): void
}

// ç±»å¿…é¡»å®ç°æ¥å£çš„æ‰€æœ‰æˆå‘˜
class Employee implements Person {
  // å¯ä»¥ç”¨æ„é€ å‡½æ•°ç®€å†™
  constructor(
    public name: string,
    public age: number,
    public department: string // å¯ä»¥æœ‰é¢å¤–å±æ€§
  ) {}

  greet() {
    console.log(`æˆ‘æ˜¯ ${this.name}ï¼Œæ¥è‡ª ${this.department}`)
  }

  // å¯ä»¥æœ‰é¢å¤–æ–¹æ³•
  work() {
    console.log('å·¥ä½œä¸­...')
  }
}
```

### å¯é€‰æˆå‘˜çš„å®ç°

```typescript
interface Config {
  host: string
  port: number
  ssl?: boolean // å¯é€‰
  timeout?: number // å¯é€‰
}

class ServerConfig implements Config {
  host: string
  port: number
  ssl?: boolean // å¯ä»¥å®ç°ä¹Ÿå¯ä»¥ä¸å®ç°

  constructor(host: string, port: number, ssl?: boolean) {
    this.host = host
    this.port = port
    this.ssl = ssl
    // timeout ä¸éœ€è¦å®ç°
  }
}
```

## æ¥å£ç»§æ‰¿ç±»

TypeScript ä¸­æ¥å£å¯ä»¥ç»§æ‰¿ç±»ï¼š

```typescript
class Control {
  private state: boolean = false

  activate() {
    this.state = true
  }
}

// æ¥å£ç»§æ‰¿ç±»ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜
interface SelectableControl extends Control {
  select(): void
}

// åªæœ‰ Control çš„å­ç±»æ‰èƒ½å®ç°è¿™ä¸ªæ¥å£
class Button extends Control implements SelectableControl {
  select() {
    console.log('Button selected')
  }
}

class TextBox extends Control implements SelectableControl {
  select() {
    console.log('TextBox selected')
  }
}

// âŒ è¿™ä¸ªç±»æ²¡æœ‰ç»§æ‰¿ Controlï¼Œæ— æ³•å®ç°æ¥å£
// class Image implements SelectableControl {
//   select() { }  // é”™è¯¯ï¼šç¼ºå°‘ private state
// }
```

## å®é™…åº”ç”¨æ¨¡å¼

### ä»“å‚¨æ¨¡å¼

```typescript
// åŸºç¡€ä»“å‚¨æ¥å£
interface Repository<T> {
  findById(id: string): Promise<T | null>
  findAll(): Promise<T[]>
  save(entity: T): Promise<T>
  delete(id: string): Promise<void>
}

// æ‰©å±•æ¥å£
interface UserRepository extends Repository<User> {
  findByEmail(email: string): Promise<User | null>
  findByRole(role: string): Promise<User[]>
}

// å®ç°
class MongoUserRepository implements UserRepository {
  async findById(id: string) {
    /* MongoDB æŸ¥è¯¢ */
    return null
  }
  async findAll() {
    return []
  }
  async save(user: User) {
    return user
  }
  async delete(id: string) {}
  async findByEmail(email: string) {
    return null
  }
  async findByRole(role: string) {
    return []
  }
}
```

### æ’ä»¶ç³»ç»Ÿ

```typescript
// åŸºç¡€æ’ä»¶æ¥å£
interface Plugin {
  name: string
  version: string
  install(): void
  uninstall(): void
}

// æ‰©å±•æ¥å£
interface ConfigurablePlugin extends Plugin {
  configure(options: Record<string, unknown>): void
}

interface LifecyclePlugin extends Plugin {
  onStart(): void
  onStop(): void
}

// å®Œæ•´æ’ä»¶
interface FullPlugin extends ConfigurablePlugin, LifecyclePlugin {
  getStatus(): 'active' | 'inactive' | 'error'
}

// å®ç°
class AnalyticsPlugin implements FullPlugin {
  name = 'analytics'
  version = '1.0.0'
  private status: 'active' | 'inactive' | 'error' = 'inactive'

  install() {
    console.log('Installing analytics...')
  }
  uninstall() {
    console.log('Uninstalling analytics...')
  }
  configure(options: Record<string, unknown>) {
    console.log('Configuring with:', options)
  }
  onStart() {
    this.status = 'active'
  }
  onStop() {
    this.status = 'inactive'
  }
  getStatus() {
    return this.status
  }
}
```

### ç»„ä»¶æ¥å£

```typescript
// åŸºç¡€ç»„ä»¶
interface Component {
  render(): string
}

// æœ‰çŠ¶æ€ç»„ä»¶
interface StatefulComponent<S> extends Component {
  state: S
  setState(newState: Partial<S>): void
}

// æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶
interface LifecycleComponent extends Component {
  componentDidMount(): void
  componentWillUnmount(): void
}

// å®Œæ•´ç»„ä»¶
interface FullComponent<S> extends StatefulComponent<S>, LifecycleComponent {}

// æŠ½è±¡åŸºç±»å®ç°éƒ¨åˆ†åŠŸèƒ½
abstract class BaseComponent<S> implements FullComponent<S> {
  state: S

  constructor(initialState: S) {
    this.state = initialState
  }

  setState(newState: Partial<S>) {
    this.state = { ...this.state, ...newState }
    this.render() // é‡æ–°æ¸²æŸ“
  }

  abstract render(): string
  abstract componentDidMount(): void
  abstract componentWillUnmount(): void
}
```

## å¸¸è§é—®é¢˜

### ğŸ™‹ æ¥å£ç»§æ‰¿å’Œç±»å‹äº¤å‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

```typescript
// æ¥å£ç»§æ‰¿ï¼šæœ‰ç»§æ‰¿å…³ç³»ï¼Œæ”¯æŒè¦†ç›–
interface A {
  x: string
}
interface B extends A {
  y: number
}

// ç±»å‹äº¤å‰ï¼šç®€å•åˆå¹¶
type A2 = { x: string }
type B2 = A2 & { y: number }

// ä¸»è¦åŒºåˆ«ï¼š
// 1. æ¥å£å¯ä»¥åˆå¹¶å£°æ˜ï¼Œtype ä¸è¡Œ
// 2. æ¥å£ç»§æ‰¿æ—¶å†²çªä¼šæŠ¥é”™ï¼Œäº¤å‰ä¼šå˜æˆ never
// 3. æ¥å£æœ‰æ›´å¥½çš„é”™è¯¯æç¤º
```

### ğŸ™‹ ç±»å¯ä»¥å®ç° type å®šä¹‰çš„ç±»å‹å—ï¼Ÿ

å¯ä»¥ï¼š

```typescript
type Printable = {
  print(): void
}

class Document implements Printable {
  print() {
    console.log('Printing...')
  }
}
```

### ğŸ™‹ å¦‚ä½•ç¡®ä¿ç±»å®Œå…¨å®ç°æ¥å£ï¼Ÿ

TypeScript ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼Œç¼ºå°‘ä»»ä½•æˆå‘˜éƒ½ä¼šæŠ¥é”™ï¼š

```typescript
interface Animal {
  name: string
  speak(): void
}

// âŒ é”™è¯¯ï¼šç¼ºå°‘ speak æ–¹æ³•
// class Cat implements Animal {
//   name = 'Cat';
// }

// âœ… æ­£ç¡®
class Cat implements Animal {
  name = 'Cat'
  speak() {
    console.log('Meow!')
  }
}
```

## æ€»ç»“

| ç‰¹æ€§       | è¯­æ³•                        | ç”¨é€”             |
| ---------- | --------------------------- | ---------------- |
| å•ç»§æ‰¿     | `interface B extends A`     | æ‰©å±•å•ä¸ªæ¥å£     |
| å¤šç»§æ‰¿     | `interface C extends A, B`  | ç»„åˆå¤šä¸ªæ¥å£     |
| ç±»å®ç°     | `class X implements A`      | ç±»éµå¾ªæ¥å£å¥‘çº¦   |
| å¤šå®ç°     | `class X implements A, B`   | ç±»å®ç°å¤šä¸ªæ¥å£   |
| æ¥å£ç»§æ‰¿ç±» | `interface I extends Class` | ç»§æ‰¿ç±»çš„æˆå‘˜ç±»å‹ |

ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†å­¦ä¹  TypeScript ä¸­çš„ç±»åŸºç¡€ï¼ŒåŒ…æ‹¬å±æ€§ã€æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚
