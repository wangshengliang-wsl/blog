---
title: 'æ¥å£åŸºç¡€'
description: 'TypeScript æ¥å£åŸºç¡€è¯¦è§£ï¼šinterface å®šä¹‰ã€å±æ€§æè¿°ã€å¯é€‰ä¸åªè¯»å±æ€§ã€å¯¹è±¡çº¦æŸçš„ä½¿ç”¨æ–¹æ³•'
pubDate: 2024-01-23
toc: true
ogImage: true
category: 'TypeScript'
tags: ['TypeScript', 'æ¥å£', 'interface', 'å¯¹è±¡ç±»å‹', 'ç±»å‹çº¦æŸ']
---

æ¥å£æ˜¯ TypeScript ä¸­å®šä¹‰å¯¹è±¡ç»“æ„çš„æ ¸å¿ƒæ–¹å¼ä¹‹ä¸€ã€‚å®ƒæè¿°äº†å¯¹è±¡åº”è¯¥å…·æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ï¼Œæ˜¯å®ç°ç±»å‹å®‰å…¨å’Œä»£ç å¥‘çº¦çš„é‡è¦å·¥å…·ã€‚

## æ¥å£åŸºæœ¬è¯­æ³•

### å®šä¹‰æ¥å£

```typescript
// TypeScript 5.x

// ä½¿ç”¨ interface å…³é”®å­—å®šä¹‰æ¥å£
interface User {
  id: number
  name: string
  email: string
}

// ä½¿ç”¨æ¥å£çº¦æŸå¯¹è±¡
const user: User = {
  id: 1,
  name: 'å¼ ä¸‰',
  email: 'zhangsan@example.com',
}

// âŒ ç¼ºå°‘å±æ€§ä¼šæŠ¥é”™
// const invalidUser: User = {
//   id: 1,
//   name: 'å¼ ä¸‰'
//   // ç¼ºå°‘ email
// };

// âŒ å¤šä½™å±æ€§ä¹Ÿä¼šæŠ¥é”™ï¼ˆç›´æ¥èµ‹å€¼æ—¶ï¼‰
// const extraUser: User = {
//   id: 1,
//   name: 'å¼ ä¸‰',
//   email: 'test@test.com',
//   age: 25  // å¤šä½™å±æ€§
// };
```

### æ¥å£ä½œä¸ºç±»å‹æ³¨è§£

```typescript
interface Point {
  x: number
  y: number
}

// å˜é‡ç±»å‹
const origin: Point = { x: 0, y: 0 }

// å‡½æ•°å‚æ•°ç±»å‹
function printPoint(point: Point): void {
  console.log(`(${point.x}, ${point.y})`)
}

// å‡½æ•°è¿”å›ç±»å‹
function createPoint(x: number, y: number): Point {
  return { x, y }
}

// æ•°ç»„å…ƒç´ ç±»å‹
const points: Point[] = [
  { x: 0, y: 0 },
  { x: 1, y: 1 },
  { x: 2, y: 2 },
]
```

## å¯é€‰å±æ€§

ä½¿ç”¨ `?` æ ‡è®°å¯é€‰å±æ€§ï¼š

```typescript
interface Config {
  host: string
  port: number
  protocol?: string // å¯é€‰
  timeout?: number // å¯é€‰
}

// å¯ä»¥ä¸æä¾›å¯é€‰å±æ€§
const config1: Config = {
  host: 'localhost',
  port: 3000,
}

// ä¹Ÿå¯ä»¥æä¾›
const config2: Config = {
  host: 'localhost',
  port: 3000,
  protocol: 'https',
  timeout: 5000,
}
```

### å¤„ç†å¯é€‰å±æ€§

```typescript
interface User {
  name: string
  nickname?: string
}

function greet(user: User): string {
  // å¯é€‰å±æ€§çš„ç±»å‹æ˜¯ T | undefined
  // user.nickname çš„ç±»å‹æ˜¯ string | undefined

  // æ–¹å¼1ï¼šæ¡ä»¶åˆ¤æ–­
  if (user.nickname) {
    return `Hello, ${user.nickname}!`
  }
  return `Hello, ${user.name}!`

  // æ–¹å¼2ï¼šç©ºå€¼åˆå¹¶
  return `Hello, ${user.nickname ?? user.name}!`

  // æ–¹å¼3ï¼šå¯é€‰é“¾ + ç©ºå€¼åˆå¹¶
  return `Hello, ${user.nickname?.toUpperCase() ?? user.name}!`
}
```

## åªè¯»å±æ€§

ä½¿ç”¨ `readonly` æ ‡è®°åªè¯»å±æ€§ï¼š

```typescript
interface Point {
  readonly x: number
  readonly y: number
}

const point: Point = { x: 10, y: 20 }

// point.x = 30;  // âŒ é”™è¯¯ï¼šæ— æ³•åˆ†é…åˆ° "x" ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»å±æ€§

// å¸¸ç”¨äºé…ç½®å¯¹è±¡
interface AppConfig {
  readonly apiUrl: string
  readonly apiKey: string
  readonly version: string
}

const config: AppConfig = {
  apiUrl: 'https://api.example.com',
  apiKey: 'secret-key',
  version: '1.0.0',
}
```

### readonly vs const

```typescript
// constï¼šç”¨äºå˜é‡ï¼Œå˜é‡æœ¬èº«ä¸èƒ½é‡æ–°èµ‹å€¼
const x = 10
// x = 20;  // âŒ é”™è¯¯

// readonlyï¼šç”¨äºå±æ€§ï¼Œå±æ€§ä¸èƒ½è¢«ä¿®æ”¹
interface Obj {
  readonly prop: number
}

const obj: Obj = { prop: 10 }
// obj.prop = 20;  // âŒ é”™è¯¯
// ä½† obj æœ¬èº«å¯ä»¥é‡æ–°èµ‹å€¼ï¼ˆå¦‚æœç”¨ letï¼‰

// ç»„åˆä½¿ç”¨
const config = {
  apiUrl: 'xxx', // âŒ è¿™æ ·å†™ä¸å¯¹
} // å¯¹è±¡å­—é¢é‡ä¸èƒ½ç›´æ¥ç”¨ readonly

// æ­£ç¡®æ–¹å¼
interface Config {
  readonly apiUrl: string
}
const config2: Config = { apiUrl: 'xxx' }
```

### åªè¯»æ•°ç»„

```typescript
interface Data {
  readonly items: readonly number[]
}

const data: Data = {
  items: [1, 2, 3],
}

// data.items = [4, 5, 6];  // âŒ ä¸èƒ½é‡æ–°èµ‹å€¼
// data.items.push(4);      // âŒ ä¸èƒ½ä¿®æ”¹æ•°ç»„
// data.items[0] = 10;      // âŒ ä¸èƒ½ä¿®æ”¹å…ƒç´ 
```

## å±æ€§ç±»å‹

### åŸºç¡€ç±»å‹å±æ€§

```typescript
interface User {
  id: number
  name: string
  isActive: boolean
  createdAt: Date
  tags: string[]
  metadata: object
}
```

### åµŒå¥—å¯¹è±¡

```typescript
interface Address {
  street: string
  city: string
  country: string
  zipCode?: string
}

interface Company {
  name: string
  address: Address // åµŒå¥—æ¥å£
}

interface Employee {
  name: string
  company: Company
  homeAddress?: Address
}

const employee: Employee = {
  name: 'å¼ ä¸‰',
  company: {
    name: 'Acme Inc',
    address: {
      street: 'ä¸­å…³æ‘å¤§è¡—1å·',
      city: 'åŒ—äº¬',
      country: 'ä¸­å›½',
    },
  },
}
```

### æ–¹æ³•å±æ€§

```typescript
interface Calculator {
  // æ–¹æ³•ç®€å†™è¯­æ³•
  add(a: number, b: number): number
  subtract(a: number, b: number): number

  // å±æ€§è¯­æ³•ï¼ˆç­‰ä»·ï¼‰
  multiply: (a: number, b: number) => number
  divide: (a: number, b: number) => number
}

const calc: Calculator = {
  add(a, b) {
    return a + b
  },
  subtract(a, b) {
    return a - b
  },
  multiply: (a, b) => a * b,
  divide: (a, b) => a / b,
}
```

## æ¥å£æè¿°å‡½æ•°

æ¥å£å¯ä»¥æè¿°å‡½æ•°ç±»å‹ï¼š

```typescript
// è°ƒç”¨ç­¾å
interface SearchFunc {
  (source: string, keyword: string): boolean
}

const search: SearchFunc = (src, kw) => {
  return src.includes(kw)
}

search('hello world', 'world') // true

// å¸¦å±æ€§çš„å‡½æ•°
interface Counter {
  (): number // è°ƒç”¨ç­¾å
  count: number // å±æ€§
  reset(): void // æ–¹æ³•
}

function createCounter(): Counter {
  const counter = (() => {
    counter.count++
    return counter.count
  }) as Counter

  counter.count = 0
  counter.reset = () => {
    counter.count = 0
  }

  return counter
}

const counter = createCounter()
console.log(counter()) // 1
console.log(counter()) // 2
counter.reset()
console.log(counter()) // 1
```

## æ¥å£æè¿°æ•°ç»„

```typescript
// ç´¢å¼•ç­¾åæè¿°æ•°ç»„
interface StringArray {
  [index: number]: string
  length: number
}

const arr: StringArray = ['a', 'b', 'c']
console.log(arr[0]) // 'a'
console.log(arr.length) // 3

// ç±»æ•°ç»„å¯¹è±¡
interface ArrayLike<T> {
  readonly length: number
  [index: number]: T
}

function toArray<T>(arrayLike: ArrayLike<T>): T[] {
  return Array.from(arrayLike)
}
```

## å¤šä½™å±æ€§æ£€æŸ¥

TypeScript å¯¹å¯¹è±¡å­—é¢é‡æœ‰é¢å¤–çš„å±æ€§æ£€æŸ¥ï¼š

```typescript
interface Point {
  x: number
  y: number
}

// âŒ ç›´æ¥èµ‹å€¼æ—¶æ£€æŸ¥å¤šä½™å±æ€§
// const p: Point = { x: 1, y: 2, z: 3 };  // é”™è¯¯

// âœ… é€šè¿‡å˜é‡èµ‹å€¼å¯ä»¥ç»•è¿‡
const temp = { x: 1, y: 2, z: 3 }
const p: Point = temp // æ­£ç¡®

// âœ… ä½¿ç”¨ç±»å‹æ–­è¨€
const p2 = { x: 1, y: 2, z: 3 } as Point

// âœ… æ·»åŠ ç´¢å¼•ç­¾åï¼ˆå¦‚æœç¡®å®éœ€è¦é¢å¤–å±æ€§ï¼‰
interface FlexiblePoint {
  x: number
  y: number
  [key: string]: number // å…è®¸é¢å¤–çš„ number å±æ€§
}

const p3: FlexiblePoint = { x: 1, y: 2, z: 3 } // æ­£ç¡®
```

## æ¥å£åˆå¹¶

åŒåæ¥å£ä¼šè‡ªåŠ¨åˆå¹¶ï¼š

```typescript
interface User {
  name: string
}

interface User {
  age: number
}

interface User {
  email: string
}

// åˆå¹¶åç­‰ä»·äºï¼š
// interface User {
//   name: string;
//   age: number;
//   email: string;
// }

const user: User = {
  name: 'å¼ ä¸‰',
  age: 25,
  email: 'test@test.com',
}
```

### åˆå¹¶è§„åˆ™

```typescript
// éå‡½æ•°æˆå‘˜å¿…é¡»ç±»å‹ä¸€è‡´
interface A {
  x: number
}

interface A {
  x: number // âœ… ç›¸åŒç±»å‹å¯ä»¥
  // x: string;  // âŒ ä¸åŒç±»å‹ä¼šæŠ¥é”™
}

// å‡½æ•°æˆå‘˜ä¼šå˜æˆé‡è½½
interface Logger {
  log(message: string): void
}

interface Logger {
  log(message: string, level: string): void
}

// åˆå¹¶åï¼š
// interface Logger {
//   log(message: string, level: string): void;  // åå£°æ˜çš„åœ¨å‰
//   log(message: string): void;
// }
```

## å®é™…åº”ç”¨

### API æ•°æ®ç»“æ„

```typescript
interface ApiResponse<T> {
  code: number
  message: string
  data: T
  timestamp: number
}

interface PaginatedData<T> {
  items: T[]
  total: number
  page: number
  pageSize: number
  hasMore: boolean
}

interface User {
  id: number
  name: string
  email: string
  avatar?: string
}

// ä½¿ç”¨
type UserListResponse = ApiResponse<PaginatedData<User>>

async function fetchUsers(): Promise<UserListResponse> {
  const response = await fetch('/api/users')
  return response.json()
}
```

### ç»„ä»¶ Props

```typescript
interface ButtonProps {
  text: string
  onClick: () => void
  disabled?: boolean
  loading?: boolean
  size?: 'small' | 'medium' | 'large'
  type?: 'primary' | 'secondary' | 'danger'
}

function Button(props: ButtonProps) {
  const {
    text,
    onClick,
    disabled = false,
    loading = false,
    size = 'medium',
    type = 'primary',
  } = props

  // æ¸²æŸ“æŒ‰é’®...
}
```

### é…ç½®å¯¹è±¡

```typescript
interface DatabaseConfig {
  readonly host: string
  readonly port: number
  readonly database: string
  username?: string
  password?: string
  ssl?: boolean
  pool?: {
    min: number
    max: number
  }
}

function createConnection(config: DatabaseConfig) {
  // åˆ›å»ºæ•°æ®åº“è¿æ¥...
}
```

## å¸¸è§é—®é¢˜

### ğŸ™‹ æ¥å£å’Œ type å®šä¹‰å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

åœ¨å®šä¹‰å¯¹è±¡ç»“æ„æ—¶åŸºæœ¬ç­‰ä»·ï¼Œä¸»è¦åŒºåˆ«ï¼š

```typescript
// æ¥å£å¯ä»¥åˆå¹¶å£°æ˜
interface User {
  name: string
}
interface User {
  age: number
}

// type ä¸èƒ½é‡å¤å£°æ˜
// type User = { name: string };
// type User = { age: number };  // âŒ é”™è¯¯
```

### ğŸ™‹ æ¥å£å±æ€§å¯ä»¥æ˜¯ undefined å—ï¼Ÿ

å¯ä»¥ï¼Œä½†æœ‰åŒºåˆ«ï¼š

```typescript
interface A {
  prop?: string // å¯é€‰ï¼šå¯ä»¥ä¸å­˜åœ¨
}

interface B {
  prop: string | undefined // å¿…é¡»å­˜åœ¨ï¼Œä½†å€¼å¯ä»¥æ˜¯ undefined
}

const a: A = {} // âœ… æ­£ç¡®
const b: B = { prop: undefined } // âœ… å¿…é¡»æ˜¾å¼æä¾›
// const b2: B = {};  // âŒ é”™è¯¯
```

### ğŸ™‹ å¦‚ä½•è®©æ¥å£çš„æ‰€æœ‰å±æ€§éƒ½å˜æˆå¯é€‰/åªè¯»ï¼Ÿ

ä½¿ç”¨å·¥å…·ç±»å‹ï¼š

```typescript
interface User {
  id: number
  name: string
  email: string
}

type PartialUser = Partial<User> // æ‰€æœ‰å±æ€§å¯é€‰
type ReadonlyUser = Readonly<User> // æ‰€æœ‰å±æ€§åªè¯»
```

## æ€»ç»“

| ç‰¹æ€§     | è¯­æ³•                  | ç”¨é€”           |
| -------- | --------------------- | -------------- |
| åŸºæœ¬æ¥å£ | `interface Name { }`  | å®šä¹‰å¯¹è±¡ç»“æ„   |
| å¯é€‰å±æ€§ | `prop?: type`         | å±æ€§å¯ä»¥ä¸å­˜åœ¨ |
| åªè¯»å±æ€§ | `readonly prop: type` | å±æ€§ä¸å¯ä¿®æ”¹   |
| æ–¹æ³•å±æ€§ | `method(): type`      | å®šä¹‰å¯¹è±¡æ–¹æ³•   |
| æ¥å£åˆå¹¶ | åŒå interface        | æ‰©å±•å·²æœ‰æ¥å£   |

ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†å­¦ä¹ æ¥å£çš„è¿›é˜¶ç”¨æ³•ï¼ŒåŒ…æ‹¬å‡½æ•°ç±»å‹æ¥å£ã€å¯ç´¢å¼•ç±»å‹ã€æ··åˆç±»å‹ç­‰ã€‚
