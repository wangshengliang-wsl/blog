---
title: 'tsconfig é…ç½®è¯¦è§£'
description: 'TypeScript tsconfig.json é…ç½®è¯¦è§£ï¼šç¼–è¯‘é€‰é¡¹ã€æ¨¡å—é€‰é¡¹ã€ä¸¥æ ¼æ¨¡å¼ã€è·¯å¾„åˆ«åã€é¡¹ç›®å¼•ç”¨'
pubDate: 2024-02-16
toc: true
ogImage: true
category: 'TypeScript'
tags: ['TypeScript', 'tsconfig', 'é…ç½®', 'ç¼–è¯‘é€‰é¡¹', 'é¡¹ç›®é…ç½®']
---

`tsconfig.json` æ˜¯ TypeScript é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†ç¼–è¯‘å™¨çš„è¡Œä¸ºå’Œé¡¹ç›®ç»“æ„ã€‚

## åŸºæœ¬ç»“æ„

```json
// TypeScript 5.x
{
  "compilerOptions": {
    // ç¼–è¯‘å™¨é€‰é¡¹
  },
  "include": [
    // åŒ…å«çš„æ–‡ä»¶
  ],
  "exclude": [
    // æ’é™¤çš„æ–‡ä»¶
  ],
  "files": [
    // æŒ‡å®šçš„æ–‡ä»¶åˆ—è¡¨
  ],
  "extends": "",
  // ç»§æ‰¿çš„é…ç½®
  "references": [
    // é¡¹ç›®å¼•ç”¨
  ]
}
```

## æ–‡ä»¶åŒ…å«

### include å’Œ exclude

```json
{
  "include": [
    "src/**/*", // src ä¸‹æ‰€æœ‰æ–‡ä»¶
    "tests/**/*", // tests ä¸‹æ‰€æœ‰æ–‡ä»¶
    "types/**/*.d.ts" // types ä¸‹æ‰€æœ‰å£°æ˜æ–‡ä»¶
  ],
  "exclude": [
    "node_modules", // æ’é™¤ node_modules
    "dist", // æ’é™¤è¾“å‡ºç›®å½•
    "**/*.spec.ts", // æ’é™¤æµ‹è¯•æ–‡ä»¶
    "**/*.test.ts"
  ]
}
```

### files

æŒ‡å®šå…·ä½“æ–‡ä»¶ï¼ˆä¸ä½¿ç”¨é€šé…ç¬¦ï¼‰ï¼š

```json
{
  "files": ["src/index.ts", "src/types.ts", "src/utils.ts"]
}
```

## ç¼–è¯‘ç›®æ ‡

### target

æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬ï¼š

```json
{
  "compilerOptions": {
    // å¸¸ç”¨ç›®æ ‡
    "target": "ES2015", // ES6
    "target": "ES2020", // æ”¯æŒå¯é€‰é“¾ã€ç©ºå€¼åˆå¹¶
    "target": "ES2022", // æ”¯æŒé¡¶å±‚ await
    "target": "ESNext" // æœ€æ–°ç‰¹æ€§
  }
}
```

### lib

æŒ‡å®šè¦åŒ…å«çš„åº“æ–‡ä»¶ï¼š

```json
{
  "compilerOptions": {
    "lib": [
      "ES2020", // ES2020 æ ‡å‡†åº“
      "DOM", // DOM API
      "DOM.Iterable", // DOM å¯è¿­ä»£
      "WebWorker" // Web Worker API
    ]
  }
}
```

## æ¨¡å—é…ç½®

### module

æŒ‡å®šæ¨¡å—ç³»ç»Ÿï¼š

```json
{
  "compilerOptions": {
    // å¸¸ç”¨æ¨¡å—ç³»ç»Ÿ
    "module": "ESNext", // ES æ¨¡å—
    "module": "CommonJS", // Node.js CommonJS
    "module": "Node16", // Node.js 16+ ESM/CJS
    "module": "NodeNext" // æœ€æ–° Node.js æ¨¡å—
  }
}
```

### moduleResolution

æŒ‡å®šæ¨¡å—è§£æç­–ç•¥ï¼š

```json
{
  "compilerOptions": {
    "moduleResolution": "node", // Node.js è§£æ
    "moduleResolution": "node16", // Node.js 16+
    "moduleResolution": "bundler" // æ‰“åŒ…å·¥å…·ï¼ˆVite, Webpackï¼‰
  }
}
```

### baseUrl å’Œ paths

é…ç½®è·¯å¾„åˆ«åï¼š

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@utils/*": ["src/utils/*"],
      "@types": ["src/types/index.ts"]
    }
  }
}
```

## ä¸¥æ ¼æ¨¡å¼

### strict

å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼š

```json
{
  "compilerOptions": {
    "strict": true
    // ç­‰åŒäºå¯ç”¨ä»¥ä¸‹æ‰€æœ‰é€‰é¡¹
  }
}
```

### ä¸¥æ ¼é€‰é¡¹è¯¦è§£

```json
{
  "compilerOptions": {
    // å¯ç”¨ä¸¥æ ¼çš„ç©ºå€¼æ£€æŸ¥
    "strictNullChecks": true,

    // å‡½æ•°å‚æ•°åŒå‘åå˜æ£€æŸ¥
    "strictFunctionTypes": true,

    // ä¸¥æ ¼çš„å±æ€§åˆå§‹åŒ–æ£€æŸ¥
    "strictPropertyInitialization": true,

    // å¯ç”¨ä¸¥æ ¼çš„ bind/call/apply æ£€æŸ¥
    "strictBindCallApply": true,

    // éšå¼ any æŠ¥é”™
    "noImplicitAny": true,

    // éšå¼ this æŠ¥é”™
    "noImplicitThis": true,

    // æ•è·å˜é‡ä½¿ç”¨å‰æ£€æŸ¥
    "useUnknownInCatchVariables": true,

    // æ€»æ˜¯ä¸¥æ ¼æ¨¡å¼
    "alwaysStrict": true
  }
}
```

## ä»£ç è´¨é‡æ£€æŸ¥

```json
{
  "compilerOptions": {
    // æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡æŠ¥é”™
    "noUnusedLocals": true,

    // æœªä½¿ç”¨çš„å‚æ•°æŠ¥é”™
    "noUnusedParameters": true,

    // ä¸æ˜¯æ‰€æœ‰è·¯å¾„éƒ½æœ‰è¿”å›å€¼æ—¶æŠ¥é”™
    "noImplicitReturns": true,

    // switch è¯­å¥è½ç©ºæ£€æŸ¥
    "noFallthroughCasesInSwitch": true,

    // ç´¢å¼•ç­¾åè®¿é—®æ—¶åŒ…å« undefined
    "noUncheckedIndexedAccess": true,

    // è¦†ç›–æ–¹æ³•å¿…é¡»ä½¿ç”¨ override å…³é”®å­—
    "noImplicitOverride": true,

    // å…è®¸æœªä½¿ç”¨çš„æ ‡ç­¾
    "allowUnusedLabels": false,

    // å…è®¸ä¸å¯è¾¾ä»£ç 
    "allowUnreachableCode": false,

    // ç²¾ç¡®çš„å¯é€‰å±æ€§ç±»å‹
    "exactOptionalPropertyTypes": true
  }
}
```

## è¾“å‡ºé…ç½®

### outDir å’Œ rootDir

```json
{
  "compilerOptions": {
    "outDir": "./dist", // è¾“å‡ºç›®å½•
    "rootDir": "./src" // æºæ–‡ä»¶æ ¹ç›®å½•
  }
}
```

### å£°æ˜æ–‡ä»¶

```json
{
  "compilerOptions": {
    "declaration": true, // ç”Ÿæˆ .d.ts æ–‡ä»¶
    "declarationDir": "./types", // å£°æ˜æ–‡ä»¶è¾“å‡ºç›®å½•
    "declarationMap": true, // ç”Ÿæˆå£°æ˜æ–‡ä»¶çš„ source map
    "emitDeclarationOnly": true // åªç”Ÿæˆå£°æ˜æ–‡ä»¶
  }
}
```

### Source Map

```json
{
  "compilerOptions": {
    "sourceMap": true, // ç”Ÿæˆ .js.map æ–‡ä»¶
    "inlineSourceMap": false, // å†…è” source map
    "inlineSources": false, // å†…è”æºä»£ç 
    "sourceRoot": "", // source map ä¸­çš„æºæ–‡ä»¶æ ¹è·¯å¾„
    "mapRoot": "" // source map æ–‡ä»¶ä½ç½®
  }
}
```

## äº’æ“ä½œæ€§

### ES æ¨¡å—äº’æ“ä½œ

```json
{
  "compilerOptions": {
    // å…è®¸ import x from 'module'ï¼ˆæ¨¡å—æ²¡æœ‰é»˜è®¤å¯¼å‡ºæ—¶ï¼‰
    "allowSyntheticDefaultImports": true,

    // ä¸º CommonJS æ¨¡å—ç”Ÿæˆå…¼å®¹ä»£ç 
    "esModuleInterop": true,

    // å¼ºåˆ¶æ–‡ä»¶åå¤§å°å†™ä¸€è‡´
    "forceConsistentCasingInFileNames": true
  }
}
```

### ç±»å‹æ£€æŸ¥

```json
{
  "compilerOptions": {
    // è·³è¿‡åº“æ–‡ä»¶ç±»å‹æ£€æŸ¥
    "skipLibCheck": true,

    // è·³è¿‡é»˜è®¤åº“ç±»å‹æ£€æŸ¥
    "skipDefaultLibCheck": true,

    // éš”ç¦»æ¨¡å—ï¼ˆæ¯ä¸ªæ–‡ä»¶ç‹¬ç«‹ç¼–è¯‘ï¼‰
    "isolatedModules": true,

    // å…è®¸å¯¼å…¥ JSON
    "resolveJsonModule": true
  }
}
```

## é…ç½®ç»§æ‰¿

### extends

ç»§æ‰¿å…¶ä»–é…ç½®æ–‡ä»¶ï¼š

```json
// tsconfig.json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "outDir": "./dist"
  },
  "include": ["src/**/*"]
}
```

### å¸¸ç”¨åŸºç¡€é…ç½®

```json
// tsconfig.base.json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true
  }
}
```

## é¡¹ç›®å¼•ç”¨

ç”¨äºå¤§å‹é¡¹ç›®çš„å¢é‡æ„å»ºï¼š

```json
// packages/shared/tsconfig.json
{
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "declarationMap": true,
    "outDir": "./dist"
  },
  "include": ["src/**/*"]
}

// packages/app/tsconfig.json
{
  "compilerOptions": {
    "composite": true
  },
  "references": [
    { "path": "../shared" }
  ],
  "include": ["src/**/*"]
}

// æ ¹ç›®å½• tsconfig.json
{
  "files": [],
  "references": [
    { "path": "./packages/shared" },
    { "path": "./packages/app" }
  ]
}
```

## å¸¸ç”¨é…ç½®æ¨¡æ¿

### Node.js é¡¹ç›®

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### React é¡¹ç›®

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "moduleResolution": "bundler",
    "jsx": "react-jsx",
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "allowImportingTsExtensions": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "exclude": ["node_modules"]
}
```

### Vue é¡¹ç›®

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "strict": true,
    "noEmit": true,
    "jsx": "preserve",
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "allowImportingTsExtensions": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src/**/*.ts", "src/**/*.tsx", "src/**/*.vue"],
  "exclude": ["node_modules"]
}
```

### åº“é¡¹ç›®

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "strict": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "**/*.test.ts"]
}
```

## å¸¸è§é—®é¢˜

### ğŸ™‹ noEmit ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼Ÿ

```json
{
  "compilerOptions": {
    // åªè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä¸ç”Ÿæˆè¾“å‡º
    // é€‚ç”¨äºä½¿ç”¨å…¶ä»–å·¥å…·ï¼ˆå¦‚ Viteã€esbuildï¼‰ç¼–è¯‘çš„é¡¹ç›®
    "noEmit": true
  }
}
```

### ğŸ™‹ isolatedModules çš„ä½œç”¨ï¼Ÿ

```json
{
  "compilerOptions": {
    // ç¡®ä¿æ¯ä¸ªæ–‡ä»¶å¯ä»¥ç‹¬ç«‹ç¼–è¯‘
    // ç¦ç”¨ä¾èµ–ç±»å‹ä¿¡æ¯çš„ç‰¹æ€§
    // é€‚ç”¨äº Babelã€esbuild ç­‰ä¸è¿›è¡Œç±»å‹æ£€æŸ¥çš„ç¼–è¯‘å™¨
    "isolatedModules": true
  }
}

// ä»¥ä¸‹ä»£ç åœ¨ isolatedModules ä¸‹ä¼šæŠ¥é”™
// const enum Color { Red, Green }  // âŒ const enum ä¸èƒ½ç‹¬ç«‹ç¼–è¯‘
// export { Type } from './types';  // âŒ ä»…ç±»å‹å¯¼å‡ºéœ€è¦ type å…³é”®å­—
// export type { Type } from './types';  // âœ… æ­£ç¡®
```

### ğŸ™‹ å¦‚ä½•æ’æŸ¥é…ç½®é—®é¢˜ï¼Ÿ

```bash
# æŸ¥çœ‹æœ€ç»ˆé…ç½®
npx tsc --showConfig

# æŸ¥çœ‹å°†è¦ç¼–è¯‘çš„æ–‡ä»¶
npx tsc --listFiles

# è¯¦ç»†è¯Šæ–­
npx tsc --extendedDiagnostics
```

## æ€»ç»“

| é…ç½®ç±»åˆ« | å…³é”®é€‰é¡¹                 | ç”¨é€”               |
| -------- | ------------------------ | ------------------ |
| ç›®æ ‡     | target, lib              | ç¼–è¯‘ç›®æ ‡å’Œå¯ç”¨ API |
| æ¨¡å—     | module, moduleResolution | æ¨¡å—ç³»ç»Ÿ           |
| ä¸¥æ ¼     | strict, strictNullChecks | ï¿½ï¿½å‹æ£€æŸ¥ä¸¥æ ¼ç¨‹åº¦   |
| è¾“å‡º     | outDir, declaration      | è¾“å‡ºæ–‡ä»¶é…ç½®       |
| è·¯å¾„     | baseUrl, paths           | è·¯å¾„åˆ«å           |
| é¡¹ç›®     | references, composite    | å¤šé¡¹ç›®æ„å»º         |

ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†å­¦ä¹ ç±»å‹ä½“æ“å…¥é—¨ï¼Œäº†è§£é«˜çº§ç±»å‹ç¼–ç¨‹æŠ€å·§ã€‚
