---
title: 表单进阶
description: 深入学习 HTML 表单的进阶内容，包括 select ��拉框、textarea 文本域、fieldset 分组、datalist 自动完成和表单验证
pubDate: 2025-11-28
toc: true
ogImage: true
category: HTML
---

上一篇介绍了表单的基础知识和 input 元素。这篇继续学习更多表单控件和高级特性。

## select 下拉选择框

`<select>` 创建下拉选择框：

```html
<label for="city">城市</label>
<select id="city" name="city">
  <option value="">请选择</option>
  <option value="beijing">北京</option>
  <option value="shanghai">上海</option>
  <option value="guangzhou">广州</option>
</select>
```

### option 元素

`<option>` 定义选项：

```html
<option value="beijing">北京</option>
```

- `value`：提交的值
- 标签内容：显示的文本

如果没有 value，则提交标签内容：

```html
<!-- 提交值是 "北京" -->
<option>北京</option>
```

### 默认选中

```html
<select name="city">
  <option value="beijing">北京</option>
  <option value="shanghai" selected>上海</option>
  <option value="guangzhou">广州</option>
</select>
```

### 禁用选项

```html
<select name="city">
  <option value="" disabled selected>请选择城市</option>
  <option value="beijing">北京</option>
  <option value="shanghai">上海</option>
</select>
```

常用于占位提示。

### optgroup 选项分组

```html
<select name="city">
  <optgroup label="华北">
    <option value="beijing">北京</option>
    <option value="tianjin">天津</option>
  </optgroup>
  <optgroup label="华东">
    <option value="shanghai">上海</option>
    <option value="hangzhou">杭州</option>
  </optgroup>
</select>
```

`<optgroup>` 的 `label` 属性显示分组名称，分组本身不可选择。

### 多选

```html
<select name="skills" multiple size="5">
  <option value="html">HTML</option>
  <option value="css">CSS</option>
  <option value="js">JavaScript</option>
  <option value="react">React</option>
  <option value="vue">Vue</option>
</select>
```

- `multiple`：允许多选（按住 Ctrl/Cmd 点击）
- `size`：可见选项数量

多选时，表单会提交多个同名的值。

### select 的属性

| 属性        | 说明       |
| ----------- | ---------- |
| `name`      | 字段名     |
| `id`        | 关联 label |
| `required`  | 必选       |
| `disabled`  | 禁用       |
| `multiple`  | 多选       |
| `size`      | 可见选项数 |
| `autofocus` | 自动聚焦   |

## textarea 多行文本

`<textarea>` 用于输入多行文本：

```html
<label for="bio">个人简介</label>
<textarea id="bio" name="bio" rows="5" cols="40">
默认内容
</textarea>
```

### 尺寸控制

```html
<!-- 通过属性 -->
<textarea rows="10" cols="50"></textarea>

<!-- 通过 CSS（��荐） -->
<textarea style="width: 100%; height: 200px;"></textarea>
```

### 禁止拖动调整大小

```css
textarea {
  resize: none; /* 禁止调整 */
  resize: vertical; /* 只能垂直调整 */
  resize: horizontal; /* 只能水平调整 */
  resize: both; /* 两个方向都可以（默认） */
}
```

### textarea 的属性

| 属性          | 说明                |
| ------------- | ------------------- |
| `name`        | 字段名              |
| `rows`        | 可见行数            |
| `cols`        | 可见列数            |
| `placeholder` | 占位文字            |
| `required`    | 必填                |
| `disabled`    | 禁用                |
| `readonly`    | 只读                |
| `maxlength`   | 最大字符数          |
| `minlength`   | 最小字符数          |
| `wrap`        | 换行方式：soft/hard |

### wrap 属性

```html
<!-- soft���默认）：提交时不包含自动换行的换行符 -->
<textarea wrap="soft"></textarea>

<!-- hard：提交时包含自动换行的换行符，需要设置 cols -->
<textarea wrap="hard" cols="40"></textarea>
```

## fieldset 和 legend 表单分组

`<fieldset>` 将相关控件分组，`<legend>` 提供分组标题：

```html
<form>
  <fieldset>
    <legend>个人信息</legend>

    <label for="name">姓名</label>
    <input type="text" id="name" name="name" />

    <label for="email">邮箱</label>
    <input type="email" id="email" name="email" />
  </fieldset>

  <fieldset>
    <legend>账户设置</legend>

    <label for="username">用户名</label>
    <input type="text" id="username" name="username" />

    <label for="password">密码</label>
    <input type="password" id="password" name="password" />
  </fieldset>
</form>
```

### 禁用整个分组

```html
<fieldset disabled>
  <legend>不可编辑</legend>
  <input type="text" name="readonly_field" />
</fieldset>
```

`disabled` 会禁用 fieldset 内的所有控件。

### 样式定制

```css
fieldset {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
}

legend {
  padding: 0 10px;
  font-weight: bold;
  color: #333;
}
```

## datalist 输入建议

`<datalist>` 为 input 提供预定义的选项列表：

```html
<label for="browser">浏览器</label>
<input type="text" id="browser" name="browser" list="browsers" />

<datalist id="browsers">
  <option value="Chrome"></option>
  <option value="Firefox"></option>
  <option value="Safari"></option>
  <option value="Edge"></option>
</datalist>
```

用户可以从列表中选择，也可以输入自定义值。

### 与 select 的区别

| 特性     | select         | datalist        |
| -------- | -------------- | --------------- |
| 用户输入 | 只能选择预设值 | 可以输入任意值  |
| 搜索过滤 | 无             | 自动过滤匹配项  |
| 显示方式 | 下拉框         | 输入框+建议列表 |
| 多选     | 支持           | 不支持          |

### datalist 的高级用法

```html
<!-- 数字范围建议 -->
<input type="range" list="tickmarks" min="0" max="100" />
<datalist id="tickmarks">
  <option value="0"></option>
  <option value="25"></option>
  <option value="50"></option>
  <option value="75"></option>
  <option value="100"></option>
</datalist>

<!-- 颜色建议 -->
<input type="color" list="colors" />
<datalist id="colors">
  <option value="#ff0000"></option>
  <option value="#00ff00"></option>
  <option value="#0000ff"></option>
</datalist>
```

## output 元素

`<output>` 显示计算结果或操作结果：

```html
<form oninput="result.value = parseInt(a.value) + parseInt(b.value)">
  <input type="number" id="a" value="0" /> +
  <input type="number" id="b" value="0" /> =
  <output name="result" for="a b">0</output>
</form>
```

- `for` 属性列出相关的控件 ID（空格分隔）
- 内容由 JavaScript 动态更新

## meter 和 progress

### meter 度量

`<meter>` 表示已知范围内的标量值：

```html
<!-- 磁盘使用量 -->
<label for="disk">磁盘使用</label>
<meter id="disk" value="70" min="0" max="100" low="30" high="80" optimum="50">
  70%
</meter>

<!-- 分数 -->
<meter value="0.8">80%</meter>
```

属性：

- `min`、`max`：范围
- `value`：当前值
- `low`、`high`：低/高阈值
- `optimum`：最佳值

浏览器会根据这些值显示不同颜色。

### progress 进度条

`<progress>` 表示任务完成进度：

```html
<!-- 确定进度 -->
<label for="download">下载进度</label>
<progress id="download" value="60" max="100">60%</progress>

<!-- 不确定进度（加载中） -->
<progress>加载中...</progress>
```

没有 value 时显示不确定状态（动画）。

### meter vs progress

| ��素         | 用途         | 示例                         |
| ------------ | ------------ | ---------------------------- |
| `<meter>`    | 静态测量值   | 磁盘空间、电池电量、考试分数 |
| `<progress>` | 动态完成进度 | 文件上传、任务完成度         |

## 表单验证

HTML5 ���供了内置的表单验证功能。

### 验证属性

```html
<!-- 必填 -->
<input type="text" required />

<!-- 最小/最大长度 -->
<input type="text" minlength="3" maxlength="20" />

<!-- 数值范围 -->
<input type="number" min="0" max="100" />

<!-- 正则匹配 -->
<input type="text" pattern="[A-Za-z]{3}" />

<!-- 邮箱格式 -->
<input type="email" />

<!-- URL 格式 -->
<input type="url" />
```

### 验证伪类

```css
/* 有效 */
input:valid {
  border-color: green;
}

/* 无效 */
input:invalid {
  border-color: red;
}

/* 必填但为空 */
input:required:invalid {
  border-color: orange;
}

/* 可选且有值 */
input:optional:valid {
  border-color: blue;
}

/* 在范围内/外 */
input:in-range {
  background: lightgreen;
}

input:out-of-range {
  background: lightcoral;
}
```

### 自定义验证消息

```html
<input type="text" required pattern="[A-Za-z]+" title="只能输入英文字母" />
```

`title` 属性会作为验证失败时的提示信息。

### JavaScript 验证 API

```javascript
const input = document.querySelector('input')

// 检查有效性
input.checkValidity() // 返回 true/false
input.reportValidity() // 返回 true/false 并显示提示

// 获取验证状态
input.validity.valid // 是否有效
input.validity.valueMissing // required 但为空
input.validity.typeMismatch // 类型不匹配（如 email）
input.validity.patternMismatch // 不匹配 pattern
input.validity.tooLong // 超过 maxlength
input.validity.tooShort // 少于 minlength
input.validity.rangeOverflow // 超过 max
input.validity.rangeUnderflow // 低于 min
input.validity.stepMismatch // 不符合 step

// 自定义错误消息
input.setCustomValidity('自定义错误消息')
input.setCustomValidity('') // 清除错误
```

### 完整验证示例

```html
<form id="registerForm">
  <div class="form-group">
    <label for="username">用户名</label>
    <input
      type="text"
      id="username"
      name="username"
      required
      minlength="3"
      maxlength="20"
      pattern="[a-zA-Z0-9_]+"
      title="3-20位字母、数字或下划线"
    />
    <span class="error-message"></span>
  </div>

  <div class="form-group">
    <label for="email">邮箱</label>
    <input type="email" id="email" name="email" required />
    <span class="error-message"></span>
  </div>

  <div class="form-group">
    <label for="password">密码</label>
    <input
      type="password"
      id="password"
      name="password"
      required
      minlength="8"
      pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
      title="至少8位，包含大小写字母和数字"
    />
    <span class="error-message"></span>
  </div>

  <button type="submit">注册</button>
</form>
```

```css
.form-group input:invalid:not(:placeholder-shown) {
  border-color: red;
}

.form-group input:valid {
  border-color: green;
}

.form-group input:invalid:not(:placeholder-shown) + .error-message::before {
  content: '✗ 格式不正确';
  color: red;
}

.form-group input:valid + .error-message::before {
  content: '✓';
  color: green;
}
```

## 无障碍最佳实践

### 使用 label

每个控件都应该有关联的 label：

```html
<label for="name">姓名</label> <input type="text" id="name" name="name" />
```

### 错误提示关联

```html
<label for="email">邮箱</label>
<input
  type="email"
  id="email"
  name="email"
  aria-describedby="email-error"
  aria-invalid="true"
/>
<span id="email-error" role="alert">请输入有效的邮箱地址</span>
```

### 必填字段标识

```html
<label for="name">
  姓名 <span aria-hidden="true">*</span>
  <span class="sr-only">（必填）</span>
</label>
<input type="text" id="name" required aria-required="true" />
```

### fieldset 分组

使用 fieldset 将相关控件分组，屏幕阅读器会朗读 legend：

```html
<fieldset>
  <legend>收货地址</legend>
  <!-- 地址相关字段 -->
</fieldset>
```

### 单选/复选按钮组

```html
<fieldset>
  <legend>支付方式</legend>

  <input type="radio" id="alipay" name="payment" value="alipay" />
  <label for="alipay">支付宝</label>

  <input type="radio" id="wechat" name="payment" value="wechat" />
  <label for="wechat">微信支付</label>
</fieldset>
```

## 完整表单示例

```html
<form action="/register" method="POST" class="register-form">
  <h2>用户注册</h2>

  <fieldset>
    <legend>账户信息</legend>

    <div class="form-group">
      <label for="username">用户名 <span class="required">*</span></label>
      <input
        type="text"
        id="username"
        name="username"
        required
        autocomplete="username"
      />
    </div>

    <div class="form-group">
      <label for="email">邮箱 <span class="required">*</span></label>
      <input
        type="email"
        id="email"
        name="email"
        required
        autocomplete="email"
      />
    </div>

    <div class="form-group">
      <label for="password">密码 <span class="required">*</span></label>
      <input
        type="password"
        id="password"
        name="password"
        required
        minlength="8"
        autocomplete="new-password"
      />
    </div>
  </fieldset>

  <fieldset>
    <legend>个人信息</legend>

    <div class="form-group">
      <label for="nickname">昵称</label>
      <input type="text" id="nickname" name="nickname" />
    </div>

    <div class="form-group">
      <label for="bio">个人简介</label>
      <textarea id="bio" name="bio" rows="4" maxlength="200"></textarea>
    </div>

    <div class="form-group">
      <label for="city">城市</label>
      <select id="city" name="city">
        <option value="">请选择</option>
        <option value="beijing">北京</option>
        <option value="shanghai">上海</option>
        <option value="guangzhou">广州</option>
      </select>
    </div>
  </fieldset>

  <fieldset>
    <legend>通知偏好</legend>

    <div class="checkbox-group">
      <input type="checkbox" id="news" name="subscribe[]" value="news" />
      <label for="news">接收新闻通知</label>
    </div>

    <div class="checkbox-group">
      <input type="checkbox" id="promo" name="subscribe[]" value="promo" />
      <label for="promo">接收优惠信息</label>
    </div>
  </fieldset>

  <div class="form-group">
    <input type="checkbox" id="agree" name="agree" required />
    <label for="agree">
      我已阅读并同意 <a href="/terms" target="_blank">服务条款</a>
    </label>
  </div>

  <button type="submit">注册</button>
</form>
```

## 小结

这篇文章介绍了表单的进阶内容：

- `<select>` 下拉选择框和 `<optgroup>` 分组
- `<textarea>` 多行文本
- `<fieldset>` 和 `<legend>` 表单分组
- `<datalist>` 输入建议
- `<output>` 计算结果
- `<meter>` 和 `<progress>` 度量和进度
- HTML5 表单验证
- 无障碍最佳实践

表单是前端开发中最复杂的部分之一，需要考虑用户体验、数据验证和无障碍访问等多个方面。下一篇会介绍 HTML 元素的常用属性。
