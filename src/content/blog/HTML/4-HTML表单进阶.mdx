---
title: 'HTML è¡¨å•è¿›é˜¶ï¼šéªŒè¯ä¸ç°ä»£ç‰¹æ€§'
description: 'æŒæ¡ HTML5 åŸç”Ÿè¡¨å•éªŒè¯ã€Constraint Validation APIã€FormData å¼‚æ­¥æäº¤ç­‰ç°ä»£è¡¨å•æŠ€æœ¯'
pubDate: 2025-12-03
toc: true
ogImage: true
category: 'HTML'
tags: ['HTML', 'è¡¨å•', 'FormData', 'è¡¨å•éªŒè¯', 'JavaScript']
---

ä¸Šä¸€ç¯‡ä»‹ç»äº†è¡¨å•çš„åŸºç¡€ç»“æ„å’Œæ§ä»¶ï¼Œè¿™ç¯‡æ·±å…¥æ¢è®¨è¡¨å•éªŒè¯å’Œç°ä»£æäº¤æ–¹å¼ã€‚HTML5 æä¾›äº†å¼ºå¤§çš„åŸç”ŸéªŒè¯èƒ½åŠ›ï¼Œé…åˆ JavaScript å¯ä»¥å®ç°ä¼˜é›…çš„ç”¨æˆ·ä½“éªŒã€‚

## ğŸ¯ HTML5 åŸç”ŸéªŒè¯

HTML5 å¼•å…¥äº†å¤šç§éªŒè¯å±æ€§ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ£€æŸ¥å¹¶æç¤ºé”™è¯¯ã€‚

### å¿…å¡«éªŒè¯ `required`

```html
<input type="text" name="username" required />
```

ç”¨æˆ·æäº¤æ—¶å¦‚æœè¯¥å­—æ®µä¸ºç©ºï¼Œæµè§ˆå™¨ä¼šé˜»æ­¢æäº¤å¹¶æ˜¾ç¤ºæç¤ºã€‚

### é•¿åº¦é™åˆ¶

```html
<!-- æœ€å°é•¿åº¦ -->
<input type="text" name="username" minlength="3" />

<!-- æœ€å¤§é•¿åº¦ -->
<input type="text" name="username" maxlength="20" />

<!-- ç»„åˆä½¿ç”¨ -->
<input type="password" name="password" minlength="8" maxlength="32" required />
```

### æ•°å€¼èŒƒå›´

```html
<!-- æœ€å°å€¼ -->
<input type="number" name="age" min="0" />

<!-- æœ€å¤§å€¼ -->
<input type="number" name="age" max="120" />

<!-- æ­¥é•¿ -->
<input type="number" name="quantity" min="0" max="100" step="5" />
<!-- åªèƒ½è¾“å…¥ 0, 5, 10, 15... -->

<!-- æ—¥æœŸèŒƒå›´ -->
<input type="date" name="birthday" min="1900-01-01" max="2025-12-31" />
```

### æ­£åˆ™éªŒè¯ `pattern`

```html
<!-- 6ä½æ•°å­—éªŒè¯ç  -->
<input type="text" name="code" pattern="[0-9]{6}" title="è¯·è¾“å…¥6ä½æ•°å­—éªŒè¯ç " />

<!-- ä¸­å›½æ‰‹æœºå· -->
<input
  type="tel"
  name="phone"
  pattern="1[3-9]\d{9}"
  title="è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·"
/>

<!-- ç”¨æˆ·åï¼šå­—æ¯å¼€å¤´ï¼Œ3-16ä½å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ -->
<input
  type="text"
  name="username"
  pattern="[a-zA-Z][a-zA-Z0-9_]{2,15}"
  title="å­—æ¯å¼€å¤´ï¼Œ3-16ä½å­—æ¯æ•°å­—ä¸‹åˆ’çº¿"
/>
```

ğŸ”¶ **æ³¨æ„**ï¼š`pattern` ä½¿ç”¨ JavaScript æ­£åˆ™è¯­æ³•ï¼Œä¼šè‡ªåŠ¨æ·»åŠ  `^` å’Œ `$` é”šç‚¹ï¼Œæ— éœ€æ‰‹åŠ¨æ·»åŠ ã€‚

### ç±»å‹éªŒè¯

æŸäº› `input` ç±»å‹è‡ªå¸¦éªŒè¯ï¼š

```html
<!-- é‚®ç®±æ ¼å¼éªŒè¯ -->
<input type="email" name="email" />

<!-- URL æ ¼å¼éªŒè¯ -->
<input type="url" name="website" />
```

### éªŒè¯å±æ€§æ±‡æ€»

| å±æ€§        | é€‚ç”¨ç±»å‹                    | è¯´æ˜       |
| ----------- | --------------------------- | ---------- |
| `required`  | æ‰€æœ‰                        | å¿…å¡«       |
| `minlength` | text, password, textarea    | æœ€å°å­—ç¬¦æ•° |
| `maxlength` | text, password, textarea    | æœ€å¤§å­—ç¬¦æ•° |
| `min`       | number, range, date, time   | æœ€å°å€¼     |
| `max`       | number, range, date, time   | æœ€å¤§å€¼     |
| `step`      | number, range, date, time   | æ­¥é•¿       |
| `pattern`   | text, password, tel, search | æ­£åˆ™è¡¨è¾¾å¼ |

## éªŒè¯çŠ¶æ€ä¼ªç±»

CSS å¯ä»¥æ ¹æ®éªŒè¯çŠ¶æ€è®¾ç½®æ ·å¼ï¼š

```css
/* æœ‰æ•ˆè¾“å…¥ */
input:valid {
  border-color: green;
}

/* æ— æ•ˆè¾“å…¥ */
input:invalid {
  border-color: red;
}

/* å¿…å¡«å­—æ®µ */
input:required {
  border-left: 3px solid orange;
}

/* å¯é€‰å­—æ®µ */
input:optional {
  border-left: 3px solid gray;
}

/* åœ¨èŒƒå›´å†… */
input:in-range {
  background-color: #e8f5e9;
}

/* è¶…å‡ºèŒƒå›´ */
input:out-of-range {
  background-color: #ffebee;
}

/* ç”¨æˆ·äº¤äº’åæ‰æ˜¾ç¤ºéªŒè¯çŠ¶æ€ */
input:user-invalid {
  border-color: red;
  background-color: #fff0f0;
}
```

ğŸ”¶ **æ¨è**ï¼šä½¿ç”¨ `:user-invalid`ï¼ˆè¾ƒæ–°ï¼‰ä»£æ›¿ `:invalid`ï¼Œé¿å…é¡µé¢åŠ è½½æ—¶å°±æ˜¾ç¤ºçº¢è‰²é”™è¯¯çŠ¶æ€ã€‚

```css
/* åªåœ¨ç”¨æˆ·è¾“å…¥åæ˜¾ç¤ºé”™è¯¯ */
input:user-invalid {
  border-color: red;
}

/* æ˜¾ç¤ºéªŒè¯å›¾æ ‡ */
input:valid::after {
  content: 'âœ“';
}
```

## Constraint Validation API

JavaScript æä¾›äº†å®Œæ•´çš„éªŒè¯ APIï¼Œå®ç°æ›´çµæ´»çš„éªŒè¯é€»è¾‘ã€‚

### æ£€æŸ¥æœ‰æ•ˆæ€§

```javascript
const input = document.querySelector('#email')
const form = document.querySelector('form')

// æ£€æŸ¥å•ä¸ªå…ƒç´ 
input.checkValidity() // è¿”å› boolean
input.reportValidity() // è¿”å› boolean å¹¶æ˜¾ç¤ºæç¤º

// æ£€æŸ¥æ•´ä¸ªè¡¨å•
form.checkValidity()
form.reportValidity()
```

### ValidityState å¯¹è±¡

æ¯ä¸ªè¡¨å•å…ƒç´ éƒ½æœ‰ `validity` å±æ€§ï¼ŒåŒ…å«è¯¦ç»†çš„éªŒè¯çŠ¶æ€ï¼š

```javascript
const input = document.querySelector('#username')
const validity = input.validity

console.log(validity.valid) // æ˜¯å¦å…¨éƒ¨é€šè¿‡
console.log(validity.valueMissing) // required æœªå¡«
console.log(validity.typeMismatch) // ç±»å‹ä¸åŒ¹é…ï¼ˆemailã€urlï¼‰
console.log(validity.patternMismatch) // æ­£åˆ™ä¸åŒ¹é…
console.log(validity.tooShort) // å°äº minlength
console.log(validity.tooLong) // å¤§äº maxlength
console.log(validity.rangeUnderflow) // å°äº min
console.log(validity.rangeOverflow) // å¤§äº max
console.log(validity.stepMismatch) // ä¸ç¬¦åˆ step
console.log(validity.badInput) // æ— æ³•è§£æï¼ˆå¦‚ number è¾“å…¥äº†å­—æ¯ï¼‰
console.log(validity.customError) // è‡ªå®šä¹‰é”™è¯¯
```

### è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯

```javascript
const password = document.querySelector('#password')
const confirmPassword = document.querySelector('#confirm-password')

confirmPassword.addEventListener('input', () => {
  if (confirmPassword.value !== password.value) {
    confirmPassword.setCustomValidity('ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´')
  } else {
    confirmPassword.setCustomValidity('') // æ¸…é™¤é”™è¯¯
  }
})
```

### å®Œæ•´éªŒè¯ç¤ºä¾‹

```html
<form id="registerForm">
  <div>
    <label for="email">é‚®ç®±</label>
    <input type="email" id="email" name="email" required />
    <span class="error"></span>
  </div>

  <div>
    <label for="password">å¯†ç </label>
    <input
      type="password"
      id="password"
      name="password"
      required
      minlength="8"
      pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$"
    />
    <span class="error"></span>
  </div>

  <button type="submit">æ³¨å†Œ</button>
</form>

<script>
  const form = document.querySelector('#registerForm')

  // è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
  const errorMessages = {
    email: {
      valueMissing: 'è¯·è¾“å…¥é‚®ç®±åœ°å€',
      typeMismatch: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼',
    },
    password: {
      valueMissing: 'è¯·è¾“å…¥å¯†ç ',
      tooShort: 'å¯†ç è‡³å°‘éœ€è¦8ä¸ªå­—ç¬¦',
      patternMismatch: 'å¯†ç å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—',
    },
  }

  // æ˜¾ç¤ºé”™è¯¯
  function showError(input) {
    const errorSpan = input.parentElement.querySelector('.error')
    const messages = errorMessages[input.name]

    for (const [key, message] of Object.entries(messages)) {
      if (input.validity[key]) {
        errorSpan.textContent = message
        return
      }
    }
    errorSpan.textContent = ''
  }

  // å®æ—¶éªŒè¯
  form.querySelectorAll('input').forEach((input) => {
    input.addEventListener('blur', () => showError(input))
    input.addEventListener('input', () => {
      if (!input.validity.valid) {
        showError(input)
      } else {
        input.parentElement.querySelector('.error').textContent = ''
      }
    })
  })

  // æäº¤éªŒè¯
  form.addEventListener('submit', (e) => {
    let isValid = true

    form.querySelectorAll('input').forEach((input) => {
      if (!input.validity.valid) {
        showError(input)
        isValid = false
      }
    })

    if (!isValid) {
      e.preventDefault()
    }
  })
</script>
```

## ç¦ç”¨åŸç”ŸéªŒè¯

æœ‰æ—¶éœ€è¦å®Œå…¨è‡ªå®šä¹‰éªŒè¯é€»è¾‘ï¼š

```html
<!-- ç¦ç”¨æ•´ä¸ªè¡¨å•çš„åŸç”ŸéªŒè¯ -->
<form novalidate>...</form>

<!-- æˆ–é€šè¿‡ JavaScript -->
<script>
  form.noValidate = true
</script>
```

## HTML5 æ–°å¢ Input ç±»å‹

### æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨

```html
<!-- æ—¥æœŸ -->
<input type="date" name="date" value="2025-01-15" />

<!-- æ—¶é—´ -->
<input type="time" name="time" value="14:30" />

<!-- æ—¥æœŸ+æ—¶é—´ -->
<input type="datetime-local" name="datetime" value="2025-01-15T14:30" />

<!-- æœˆä»½ -->
<input type="month" name="month" value="2025-01" />

<!-- å‘¨ -->
<input type="week" name="week" value="2025-W03" />
```

è·å–å€¼ï¼š

```javascript
const dateInput = document.querySelector('input[type="date"]')
console.log(dateInput.value) // "2025-01-15"
console.log(dateInput.valueAsDate) // Date å¯¹è±¡
console.log(dateInput.valueAsNumber) // æ—¶é—´æˆ³
```

### é¢œè‰²é€‰æ‹©å™¨

```html
<input type="color" name="color" value="#3b82f6" />
```

```javascript
const colorInput = document.querySelector('input[type="color"]')
colorInput.addEventListener('input', (e) => {
  document.body.style.backgroundColor = e.target.value
})
```

### èŒƒå›´æ»‘å—

```html
<input type="range" name="volume" min="0" max="100" value="50" step="10" />
<output id="volumeValue">50</output>

<script>
  const range = document.querySelector('input[type="range"]')
  const output = document.querySelector('#volumeValue')
  range.addEventListener('input', () => {
    output.textContent = range.value
  })
</script>
```

### æœç´¢æ¡†

```html
<input type="search" name="q" placeholder="æœç´¢..." />
```

æœç´¢æ¡†åœ¨æŸäº›æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ¸…é™¤æŒ‰é’®ï¼ˆÃ—ï¼‰ï¼ŒæŒ‰ Escape é”®å¯æ¸…ç©ºã€‚

## FormData API

`FormData` æ˜¯å¤„ç†è¡¨å•æ•°æ®çš„ç°ä»£æ–¹å¼ï¼Œç‰¹åˆ«é€‚åˆå¼‚æ­¥æäº¤ã€‚

### åŸºç¡€ç”¨æ³•

```javascript
const form = document.querySelector('form')

// ä»è¡¨å•åˆ›å»º FormData
const formData = new FormData(form)

// è·å–å€¼
formData.get('username') // å•ä¸ªå€¼
formData.getAll('interests') // å¤šä¸ªåŒåå€¼ï¼ˆå¦‚å¤é€‰æ¡†ï¼‰

// æ£€æŸ¥æ˜¯å¦å­˜åœ¨
formData.has('email')

// æ·»åŠ /ä¿®æ”¹å€¼
formData.set('username', 'newValue') // è¦†ç›–
formData.append('tag', 'value') // è¿½åŠ ï¼ˆå…è®¸åŒåå¤šå€¼ï¼‰

// åˆ é™¤
formData.delete('password')

// éå†
for (const [key, value] of formData) {
  console.log(key, value)
}
```

### å¼‚æ­¥æäº¤è¡¨å•

```javascript
const form = document.querySelector('#myForm')

form.addEventListener('submit', async (e) => {
  e.preventDefault()

  const formData = new FormData(form)

  try {
    const response = await fetch('/api/submit', {
      method: 'POST',
      body: formData, // è‡ªåŠ¨è®¾ç½®æ­£ç¡®çš„ Content-Type
    })

    if (response.ok) {
      const result = await response.json()
      console.log('æäº¤æˆåŠŸ:', result)
    } else {
      console.error('æäº¤å¤±è´¥')
    }
  } catch (error) {
    console.error('ç½‘ç»œé”™è¯¯:', error)
  }
})
```

### å‘é€ JSON æ•°æ®

```javascript
const form = document.querySelector('#myForm')

form.addEventListener('submit', async (e) => {
  e.preventDefault()

  const formData = new FormData(form)

  // FormData è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡
  const data = Object.fromEntries(formData)

  // å¤„ç†å¤é€‰æ¡†ç­‰å¤šå€¼å­—æ®µ
  const interests = formData.getAll('interests')
  data.interests = interests

  const response = await fetch('/api/submit', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  })
})
```

### æ–‡ä»¶ä¸Šä¼ 

```html
<form id="uploadForm">
  <input type="file" name="avatar" accept="image/*" />
  <input type="file" name="documents" multiple />
  <button type="submit">ä¸Šä¼ </button>
</form>

<script>
  const form = document.querySelector('#uploadForm')

  form.addEventListener('submit', async (e) => {
    e.preventDefault()

    const formData = new FormData(form)

    // å¯ä»¥æ·»åŠ é¢å¤–æ•°æ®
    formData.append('userId', '12345')

    const response = await fetch('/api/upload', {
      method: 'POST',
      body: formData,
      // ä¸è¦æ‰‹åŠ¨è®¾ç½® Content-Typeï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ·»åŠ  boundary
    })
  })
</script>
```

### ä¸Šä¼ è¿›åº¦

```javascript
function uploadWithProgress(formData, onProgress) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest()

    xhr.upload.addEventListener('progress', (e) => {
      if (e.lengthComputable) {
        const percent = (e.loaded / e.total) * 100
        onProgress(percent)
      }
    })

    xhr.addEventListener('load', () => {
      if (xhr.status === 200) {
        resolve(JSON.parse(xhr.responseText))
      } else {
        reject(new Error('Upload failed'))
      }
    })

    xhr.addEventListener('error', () => reject(new Error('Network error')))

    xhr.open('POST', '/api/upload')
    xhr.send(formData)
  })
}

// ä½¿ç”¨
const formData = new FormData(form)
uploadWithProgress(formData, (percent) => {
  progressBar.style.width = `${percent}%`
  progressText.textContent = `${Math.round(percent)}%`
})
```

## ğŸ¯ å®æˆ˜ï¼šå¸¦éªŒè¯çš„è”ç³»è¡¨å•

ç»¼åˆè¿ç”¨æœ¬æ–‡çŸ¥è¯†ï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„è”ç³»è¡¨å•ï¼š

```html
<!doctype html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è”ç³»æˆ‘ä»¬</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: system-ui, sans-serif;
        padding: 2rem;
      }
      form {
        max-width: 500px;
        margin: 0 auto;
      }
      .form-group {
        margin-bottom: 1.5rem;
      }
      label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid #e2e8f0;
        border-radius: 0.5rem;
        font-size: 1rem;
        transition: border-color 0.2s;
      }
      input:focus,
      textarea:focus,
      select:focus {
        outline: none;
        border-color: #3b82f6;
      }
      input:user-invalid,
      textarea:user-invalid {
        border-color: #ef4444;
      }
      input:user-valid,
      textarea:user-valid {
        border-color: #22c55e;
      }
      .error {
        color: #ef4444;
        font-size: 0.875rem;
        margin-top: 0.25rem;
        min-height: 1.25rem;
      }
      button {
        width: 100%;
        padding: 1rem;
        background: #3b82f6;
        color: white;
        border: none;
        border-radius: 0.5rem;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.2s;
      }
      button:hover {
        background: #2563eb;
      }
      button:disabled {
        background: #94a3b8;
        cursor: not-allowed;
      }
      .success {
        background: #dcfce7;
        color: #166534;
        padding: 1rem;
        border-radius: 0.5rem;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <form id="contactForm" novalidate>
      <h1>è”ç³»æˆ‘ä»¬</h1>

      <div class="form-group">
        <label for="name">å§“å *</label>
        <input
          type="text"
          id="name"
          name="name"
          required
          minlength="2"
          maxlength="50"
          placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å"
        />
        <div class="error" data-for="name"></div>
      </div>

      <div class="form-group">
        <label for="email">é‚®ç®± *</label>
        <input
          type="email"
          id="email"
          name="email"
          required
          placeholder="example@mail.com"
        />
        <div class="error" data-for="email"></div>
      </div>

      <div class="form-group">
        <label for="phone">æ‰‹æœºå·</label>
        <input
          type="tel"
          id="phone"
          name="phone"
          pattern="1[3-9]\d{9}"
          placeholder="å¯é€‰ï¼Œå¦‚ 13800138000"
        />
        <div class="error" data-for="phone"></div>
      </div>

      <div class="form-group">
        <label for="subject">ä¸»é¢˜ *</label>
        <select id="subject" name="subject" required>
          <option value="">è¯·é€‰æ‹©ä¸»é¢˜</option>
          <option value="general">ä¸€èˆ¬å’¨è¯¢</option>
          <option value="support">æŠ€æœ¯æ”¯æŒ</option>
          <option value="feedback">æ„è§åé¦ˆ</option>
          <option value="business">å•†åŠ¡åˆä½œ</option>
        </select>
        <div class="error" data-for="subject"></div>
      </div>

      <div class="form-group">
        <label for="message">ç•™è¨€å†…å®¹ *</label>
        <textarea
          id="message"
          name="message"
          rows="5"
          required
          minlength="10"
          maxlength="1000"
          placeholder="è¯·è¯¦ç»†æè¿°æ‚¨çš„é—®é¢˜æˆ–å»ºè®®..."
        ></textarea>
        <div class="error" data-for="message"></div>
      </div>

      <button type="submit">å‘é€æ¶ˆæ¯</button>
    </form>

    <script>
      const form = document.querySelector('#contactForm')

      // é”™è¯¯æ¶ˆæ¯é…ç½®
      const messages = {
        name: {
          valueMissing: 'è¯·è¾“å…¥å§“å',
          tooShort: 'å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦',
          tooLong: 'å§“åä¸èƒ½è¶…è¿‡50ä¸ªå­—ç¬¦',
        },
        email: {
          valueMissing: 'è¯·è¾“å…¥é‚®ç®±åœ°å€',
          typeMismatch: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼',
        },
        phone: {
          patternMismatch: 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·ï¼ˆå¦‚13800138000ï¼‰',
        },
        subject: {
          valueMissing: 'è¯·é€‰æ‹©ä¸€ä¸ªä¸»é¢˜',
        },
        message: {
          valueMissing: 'è¯·è¾“å…¥ç•™è¨€å†…å®¹',
          tooShort: 'ç•™è¨€å†…å®¹è‡³å°‘éœ€è¦10ä¸ªå­—ç¬¦',
          tooLong: 'ç•™è¨€å†…å®¹ä¸èƒ½è¶…è¿‡1000ä¸ªå­—ç¬¦',
        },
      }

      // è·å–é”™è¯¯æ¶ˆæ¯
      function getErrorMessage(input) {
        const fieldMessages = messages[input.name]
        if (!fieldMessages) return input.validationMessage

        for (const [key, message] of Object.entries(fieldMessages)) {
          if (input.validity[key]) return message
        }
        return ''
      }

      // æ˜¾ç¤º/éšè—é”™è¯¯
      function updateError(input) {
        const errorEl = document.querySelector(`[data-for="${input.name}"]`)
        if (!errorEl) return

        if (input.validity.valid) {
          errorEl.textContent = ''
        } else {
          errorEl.textContent = getErrorMessage(input)
        }
      }

      // ç»‘å®šäº‹ä»¶
      form.querySelectorAll('input, textarea, select').forEach((input) => {
        input.addEventListener('blur', () => updateError(input))
        input.addEventListener('input', () => updateError(input))
      })

      // æäº¤å¤„ç†
      form.addEventListener('submit', async (e) => {
        e.preventDefault()

        // éªŒè¯æ‰€æœ‰å­—æ®µ
        let isValid = true
        form.querySelectorAll('input, textarea, select').forEach((input) => {
          updateError(input)
          if (!input.validity.valid) isValid = false
        })

        if (!isValid) return

        // æäº¤æ•°æ®
        const button = form.querySelector('button')
        button.disabled = true
        button.textContent = 'å‘é€ä¸­...'

        try {
          const formData = new FormData(form)
          const data = Object.fromEntries(formData)

          // æ¨¡æ‹Ÿ API è¯·æ±‚
          await new Promise((resolve) => setTimeout(resolve, 1500))
          console.log('æäº¤æ•°æ®:', data)

          // æˆåŠŸæç¤º
          form.innerHTML = `
          <div class="success">
            <h2>âœ“ å‘é€æˆåŠŸ</h2>
            <p>æ„Ÿè°¢æ‚¨çš„ç•™è¨€ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å›å¤ï¼</p>
          </div>
        `
        } catch (error) {
          button.disabled = false
          button.textContent = 'å‘é€æ¶ˆæ¯'
          alert('å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')
        }
      })
    </script>
  </body>
</html>
```

## å¸¸è§é—®é¢˜

### ğŸ¤” åŸç”ŸéªŒè¯å’Œ JavaScript éªŒè¯æ€ä¹ˆé€‰ï¼Ÿ

- **ç®€å•åœºæ™¯**ï¼šä¼˜å…ˆä½¿ç”¨åŸç”ŸéªŒè¯ï¼Œé›¶ JS ä»£ç å³å¯å·¥ä½œ
- **å¤æ‚åœºæ™¯**ï¼šç”¨ `novalidate` ç¦ç”¨åŸç”ŸéªŒè¯ï¼Œå®Œå…¨ç”¨ JS æ§åˆ¶
- **æ¨èæ–¹æ¡ˆ**ï¼šç»“åˆä½¿ç”¨ï¼ŒåŸç”ŸéªŒè¯ä½œä¸ºç¬¬ä¸€é“é˜²çº¿ï¼ŒJS æä¾›æ›´å¥½çš„ UX

### ğŸ¤” FormData å¯ä»¥å¤„ç†åµŒå¥—å¯¹è±¡å—ï¼Ÿ

`FormData` æœ¬èº«ä¸æ”¯æŒåµŒå¥—ç»“æ„ã€‚å¦‚éœ€å‘é€åµŒå¥— JSONï¼š

```javascript
const formData = new FormData(form)
const data = {
  user: {
    name: formData.get('name'),
    email: formData.get('email'),
  },
  message: formData.get('message'),
}

fetch('/api/submit', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(data),
})
```

### ğŸ¤” å¦‚ä½•å®ç°å®æ—¶éªŒè¯è€Œä¸æ˜¯æäº¤æ—¶éªŒè¯ï¼Ÿ

ä½¿ç”¨ `input` å’Œ `blur` äº‹ä»¶ç»„åˆï¼š

```javascript
// blurï¼šç¦»å¼€è¾“å…¥æ¡†æ—¶éªŒè¯ï¼ˆé¦–æ¬¡éªŒè¯ï¼‰
input.addEventListener('blur', validate)

// inputï¼šè¾“å…¥æ—¶éªŒè¯ï¼ˆå·²æœ‰é”™è¯¯æ—¶å®æ—¶åé¦ˆï¼‰
input.addEventListener('input', () => {
  if (hasError) validate()
})
```

## å‚è€ƒèµ„æ–™

- [MDN: è¡¨å•æ•°æ®æ ¡éªŒ](https://developer.mozilla.org/zh-CN/docs/Learn/Forms/Form_validation)
- [MDN: FormData](https://developer.mozilla.org/zh-CN/docs/Web/API/FormData)
- [MDN: Constraint Validation](https://developer.mozilla.org/en-US/docs/Web/HTML/Constraint_validation)
- [web.dev: è¡¨å•æœ€ä½³å®è·µ](https://web.dev/learn/forms/)
