---
title: SVG 基础
description: 学习 SVG 矢量图形的基础知识，包括基本图形、路径、文本、渐变、滤镜以及与 CSS/JavaScript 的配合使用
pubDate: 2025-11-28
toc: true
ogImage: true
category: HTML
---

SVG（Scalable Vector Graphics）是一种基于 XML 的矢量图形格式。与位图不同，SVG 无论放大多少倍都不会模糊，非常适合图标、Logo、数据可视化等场景。

## SVG 基础

### 内联 SVG

```html
<svg width="200" height="200">
  <circle cx="100" cy="100" r="50" fill="blue" />
</svg>
```

### 作为图片引用

```html
<img src="image.svg" alt="SVG 图片" />
```

### 作为背景图

```css
.icon {
  background-image: url('icon.svg');
}
```

### SVG 的优势

| 特性     | SVG      | 位图（PNG/JPG） |
| -------- | -------- | --------------- |
| 缩放     | 无损     | 模糊            |
| 文件大小 | 通常较小 | 取决于尺寸      |
| DOM 操作 | 支持     | 不支持          |
| CSS 样式 | 支持     | 不支持          |
| 动画     | 支持     | 有限（GIF）     |
| SEO      | 可索引   | 不可            |

## 基本图形

### 矩形 rect

```html
<svg width="200" height="150">
  <!-- 基本矩形 -->
  <rect x="10" y="10" width="80" height="60" fill="blue" />

  <!-- 圆角矩形 -->
  <rect x="110" y="10" width="80" height="60" rx="10" ry="10" fill="red" />

  <!-- 描边矩形 -->
  <rect
    x="10"
    y="80"
    width="80"
    height="60"
    fill="none"
    stroke="green"
    stroke-width="2"
  />
</svg>
```

属性：

- `x`, `y`：左上角坐标
- `width`, `height`：宽高
- `rx`, `ry`：圆角半径

### 圆形 circle

```html
<svg width="200" height="200">
  <circle cx="100" cy="100" r="50" fill="blue" />
</svg>
```

属性：

- `cx`, `cy`：圆心坐标
- `r`：半径

### 椭圆 ellipse

```html
<svg width="200" height="150">
  <ellipse cx="100" cy="75" rx="80" ry="50" fill="orange" />
</svg>
```

属性：

- `cx`, `cy`：圆心坐标
- `rx`：水平半径
- `ry`：垂直半径

### 直线 line

```html
<svg width="200" height="100">
  <line x1="10" y1="10" x2="190" y2="90" stroke="black" stroke-width="2" />
</svg>
```

属性：

- `x1`, `y1`：起点坐标
- `x2`, `y2`：终点坐标

### 折线 polyline

```html
<svg width="200" height="100">
  <polyline
    points="10,90 50,10 90,70 130,30 170,90"
    fill="none"
    stroke="blue"
    stroke-width="2"
  />
</svg>
```

`points` 是一系列坐标点，用空格或逗号分隔。

### 多边形 polygon

```html
<svg width="200" height="200">
  <!-- 三角形 -->
  <polygon points="100,10 190,190 10,190" fill="yellow" stroke="black" />

  <!-- 五边形 -->
  <polygon
    points="100,10 161,73 138,156 62,156 39,73"
    fill="orange"
    stroke="black"
  />
</svg>
```

与 polyline 的区别：polygon 会自动闭合路径。

## 路径 path

`<path>` 是最强大的 SVG 元素，可以绑制任何形状。

### d 属性命令

| 命令 | 说明           | 参数                               |
| ---- | -------------- | ---------------------------------- |
| M    | 移动到         | x y                                |
| L    | 画直线到       | x y                                |
| H    | 水平线到       | x                                  |
| V    | 垂直线到       | y                                  |
| Z    | 闭合路径       | -                                  |
| C    | 三次贝塞尔曲线 | x1 y1 x2 y2 x y                    |
| S    | 平滑三次贝塞尔 | x2 y2 x y                          |
| Q    | 二次贝塞尔曲线 | x1 y1 x y                          |
| T    | 平滑二次贝塞尔 | x y                                |
| A    | 弧线           | rx ry rotation large-arc sweep x y |

大写字母使用绝对坐标，小写字母使用相对坐标。

### 基本路径示例

```html
<svg width="300" height="200">
  <!-- 三角形 -->
  <path d="M 50,150 L 100,50 L 150,150 Z" fill="blue" />

  <!-- 曲线 -->
  <path
    d="M 180,150 Q 230,50 280,150"
    fill="none"
    stroke="red"
    stroke-width="2"
  />
</svg>
```

### 复杂路径示例

```html
<svg width="200" height="200">
  <!-- 心形 -->
  <path
    d="M 100,30
           C 60,0 0,40 0,90
           C 0,150 100,200 100,200
           C 100,200 200,150 200,90
           C 200,40 140,0 100,30"
    fill="red"
  />
</svg>
```

### 弧线命令

```html
<svg width="200" height="200">
  <!--
    A rx ry x-axis-rotation large-arc-flag sweep-flag x y
    rx, ry: 椭圆半径
    x-axis-rotation: X轴旋转角度
    large-arc-flag: 0=小弧, 1=大弧
    sweep-flag: 0=逆时针, 1=顺时针
    x, y: 终点坐标
  -->
  <path
    d="M 50,100 A 50,50 0 0 1 150,100"
    fill="none"
    stroke="blue"
    stroke-width="2"
  />
  <path
    d="M 50,100 A 50,50 0 1 1 150,100"
    fill="none"
    stroke="red"
    stroke-width="2"
  />
</svg>
```

## 文本 text

```html
<svg width="300" height="100">
  <text x="10" y="40" font-size="24" fill="black">Hello SVG!</text>

  <!-- 带样式 -->
  <text
    x="10"
    y="80"
    font-family="Arial"
    font-size="18"
    fill="blue"
    font-weight="bold"
  >
    Styled Text
  </text>
</svg>
```

### 文本路径

让文本沿路径排列：

```html
<svg width="300" height="150">
  <defs>
    <path id="curve" d="M 10,100 Q 150,0 290,100" />
  </defs>

  <text font-size="20" fill="blue">
    <textPath href="#curve">Text along a curve</textPath>
  </text>

  <!-- 显示路��（可选） -->
  <path d="M 10,100 Q 150,0 290,100" fill="none" stroke="#ccc" />
</svg>
```

### tspan 文本片段

```html
<svg width="300" height="100">
  <text x="10" y="50">
    这是
    <tspan fill="red" font-weight="bold">红色加粗</tspan>
    文本
  </text>
</svg>
```

## 分组和复用

### g 分组

```html
<svg width="200" height="200">
  <g fill="blue" stroke="black" stroke-width="2">
    <rect x="10" y="10" width="50" height="50" />
    <rect x="70" y="10" width="50" height="50" />
    <rect x="130" y="10" width="50" height="50" />
  </g>
</svg>
```

`<g>` 元素上的属性会应用到所有子元素。

### defs 和 use 复用

```html
<svg width="300" height="100">
  <defs>
    <circle id="myCircle" r="20" fill="blue" />
  </defs>

  <use href="#myCircle" x="50" y="50" />
  <use href="#myCircle" x="100" y="50" fill="red" />
  <use href="#myCircle" x="150" y="50" fill="green" />
</svg>
```

`<defs>` 中的元素不会渲染，只作为模板供 `<use>` 引用。

### symbol

```html
<svg>
  <defs>
    <symbol id="icon-star" viewBox="0 0 24 24">
      <path
        d="M12,2 L15,9 L22,9 L16,14 L18,22 L12,17 L6,22 L8,14 L2,9 L9,9 Z"
      />
    </symbol>
  </defs>

  <use href="#icon-star" x="10" y="10" width="24" height="24" fill="gold" />
  <use href="#icon-star" x="50" y="10" width="48" height="48" fill="gold" />
</svg>
```

`<symbol>` 类似 `<g>`，但可以定义 viewBox。

## 渐变

### 线性渐变

```html
<svg width="200" height="100">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="red" />
      <stop offset="50%" stop-color="yellow" />
      <stop offset="100%" stop-color="green" />
    </linearGradient>
  </defs>

  <rect x="10" y="10" width="180" height="80" fill="url(#grad1)" />
</svg>
```

### 径向渐变

```html
<svg width="200" height="200">
  <defs>
    <radialGradient id="grad2" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="white" />
      <stop offset="100%" stop-color="blue" />
    </radialGradient>
  </defs>

  <circle cx="100" cy="100" r="80" fill="url(#grad2)" />
</svg>
```

## 滤镜

```html
<svg width="300" height="150">
  <defs>
    <!-- 模糊滤镜 -->
    <filter id="blur">
      <feGaussianBlur in="SourceGraphic" stdDeviation="5" />
    </filter>

    <!-- 阴影滤镜 -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow
        dx="4"
        dy="4"
        stdDeviation="4"
        flood-color="rgba(0,0,0,0.5)"
      />
    </filter>
  </defs>

  <rect x="20" y="20" width="80" height="60" fill="blue" filter="url(#blur)" />
  <rect
    x="150"
    y="20"
    width="80"
    height="60"
    fill="red"
    filter="url(#shadow)"
  />
</svg>
```

常用滤镜：

- `feGaussianBlur`：高斯模糊
- `feDropShadow`：阴影
- `feColorMatrix`：颜色矩阵
- `feBlend`：混合
- `feMorphology`：形态变换

## 变换

```html
<svg width="300" height="200">
  <!-- 平移 -->
  <rect
    x="0"
    y="0"
    width="50"
    height="30"
    fill="blue"
    transform="translate(20, 20)"
  />

  <!-- 旋转 -->
  <rect
    x="100"
    y="50"
    width="50"
    height="30"
    fill="red"
    transform="rotate(30, 125, 65)"
  />

  <!-- 缩放 -->
  <rect
    x="200"
    y="50"
    width="50"
    height="30"
    fill="green"
    transform="scale(1.5)"
  />

  <!-- 组合变换 -->
  <rect
    x="0"
    y="0"
    width="50"
    height="30"
    fill="orange"
    transform="translate(50, 150) rotate(45) scale(0.8)"
  />
</svg>
```

## CSS 样式

SVG 可以使用 CSS 样式：

```html
<svg width="200" height="200">
  <style>
    .my-circle {
      fill: blue;
      stroke: black;
      stroke-width: 2;
      transition: fill 0.3s;
    }
    .my-circle:hover {
      fill: red;
    }
  </style>

  <circle class="my-circle" cx="100" cy="100" r="50" />
</svg>
```

外部 CSS：

```css
/* styles.css */
svg circle {
  fill: blue;
}

svg circle:hover {
  fill: red;
}
```

## JavaScript 操作

```javascript
const svg = document.querySelector('svg')
const circle = document.querySelector('circle')

// 修改属性
circle.setAttribute('r', 60)
circle.setAttribute('fill', 'green')

// 动态创建元素
const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect')
rect.setAttribute('x', 10)
rect.setAttribute('y', 10)
rect.setAttribute('width', 100)
rect.setAttribute('height', 50)
rect.setAttribute('fill', 'blue')
svg.appendChild(rect)

// 事件监听
circle.addEventListener('click', () => {
  circle.setAttribute('fill', 'red')
})
```

## SVG 动画

### CSS 动画

```html
<svg width="200" height="200">
  <style>
    @keyframes pulse {
      0%,
      100% {
        r: 50;
      }
      50% {
        r: 60;
      }
    }
    circle {
      animation: pulse 1s infinite;
    }
  </style>
  <circle cx="100" cy="100" r="50" fill="blue" />
</svg>
```

### SMIL 动画

```html
<svg width="200" height="200">
  <circle cx="100" cy="100" r="50" fill="blue">
    <!-- 属性动画 -->
    <animate
      attributeName="r"
      values="50;60;50"
      dur="1s"
      repeatCount="indefinite"
    />

    <!-- 颜色动画 -->
    <animate
      attributeName="fill"
      values="blue;red;blue"
      dur="2s"
      repeatCount="indefinite"
    />
  </circle>
</svg>
```

### 路径动画

```html
<svg width="300" height="200">
  <path
    id="motionPath"
    d="M 50,100 Q 150,50 250,100"
    fill="none"
    stroke="#ccc"
  />

  <circle r="10" fill="blue">
    <animateMotion dur="2s" repeatCount="indefinite">
      <mpath href="#motionPath" />
    </animateMotion>
  </circle>
</svg>
```

## viewBox 和坐标系统

```html
<!-- viewBox="minX minY width height" -->
<svg width="400" height="200" viewBox="0 0 100 50">
  <rect x="0" y="0" width="100" height="50" fill="blue" />
</svg>
```

viewBox 定义了 SVG 的内部坐标系统：

- 内部坐标：100 × 50
- 显示尺寸：400 × 200
- 图形会自动缩放

### preserveAspectRatio

```html
<svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet"></svg>
```

- `meet`：保持比例，完整显示
- `slice`：保持比例，裁剪多余部分
- `none`：不保持比例，拉伸填充

## 实战：图标系统

```html
<!-- 图标定义（通常放在页面顶部或单独的文件中） -->
<svg style="display: none;">
  <symbol id="icon-home" viewBox="0 0 24 24">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
  </symbol>
  <symbol id="icon-search" viewBox="0 0 24 24">
    <path
      d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
    />
  </symbol>
</svg>

<!-- 使用图标 -->
<svg class="icon"><use href="#icon-home"></use></svg>
<svg class="icon"><use href="#icon-search"></use></svg>

<style>
  .icon {
    width: 24px;
    height: 24px;
    fill: currentColor;
  }
</style>
```

## 小结

这篇文章介绍了 SVG 的基础知识：

- **基本图形**：rect、circle、ellipse、line、polyline、polygon
- **路径**：path 元素和 d 属性命令
- **文本**：text、textPath、tspan
- **分组复用**：g、defs、use、symbol
- **渐变滤镜**：linearGradient、radialGradient、filter
- **变换**：translate、rotate、scale
- **CSS 和 JavaScript**：样式和交互
- **动画**：CSS 动画、SMIL 动画
- **viewBox**：坐标系统控制

SVG 非常适合图标、Logo、简单图表等场景，下一篇会介绍 Web 存储。
