---
title: å¯¼èˆªä¸é“¾æ¥
description: æŒæ¡ Next.js å¯¼èˆªç³»ç»Ÿï¼Œæ·±å…¥ç†è§£ Link ç»„ä»¶ã€useRouter é’©å­ä¸é¢„å–ç­–ç•¥
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'å¯¼èˆª', 'Link', 'useRouter', 'é¢„å–']
---

ğŸ™‹ å¦‚ä½•åœ¨ Next.js ä¸­å®ç°é¡µé¢è·³è½¬ï¼ŸLink ç»„ä»¶å’Œ `router.push` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿé¢„å–æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

## Link ç»„ä»¶

Link æ˜¯ Next.js æä¾›çš„å¯¼èˆªç»„ä»¶ï¼Œæ”¯æŒå®¢æˆ·ç«¯å¯¼èˆªå’Œé¢„å–ã€‚

### åŸºç¡€ç”¨æ³•

```tsx
// components/Nav.tsx
// Next.js 15.x
import Link from 'next/link'

export default function Nav() {
  return (
    <nav className="flex gap-4">
      <Link href="/">é¦–é¡µ</Link>
      <Link href="/about">å…³äº</Link>
      <Link href="/blog">åšå®¢</Link>
    </nav>
  )
}
```

### åŠ¨æ€è·¯ç”±é“¾æ¥

```tsx
// components/PostLink.tsx
// Next.js 15.x
import Link from 'next/link'

interface Post {
  id: string
  slug: string
  title: string
}

export default function PostLink({ post }: { post: Post }) {
  return <Link href={`/blog/${post.slug}`}>{post.title}</Link>
}

// ä½¿ç”¨å¯¹è±¡å½¢å¼
export function PostLinkObject({ post }: { post: Post }) {
  return (
    <Link
      href={{
        pathname: '/blog/[slug]',
        query: { slug: post.slug },
      }}
    >
      {post.title}
    </Link>
  )
}
```

### å¸¦æŸ¥è¯¢å‚æ•°

```tsx
// components/SearchLink.tsx
// Next.js 15.x
import Link from 'next/link'

export default function SearchLink() {
  return (
    <div className="flex gap-4">
      <Link href="/search?q=next">æœç´¢ Next</Link>

      <Link
        href={{
          pathname: '/search',
          query: { q: 'react', page: '1' },
        }}
      >
        æœç´¢ React
      </Link>
    </div>
  )
}
```

## Link ç»„ä»¶å±æ€§

### replace

æ›¿æ¢å†å²è®°å½•è€Œéæ·»åŠ ï¼š

```tsx
<Link href="/login" replace>
  ç™»å½•ï¼ˆä¸æ·»åŠ å†å²è®°å½•ï¼‰
</Link>
```

### scroll

æ§åˆ¶å¯¼èˆªåæ˜¯å¦æ»šåŠ¨åˆ°é¡¶éƒ¨ï¼š

```tsx
<Link href="/page" scroll={false}>
  å¯¼èˆªä½†ä¸æ»šåŠ¨
</Link>
```

### prefetch

æ§åˆ¶é¢„å–è¡Œä¸ºï¼š

```tsx
// é»˜è®¤ï¼šåœ¨è§†å£å†…æ—¶é¢„å–
<Link href="/page">é»˜è®¤é¢„å–</Link>

// ç¦ç”¨é¢„å–
<Link href="/page" prefetch={false}>
  ç¦ç”¨é¢„å–
</Link>
```

### è‡ªå®šä¹‰ç»„ä»¶åŒ…è£…

```tsx
// components/Button.tsx
// Next.js 15.x
import Link from 'next/link'
import { forwardRef } from 'react'

interface ButtonLinkProps {
  href: string
  children: React.ReactNode
  variant?: 'primary' | 'secondary'
}

const ButtonLink = forwardRef<HTMLAnchorElement, ButtonLinkProps>(
  ({ href, children, variant = 'primary' }, ref) => {
    const styles = {
      primary: 'bg-blue-600 text-white',
      secondary: 'border border-gray-300',
    }

    return (
      <Link
        href={href}
        ref={ref}
        className={`px-4 py-2 rounded ${styles[variant]}`}
      >
        {children}
      </Link>
    )
  }
)

ButtonLink.displayName = 'ButtonLink'

export default ButtonLink
```

## useRouter é’©å­

### åŸºç¡€å¯¼èˆª

```tsx
// components/Navigation.tsx
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'

export default function Navigation() {
  const router = useRouter()

  return (
    <div className="flex gap-4">
      <button onClick={() => router.push('/dashboard')}>å‰å¾€ä»ªè¡¨ç›˜</button>
      <button onClick={() => router.replace('/login')}>è·³è½¬ç™»å½•ï¼ˆæ›¿æ¢ï¼‰</button>
      <button onClick={() => router.back()}>è¿”å›</button>
      <button onClick={() => router.forward()}>å‰è¿›</button>
    </div>
  )
}
```

### å¸¦å‚æ•°å¯¼èˆª

```tsx
// components/SearchForm.tsx
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'
import { useState } from 'react'

export default function SearchForm() {
  const router = useRouter()
  const [query, setQuery] = useState('')

  const handleSearch = () => {
    const params = new URLSearchParams()
    params.set('q', query)
    router.push(`/search?${params.toString()}`)
  }

  return (
    <div className="flex gap-2">
      <input
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="æœç´¢..."
        className="border rounded px-3 py-2"
      />
      <button
        onClick={handleSearch}
        className="bg-blue-600 text-white px-4 py-2 rounded"
      >
        æœç´¢
      </button>
    </div>
  )
}
```

### router.refresh()

åˆ·æ–°å½“å‰è·¯ç”±çš„æœåŠ¡ç«¯ç»„ä»¶æ•°æ®ï¼š

```tsx
// components/RefreshButton.tsx
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'

export default function RefreshButton() {
  const router = useRouter()

  const handleRefresh = async () => {
    // è§¦å‘æŸä¸ªæ“ä½œååˆ·æ–°æ•°æ®
    await fetch('/api/update', { method: 'POST' })
    router.refresh() // é‡æ–°è·å–æœåŠ¡ç«¯æ•°æ®
  }

  return <button onClick={handleRefresh}>åˆ·æ–°æ•°æ®</button>
}
```

## å…¶ä»–å¯¼èˆªé’©å­

### usePathname

è·å–å½“å‰è·¯å¾„ï¼š

```tsx
// components/ActiveLink.tsx
// Next.js 15.x
'use client'

import Link from 'next/link'
import { usePathname } from 'next/navigation'

interface NavLinkProps {
  href: string
  children: React.ReactNode
}

export default function NavLink({ href, children }: NavLinkProps) {
  const pathname = usePathname()
  const isActive = pathname === href

  return (
    <Link
      href={href}
      className={isActive ? 'text-blue-600 font-bold' : 'text-gray-600'}
    >
      {children}
    </Link>
  )
}
```

### useSearchParams

è·å–æŸ¥è¯¢å‚æ•°ï¼š

```tsx
// components/Pagination.tsx
// Next.js 15.x
'use client'

import { useSearchParams, usePathname, useRouter } from 'next/navigation'

export default function Pagination({ totalPages }: { totalPages: number }) {
  const searchParams = useSearchParams()
  const pathname = usePathname()
  const router = useRouter()

  const currentPage = Number(searchParams.get('page')) || 1

  const goToPage = (page: number) => {
    const params = new URLSearchParams(searchParams.toString())
    params.set('page', page.toString())
    router.push(`${pathname}?${params.toString()}`)
  }

  return (
    <div className="flex gap-2">
      <button
        onClick={() => goToPage(currentPage - 1)}
        disabled={currentPage <= 1}
      >
        ä¸Šä¸€é¡µ
      </button>
      <span>
        {currentPage} / {totalPages}
      </span>
      <button
        onClick={() => goToPage(currentPage + 1)}
        disabled={currentPage >= totalPages}
      >
        ä¸‹ä¸€é¡µ
      </button>
    </div>
  )
}
```

### useParams

è·å–åŠ¨æ€è·¯ç”±å‚æ•°ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼š

```tsx
// app/blog/[slug]/components/ShareButton.tsx
// Next.js 15.x
'use client'

import { useParams } from 'next/navigation'

export default function ShareButton() {
  const params = useParams<{ slug: string }>()

  const shareUrl = `https://example.com/blog/${params.slug}`

  return (
    <button onClick={() => navigator.clipboard.writeText(shareUrl)}>
      å¤åˆ¶é“¾æ¥
    </button>
  )
}
```

## é¢„å–ç­–ç•¥

### é»˜è®¤è¡Œä¸º

- **Link ç»„ä»¶**ï¼šåœ¨è§†å£ä¸­æ—¶è‡ªåŠ¨é¢„å–ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- **router.prefetch()**ï¼šæ‰‹åŠ¨è§¦å‘é¢„å–

### é¢„å–ç±»å‹

```tsx
// Next.js 15 ä¸­é¢„å–çš„æ•°æ®
// 1. é™æ€è·¯ç”±ï¼šé¢„å–å®Œæ•´é¡µé¢æ•°æ®
// 2. åŠ¨æ€è·¯ç”±ï¼šé¢„å–åˆ°ç¬¬ä¸€ä¸ª loading.tsx è¾¹ç•Œ
```

### æ‰‹åŠ¨é¢„å–

```tsx
// components/ProductCard.tsx
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'
import { useEffect } from 'react'

interface Product {
  id: string
  name: string
}

export default function ProductCard({ product }: { product: Product }) {
  const router = useRouter()

  // é¼ æ ‡æ‚¬åœæ—¶é¢„å–
  const handleMouseEnter = () => {
    router.prefetch(`/products/${product.id}`)
  }

  return (
    <div
      onMouseEnter={handleMouseEnter}
      onClick={() => router.push(`/products/${product.id}`)}
      className="cursor-pointer p-4 border rounded hover:shadow"
    >
      <h3>{product.name}</h3>
    </div>
  )
}
```

### ç¦ç”¨é¢„å–åœºæ™¯

```tsx
// å¤§é‡é“¾æ¥æ—¶ç¦ç”¨é¢„å–èŠ‚çœå¸¦å®½
export default function LongList({ items }) {
  return (
    <ul>
      {items.map((item) => (
        <li key={item.id}>
          <Link href={`/item/${item.id}`} prefetch={false}>
            {item.name}
          </Link>
        </li>
      ))}
    </ul>
  )
}
```

## redirect å‡½æ•°

æœåŠ¡ç«¯é‡å®šå‘ï¼š

```tsx
// app/old-page/page.tsx
// Next.js 15.x
import { redirect } from 'next/navigation'

export default function OldPage() {
  redirect('/new-page')
}
```

```tsx
// app/dashboard/page.tsx
// Next.js 15.x
import { redirect } from 'next/navigation'
import { getSession } from '@/lib/auth'

export default async function DashboardPage() {
  const session = await getSession()

  if (!session) {
    redirect('/login')
  }

  return <div>æ¬¢è¿, {session.user.name}</div>
}
```

### permanentRedirect

æ°¸ä¹…é‡å®šå‘ï¼ˆ301ï¼‰ï¼š

```tsx
import { permanentRedirect } from 'next/navigation'

export default function OldRoute() {
  permanentRedirect('/new-route')
}
```

## å¯¼èˆªäº‹ä»¶

### ç›‘å¬è·¯ç”±å˜åŒ–

```tsx
// components/RouteChangeListener.tsx
// Next.js 15.x
'use client'

import { usePathname, useSearchParams } from 'next/navigation'
import { useEffect } from 'react'

export default function RouteChangeListener() {
  const pathname = usePathname()
  const searchParams = useSearchParams()

  useEffect(() => {
    const url = `${pathname}${searchParams.toString() ? `?${searchParams.toString()}` : ''}`
    console.log('è·¯ç”±å˜åŒ–:', url)

    // å¯ä»¥åœ¨è¿™é‡Œå‘é€åˆ†ææ•°æ®
    // analytics.pageView(url)
  }, [pathname, searchParams])

  return null
}
```

### NProgress è¿›åº¦æ¡

```tsx
// components/ProgressBar.tsx
// Next.js 15.x
'use client'

import { useEffect } from 'react'
import { usePathname, useSearchParams } from 'next/navigation'
import NProgress from 'nprogress'
import 'nprogress/nprogress.css'

export default function ProgressBar() {
  const pathname = usePathname()
  const searchParams = useSearchParams()

  useEffect(() => {
    NProgress.done()
  }, [pathname, searchParams])

  return null
}
```

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: Link å’Œ router.push æ€ä¹ˆé€‰ï¼Ÿ**

- **Link**ï¼šå£°æ˜å¼ï¼Œé€‚åˆé™æ€é“¾æ¥ï¼Œæ”¯æŒé¢„å–
- **router.push**ï¼šå‘½ä»¤å¼ï¼Œé€‚åˆè¡¨å•æäº¤åè·³è½¬ã€æ¡ä»¶å¯¼èˆª

ğŸ¤” **Q: å¦‚ä½•åœ¨ Link ç‚¹å‡»æ—¶æ‰§è¡Œé¢å¤–é€»è¾‘ï¼Ÿ**

```tsx
<Link
  href="/page"
  onClick={(e) => {
    // ä¸è¦è°ƒç”¨ e.preventDefault()
    console.log('é“¾æ¥è¢«ç‚¹å‡»')
    // æ‰§è¡Œå…¶ä»–é€»è¾‘
  }}
>
  é“¾æ¥
</Link>
```

ğŸ¤” **Q: å¦‚ä½•é˜»æ­¢å¯¼èˆªï¼Ÿ**

```tsx
const handleClick = (e) => {
  if (!confirm('ç¡®å®šç¦»å¼€å—ï¼Ÿ')) {
    e.preventDefault()
  }
}

;<Link href="/page" onClick={handleClick}>
  éœ€è¦ç¡®è®¤çš„é“¾æ¥
</Link>
```

---

ä¸‹ä¸€ç¯‡å°†ä»‹ç»ä¸­é—´ä»¶ï¼Œå­¦ä¹ å¦‚ä½•åœ¨è¯·æ±‚åˆ°è¾¾é¡µé¢ä¹‹å‰è¿›è¡Œæ‹¦æˆªå’Œå¤„ç†ã€‚

-EOF-
