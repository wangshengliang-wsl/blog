---
title: é™æ€ä¸åŠ¨æ€æ¸²æŸ“
description: æ·±å…¥ç†è§£ Next.js çš„ SSGã€SSRã€ISR æ¸²æŸ“æ¨¡å¼ï¼ŒæŒæ¡ç¼“å­˜ç­–ç•¥ä¸åŠ¨æ€å‡½æ•°çš„ä½¿ç”¨
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'SSG', 'SSR', 'ISR', 'ç¼“å­˜']
---

ğŸ™‹ é¡µé¢åº”è¯¥åœ¨æ„å»ºæ—¶ç”Ÿæˆè¿˜æ˜¯è¯·æ±‚æ—¶ç”Ÿæˆï¼Ÿå¦‚ä½•å¹³è¡¡æ€§èƒ½å’Œæ•°æ®æ–°é²œåº¦ï¼Ÿ

## æ¸²æŸ“æ¨¡å¼æ¦‚è§ˆ

| æ¨¡å¼ | å…¨ç§°                            | ç”Ÿæˆæ—¶æœº        | é€‚ç”¨åœºæ™¯     |
| ---- | ------------------------------- | --------------- | ------------ |
| SSG  | Static Site Generation          | æ„å»ºæ—¶          | å†…å®¹ä¸å¸¸å˜åŒ– |
| SSR  | Server-Side Rendering           | è¯·æ±‚æ—¶          | å®æ—¶æ•°æ®     |
| ISR  | Incremental Static Regeneration | æ„å»º + å¢é‡æ›´æ–° | æŠ˜ä¸­æ–¹æ¡ˆ     |

## é™æ€æ¸²æŸ“ï¼ˆSSGï¼‰

### é»˜è®¤è¡Œä¸º

æ²¡æœ‰åŠ¨æ€å‡½æ•°çš„é¡µé¢é»˜è®¤é™æ€æ¸²æŸ“ï¼š

```tsx
// app/about/page.tsx
// Next.js 15.x
// è¿™æ˜¯é™æ€é¡µé¢ï¼Œæ„å»ºæ—¶ç”Ÿæˆ

export default function AboutPage() {
  return (
    <main>
      <h1>å…³äºæˆ‘ä»¬</h1>
      <p>è¿™æ˜¯é™æ€å†…å®¹ï¼Œæ„å»ºæ—¶ç”Ÿæˆã€‚</p>
    </main>
  )
}
```

### å¸¦æ•°æ®çš„é™æ€é¡µé¢

```tsx
// app/posts/page.tsx
// Next.js 15.x

async function getPosts() {
  // é»˜è®¤è¡Œä¸ºï¼šæ„å»ºæ—¶è·å–ï¼Œæ°¸ä¹…ç¼“å­˜
  const res = await fetch('https://api.example.com/posts')
  return res.json()
}

export default async function PostsPage() {
  const posts = await getPosts()

  return (
    <ul>
      {posts.map((post: any) => (
        <li key={post.id}>{post.title}</li>
      ))}
    </ul>
  )
}
```

### åŠ¨æ€è·¯ç”±é™æ€ç”Ÿæˆ

ä½¿ç”¨ `generateStaticParams` é¢„ç”Ÿæˆè·¯å¾„ï¼š

```tsx
// app/blog/[slug]/page.tsx
// Next.js 15.x

export async function generateStaticParams() {
  const posts = await fetch('https://api.example.com/posts').then((r) =>
    r.json()
  )

  return posts.map((post: { slug: string }) => ({
    slug: post.slug,
  }))
}

export default async function BlogPost({
  params,
}: {
  params: Promise<{ slug: string }>
}) {
  const { slug } = await params
  const post = await fetch(`https://api.example.com/posts/${slug}`).then((r) =>
    r.json()
  )

  return <article>{post.content}</article>
}
```

ğŸ¯ **æ•ˆæœ**ï¼šæ„å»ºæ—¶ä¸ºæ¯ä¸ª slug ç”Ÿæˆé™æ€ HTMLã€‚

## åŠ¨æ€æ¸²æŸ“ï¼ˆSSRï¼‰

### ä½¿ç”¨åŠ¨æ€å‡½æ•°

ä»¥ä¸‹å‡½æ•°ä¼šè§¦å‘åŠ¨æ€æ¸²æŸ“ï¼š

```tsx
// app/dashboard/page.tsx
// Next.js 15.x
import { cookies, headers } from 'next/headers'

export default async function DashboardPage() {
  // ä½¿ç”¨ cookies() è§¦å‘åŠ¨æ€æ¸²æŸ“
  const cookieStore = await cookies()
  const token = cookieStore.get('token')

  // ä½¿ç”¨ headers() ä¹Ÿä¼šè§¦å‘
  const headersList = await headers()
  const userAgent = headersList.get('user-agent')

  return <div>åŠ¨æ€å†…å®¹</div>
}
```

### ç¦ç”¨ç¼“å­˜

```tsx
// app/realtime/page.tsx
// Next.js 15.x

async function getData() {
  const res = await fetch('https://api.example.com/data', {
    cache: 'no-store', // ç¦ç”¨ç¼“å­˜ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è·å–æ–°æ•°æ®
  })
  return res.json()
}

export default async function RealtimePage() {
  const data = await getData()
  return <div>{data.value}</div>
}
```

### è·¯ç”±æ®µé…ç½®

```tsx
// app/live/page.tsx
// Next.js 15.x

// å¼ºåˆ¶åŠ¨æ€æ¸²æŸ“
export const dynamic = 'force-dynamic'

// æˆ–å¼ºåˆ¶é™æ€æ¸²æŸ“
// export const dynamic = 'force-static'

export default function LivePage() {
  return <div>å®æ—¶é¡µé¢</div>
}
```

## å¢é‡é™æ€å†ç”Ÿæˆï¼ˆISRï¼‰

### åŸºäºæ—¶é—´çš„é‡æ–°éªŒè¯

```tsx
// app/news/page.tsx
// Next.js 15.x

async function getNews() {
  const res = await fetch('https://api.example.com/news', {
    next: { revalidate: 60 }, // 60 ç§’åé‡æ–°éªŒè¯
  })
  return res.json()
}

export default async function NewsPage() {
  const news = await getNews()

  return (
    <ul>
      {news.map((item: any) => (
        <li key={item.id}>{item.title}</li>
      ))}
    </ul>
  )
}
```

ğŸ¯ **è¡Œä¸º**ï¼š

1. é¦–æ¬¡è¯·æ±‚ï¼šè¿”å›ç¼“å­˜çš„ HTML
2. 60 ç§’å†…çš„è¯·æ±‚ï¼šç»§ç»­è¿”å›ç¼“å­˜
3. 60 ç§’åçš„è¯·æ±‚ï¼šè¿”å›ç¼“å­˜ï¼ŒåŒæ—¶åå°é‡æ–°ç”Ÿæˆ
4. ä¸‹æ¬¡è¯·æ±‚ï¼šè¿”å›æ–°ç”Ÿæˆçš„ HTML

### è·¯ç”±çº§åˆ«é…ç½®

```tsx
// app/products/page.tsx
// Next.js 15.x

// æ•´ä¸ªè·¯ç”±æ®µçš„é‡æ–°éªŒè¯æ—¶é—´
export const revalidate = 3600 // 1 å°æ—¶

export default async function ProductsPage() {
  const products = await fetch('https://api.example.com/products').then((r) =>
    r.json()
  )
  return <div>{/* äº§å“åˆ—è¡¨ */}</div>
}
```

### æŒ‰éœ€é‡æ–°éªŒè¯

```tsx
// app/api/revalidate/route.ts
// Next.js 15.x
import { revalidatePath, revalidateTag } from 'next/cache'
import { NextRequest, NextResponse } from 'next/server'

export async function POST(request: NextRequest) {
  const { path, tag, secret } = await request.json()

  // éªŒè¯å¯†é’¥
  if (secret !== process.env.REVALIDATE_SECRET) {
    return NextResponse.json({ error: 'Invalid secret' }, { status: 401 })
  }

  // æŒ‰è·¯å¾„é‡æ–°éªŒè¯
  if (path) {
    revalidatePath(path)
  }

  // æŒ‰æ ‡ç­¾é‡æ–°éªŒè¯
  if (tag) {
    revalidateTag(tag)
  }

  return NextResponse.json({ revalidated: true })
}
```

```tsx
// app/blog/[slug]/page.tsx
// Next.js 15.x

async function getPost(slug: string) {
  const res = await fetch(`https://api.example.com/posts/${slug}`, {
    next: { tags: ['posts', `post-${slug}`] }, // æ·»åŠ ç¼“å­˜æ ‡ç­¾
  })
  return res.json()
}
```

è°ƒç”¨ API è§¦å‘é‡æ–°éªŒè¯ï¼š

```bash
curl -X POST http://localhost:3000/api/revalidate \
  -H "Content-Type: application/json" \
  -d '{"tag": "posts", "secret": "your-secret"}'
```

## ç¼“å­˜é…ç½®è¯¦è§£

### fetch ç¼“å­˜é€‰é¡¹

```tsx
// é»˜è®¤ï¼šæ°¸ä¹…ç¼“å­˜ï¼ˆSSGï¼‰
fetch('https://api.example.com/data')

// ç¦ç”¨ç¼“å­˜ï¼ˆSSRï¼‰
fetch('https://api.example.com/data', { cache: 'no-store' })

// å®šæ—¶é‡æ–°éªŒè¯ï¼ˆISRï¼‰
fetch('https://api.example.com/data', { next: { revalidate: 60 } })

// ç¼“å­˜æ ‡ç­¾
fetch('https://api.example.com/data', { next: { tags: ['tag1'] } })
```

### ç»„åˆä½¿ç”¨

```tsx
// app/dashboard/page.tsx
// Next.js 15.x

async function getUser() {
  // ç”¨æˆ·ä¿¡æ¯ï¼šæ¯æ¬¡è¯·æ±‚éƒ½è·å–
  const res = await fetch('https://api.example.com/me', {
    cache: 'no-store',
  })
  return res.json()
}

async function getStats() {
  // ç»Ÿè®¡æ•°æ®ï¼š5 åˆ†é’Ÿç¼“å­˜
  const res = await fetch('https://api.example.com/stats', {
    next: { revalidate: 300 },
  })
  return res.json()
}

async function getConfig() {
  // é…ç½®ï¼šæ„å»ºæ—¶è·å–ï¼Œæ°¸ä¹…ç¼“å­˜
  const res = await fetch('https://api.example.com/config')
  return res.json()
}

export default async function DashboardPage() {
  const [user, stats, config] = await Promise.all([
    getUser(),
    getStats(),
    getConfig(),
  ])

  return <div>{/* ä½¿ç”¨æ•°æ®æ¸²æŸ“ */}</div>
}
```

## é€‰æ‹©æ¸²æŸ“æ¨¡å¼

### å†³ç­–æµç¨‹

```
æ•°æ®éœ€è¦å®æ—¶æ›´æ–°ï¼Ÿ
    â”‚
    â”œâ”€ æ˜¯ â†’ éœ€è¦ä¸ªæ€§åŒ–å†…å®¹ï¼Ÿ
    â”‚           â”œâ”€ æ˜¯ â†’ SSRï¼ˆåŠ¨æ€æ¸²æŸ“ï¼‰
    â”‚           â””â”€ å¦ â†’ ISRï¼ˆå®šæ—¶æ›´æ–°ï¼‰
    â”‚
    â””â”€ å¦ â†’ SSGï¼ˆé™æ€æ¸²æŸ“ï¼‰
```

### åœºæ™¯ç¤ºä¾‹

| é¡µé¢ç±»å‹   | æ¨èæ¨¡å¼ | åŸå›        |
| ---------- | -------- | ---------- |
| å…³äºé¡µé¢   | SSG      | å†…å®¹å›ºå®š   |
| åšå®¢æ–‡ç«    | ISR      | å¶å°”æ›´æ–°   |
| å•†å“åˆ—è¡¨   | ISR      | å®šæœŸåŒæ­¥   |
| ç”¨æˆ·ä»ªè¡¨ç›˜ | SSR      | ä¸ªæ€§åŒ–æ•°æ® |
| è´­ç‰©è½¦     | SSR      | å®æ—¶çŠ¶æ€   |
| è¥é”€è½åœ°é¡µ | SSG      | å†…å®¹å›ºå®š   |

## å®æˆ˜é…ç½®

### ç”µå•†äº§å“é¡µ

```tsx
// app/products/[id]/page.tsx
// Next.js 15.x

// é¢„ç”Ÿæˆçƒ­é—¨äº§å“
export async function generateStaticParams() {
  const topProducts = await fetch(
    'https://api.example.com/products/top100'
  ).then((r) => r.json())

  return topProducts.map((p: { id: string }) => ({ id: p.id }))
}

// å…è®¸æœªé¢„ç”Ÿæˆçš„è·¯å¾„åŠ¨æ€ç”Ÿæˆ
export const dynamicParams = true

// äº§å“ä¿¡æ¯ 1 å°æ—¶æ›´æ–°
async function getProduct(id: string) {
  const res = await fetch(`https://api.example.com/products/${id}`, {
    next: { revalidate: 3600, tags: [`product-${id}`] },
  })
  return res.json()
}

// åº“å­˜å®æ—¶è·å–
async function getStock(id: string) {
  const res = await fetch(`https://api.example.com/products/${id}/stock`, {
    cache: 'no-store',
  })
  return res.json()
}

export default async function ProductPage({
  params,
}: {
  params: Promise<{ id: string }>
}) {
  const { id } = await params
  const [product, stock] = await Promise.all([getProduct(id), getStock(id)])

  return (
    <div>
      <h1>{product.name}</h1>
      <p>{product.description}</p>
      <p>åº“å­˜: {stock.quantity}</p>
    </div>
  )
}
```

### æ–°é—»ç½‘ç«™é¦–é¡µ

```tsx
// app/page.tsx
// Next.js 15.x

// å¤´æ¡æ–°é—»ï¼š5 åˆ†é’Ÿæ›´æ–°
async function getHeadlines() {
  const res = await fetch('https://api.example.com/headlines', {
    next: { revalidate: 300, tags: ['headlines'] },
  })
  return res.json()
}

// çƒ­é—¨æ–‡ç« ï¼š1 å°æ—¶æ›´æ–°
async function getTrending() {
  const res = await fetch('https://api.example.com/trending', {
    next: { revalidate: 3600, tags: ['trending'] },
  })
  return res.json()
}

// å¤©æ°”ï¼š15 åˆ†é’Ÿæ›´æ–°
async function getWeather() {
  const res = await fetch('https://api.example.com/weather', {
    next: { revalidate: 900 },
  })
  return res.json()
}

export default async function HomePage() {
  const [headlines, trending, weather] = await Promise.all([
    getHeadlines(),
    getTrending(),
    getWeather(),
  ])

  return (
    <main>
      <section>
        <h2>å¤´æ¡æ–°é—»</h2>
        {/* æ¸²æŸ“å¤´æ¡ */}
      </section>
      <section>
        <h2>çƒ­é—¨æ–‡ç« </h2>
        {/* æ¸²æŸ“çƒ­é—¨ */}
      </section>
      <aside>
        <h3>å¤©æ°”</h3>
        {/* æ¸²æŸ“å¤©æ°” */}
      </aside>
    </main>
  )
}
```

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: å¦‚ä½•æŸ¥çœ‹é¡µé¢æ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€ï¼Ÿ**

æ„å»ºæ—¶æŸ¥çœ‹è¾“å‡ºï¼š

- `â—‹` é™æ€é¡µé¢
- `Î»` åŠ¨æ€é¡µé¢
- `â—` ISR é¡µé¢

ğŸ¤” **Q: ISR çš„ revalidate æ˜¯ç²¾ç¡®æ—¶é—´å—ï¼Ÿ**

ä¸æ˜¯ã€‚revalidate æ˜¯æœ€å°æ—¶é—´é—´éš”ï¼Œå®é™…æ›´æ–°å‘ç”Ÿåœ¨é—´éš”åçš„ç¬¬ä¸€æ¬¡è¯·æ±‚ã€‚

ğŸ¤” **Q: å¦‚ä½•å¼ºåˆ¶æ‰€æœ‰ fetch ä½¿ç”¨ç›¸åŒç¼“å­˜ç­–ç•¥ï¼Ÿ**

```tsx
// app/layout.tsx
export const fetchCache = 'force-cache' // æˆ– 'force-no-store'
```

---

æ­å–œä½ å®Œæˆäº†æ¸²æŸ“æ¨¡å¼çš„å­¦ä¹ ï¼ä¸‹ä¸€ç¯‡å°†è¿›å…¥æ•°æ®å¤„ç†éƒ¨åˆ†ï¼Œä»‹ç»æ•°æ®è·å–çš„æœ€ä½³å®è·µã€‚

-EOF-
