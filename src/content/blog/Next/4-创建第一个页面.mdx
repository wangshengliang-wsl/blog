---
title: åˆ›å»ºç¬¬ä¸€ä¸ªé¡µé¢
description: åŠ¨æ‰‹å®è·µåˆ›å»º Next.js é¡µé¢ï¼Œæ·±å…¥ç†è§£ page.tsxã€layout.tsx ä¸ template.tsx çš„åä½œå…³ç³»
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'page', 'layout', 'template', 'è·¯ç”±']
---

ğŸ™‹ App Router ä¸­ï¼Œé¡µé¢æ˜¯å¦‚ä½•ç»„ç»‡çš„ï¼Ÿ`layout.tsx` å’Œ `page.tsx` å„å¸ä½•èŒï¼Ÿ

## æœ€ç®€å•çš„é¡µé¢

åœ¨ `app` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `page.tsx` å°±æ˜¯é¦–é¡µï¼š

```tsx
// app/page.tsx
// Next.js 15.x
export default function HomePage() {
  return <h1>æ¬¢è¿æ¥åˆ° Next.js</h1>
}
```

è®¿é—® `http://localhost:3000/` å³å¯çœ‹åˆ°è¿™ä¸ªé¡µé¢ã€‚

ğŸ¯ **æ ¸å¿ƒè§„åˆ™**ï¼šæ–‡ä»¶å¤¹å®šä¹‰è·¯ç”±è·¯å¾„ï¼Œ`page.tsx` å®šä¹‰é¡µé¢å†…å®¹ã€‚

## ç†è§£ page.tsx

### åŸºæœ¬è§„åˆ™

- æ¯ä¸ªè·¯ç”±æ®µï¼ˆæ–‡ä»¶å¤¹ï¼‰å¯ä»¥æœ‰ä¸€ä¸ª `page.tsx`
- åªæœ‰åŒ…å« `page.tsx` çš„æ–‡ä»¶å¤¹æ‰æ˜¯å¯è®¿é—®çš„è·¯ç”±
- `page.tsx` å¯¼å‡ºçš„é»˜è®¤ç»„ä»¶å°±æ˜¯é¡µé¢å†…å®¹

```
app/
â”œâ”€â”€ page.tsx           # /
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx       # /about
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx       # /blog
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx   # /blog/:slug
â””â”€â”€ contact/           # æ²¡æœ‰ page.tsxï¼Œä¸å¯è®¿é—®
    â””â”€â”€ form.tsx       # åªæ˜¯æ™®é€šç»„ä»¶
```

### æ¥æ”¶å‚æ•°

```tsx
// app/blog/[slug]/page.tsx
// Next.js 15.x

interface PageProps {
  params: Promise<{ slug: string }>
  searchParams: Promise<{ [key: string]: string | string[] | undefined }>
}

export default async function BlogPost({ params, searchParams }: PageProps) {
  const { slug } = await params
  const { page } = await searchParams

  return (
    <article>
      <h1>æ–‡ç« : {slug}</h1>
      <p>é¡µç : {page || '1'}</p>
    </article>
  )
}
```

ğŸ”¶ **æ³¨æ„**ï¼šNext.js 15 ä¸­ï¼Œ`params` å’Œ `searchParams` æ˜¯ Promiseï¼Œéœ€è¦ awaitã€‚

### å…ƒæ•°æ®å¯¼å‡º

```tsx
// app/about/page.tsx
// Next.js 15.x
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'å…³äºæˆ‘ä»¬',
  description: 'äº†è§£æˆ‘ä»¬çš„å›¢é˜Ÿå’Œä½¿å‘½',
}

export default function AboutPage() {
  return (
    <main>
      <h1>å…³äºæˆ‘ä»¬</h1>
      <p>è¿™æ˜¯ä¸€ä¸ª Next.js ç¤ºä¾‹é¡¹ç›®ã€‚</p>
    </main>
  )
}
```

## ç†è§£ layout.tsx

Layout æ˜¯åŒ…è£¹å­è·¯ç”±çš„å…±äº« UIï¼Œåœ¨è·¯ç”±åˆ‡æ¢æ—¶ä¸ä¼šé‡æ–°æŒ‚è½½ã€‚

### æ ¹å¸ƒå±€ï¼ˆå¿…éœ€ï¼‰

```tsx
// app/layout.tsx - æ ¹å¸ƒå±€
// Next.js 15.x
import type { Metadata } from 'next'
import { Inter } from 'next/font/google'
import './globals.css'

const inter = Inter({ subsets: ['latin'] })

export const metadata: Metadata = {
  title: {
    template: '%s | My App',
    default: 'My App',
  },
  description: 'ä¸€ä¸ª Next.js åº”ç”¨',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="zh-CN">
      <body className={inter.className}>
        <header className="border-b p-4">
          <nav>å…¨ç«™å¯¼èˆª</nav>
        </header>
        <main className="min-h-screen">{children}</main>
        <footer className="border-t p-4">
          <p>Â© 2025 My App</p>
        </footer>
      </body>
    </html>
  )
}
```

ğŸ”¶ **å¿…é¡»**ï¼šæ ¹å¸ƒå±€å¿…é¡»åŒ…å« `<html>` å’Œ `<body>` æ ‡ç­¾ã€‚

### åµŒå¥—å¸ƒå±€

```tsx
// app/dashboard/layout.tsx
// Next.js 15.x
export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="flex min-h-screen">
      <aside className="w-64 bg-gray-100 p-4">
        <nav>
          <ul className="space-y-2">
            <li>
              <a href="/dashboard">æ¦‚è§ˆ</a>
            </li>
            <li>
              <a href="/dashboard/analytics">åˆ†æ</a>
            </li>
            <li>
              <a href="/dashboard/settings">è®¾ç½®</a>
            </li>
          </ul>
        </nav>
      </aside>
      <section className="flex-1 p-6">{children}</section>
    </div>
  )
}
```

```tsx
// app/dashboard/page.tsx
// Next.js 15.x
export default function DashboardPage() {
  return (
    <div>
      <h1 className="text-2xl font-bold">ä»ªè¡¨ç›˜</h1>
      <p>æ¬¢è¿å›æ¥ï¼</p>
    </div>
  )
}
```

```tsx
// app/dashboard/analytics/page.tsx
// Next.js 15.x
export default function AnalyticsPage() {
  return (
    <div>
      <h1 className="text-2xl font-bold">æ•°æ®åˆ†æ</h1>
      <p>æŸ¥çœ‹ä½ çš„æ•°æ®ç»Ÿè®¡ã€‚</p>
    </div>
  )
}
```

è®¿é—® `/dashboard` å’Œ `/dashboard/analytics` æ—¶ï¼Œä¾§è¾¹æ å¸ƒå±€ä¿æŒä¸å˜ï¼Œåªæœ‰å†…å®¹åŒºåŸŸæ›´æ–°ã€‚

### Layout çš„ç‰¹æ€§

| ç‰¹æ€§              | è¯´æ˜                                 |
| ----------------- | ------------------------------------ |
| ä¸é‡æ–°æ¸²æŸ“        | è·¯ç”±åˆ‡æ¢æ—¶ï¼Œlayout ä¿æŒæŒ‚è½½çŠ¶æ€      |
| å¯åµŒå¥—            | å­è·¯ç”±çš„ layout ä¼šåµŒå¥—åœ¨çˆ¶ layout ä¸­ |
| å¯è®¿é—® params     | åŠ¨æ€è·¯ç”±çš„ layout å¯ä»¥æ¥æ”¶ params    |
| ä¸èƒ½è®¿é—® pathname | éœ€è¦ä½¿ç”¨ `usePathname()` é’©å­        |

## ç†è§£ template.tsx

Template ä¸ Layout ç±»ä¼¼ï¼Œä½†æ¯æ¬¡å¯¼èˆªéƒ½ä¼šé‡æ–°æŒ‚è½½ã€‚

```tsx
// app/dashboard/template.tsx
// Next.js 15.x
'use client'

import { useEffect } from 'react'

export default function DashboardTemplate({
  children,
}: {
  children: React.ReactNode
}) {
  useEffect(() => {
    // æ¯æ¬¡è·¯ç”±åˆ‡æ¢éƒ½ä¼šæ‰§è¡Œ
    console.log('é¡µé¢è®¿é—®:', new Date().toISOString())
  }, [])

  return <div className="fade-in">{children}</div>
}
```

ğŸ¯ **ä½¿ç”¨åœºæ™¯**ï¼š

- è¿›å…¥/é€€å‡ºåŠ¨ç”»
- æ¯æ¬¡å¯¼èˆªæ—¶é‡ç½®çŠ¶æ€
- é¡µé¢è®¿é—®ç»Ÿè®¡
- éœ€è¦ `useEffect` æ¯æ¬¡æ‰§è¡Œçš„åœºæ™¯

### Layout vs Template

| ç‰¹æ€§       | Layout     | Template       |
| ---------- | ---------- | -------------- |
| è·¯ç”±åˆ‡æ¢æ—¶ | ä¿æŒæŒ‚è½½   | é‡æ–°æŒ‚è½½       |
| çŠ¶æ€ä¿æŒ   | âœ… ä¿æŒ    | âŒ é‡ç½®        |
| useEffect  | åªæ‰§è¡Œä¸€æ¬¡ | æ¯æ¬¡æ‰§è¡Œ       |
| ä½¿ç”¨åœºæ™¯   | å…±äº« UI    | è¿‡æ¸¡åŠ¨ç”»ã€ç»Ÿè®¡ |

## å®Œæ•´ç¤ºä¾‹

åˆ›å»ºä¸€ä¸ªåŒ…å«å¸ƒå±€ã€æ¨¡æ¿å’Œé¡µé¢çš„å®Œæ•´ç»“æ„ï¼š

```
app/
â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€
â”œâ”€â”€ page.tsx            # é¦–é¡µ
â”œâ”€â”€ globals.css
â””â”€â”€ products/
    â”œâ”€â”€ layout.tsx      # äº§å“é¡µå¸ƒå±€
    â”œâ”€â”€ template.tsx    # é¡µé¢è¿‡æ¸¡
    â”œâ”€â”€ page.tsx        # /products
    â””â”€â”€ [id]/
        â””â”€â”€ page.tsx    # /products/:id
```

```tsx
// app/products/layout.tsx
// Next.js 15.x
export default function ProductsLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="container mx-auto py-8">
      <h1 className="text-3xl font-bold mb-6">äº§å“ä¸­å¿ƒ</h1>
      {children}
    </div>
  )
}
```

```tsx
// app/products/template.tsx
// Next.js 15.x
import './products.css'

export default function ProductsTemplate({
  children,
}: {
  children: React.ReactNode
}) {
  return <div className="animate-fade-in">{children}</div>
}
```

```css
/* app/products/products.css */
.animate-fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

```tsx
// app/products/page.tsx
// Next.js 15.x
import Link from 'next/link'

const products = [
  { id: '1', name: 'MacBook Pro', price: 12999 },
  { id: '2', name: 'iPhone 15', price: 7999 },
  { id: '3', name: 'AirPods Pro', price: 1999 },
]

export default function ProductsPage() {
  return (
    <ul className="grid grid-cols-3 gap-4">
      {products.map((product) => (
        <li key={product.id} className="border rounded-lg p-4">
          <Link href={`/products/${product.id}`}>
            <h2 className="font-semibold">{product.name}</h2>
            <p className="text-gray-600">Â¥{product.price}</p>
          </Link>
        </li>
      ))}
    </ul>
  )
}
```

```tsx
// app/products/[id]/page.tsx
// Next.js 15.x

interface PageProps {
  params: Promise<{ id: string }>
}

const products: Record<string, { name: string; price: number; desc: string }> =
  {
    '1': { name: 'MacBook Pro', price: 12999, desc: 'ä¸“ä¸šçº§ç¬”è®°æœ¬ç”µè„‘' },
    '2': { name: 'iPhone 15', price: 7999, desc: 'æ–°ä¸€ä»£æ™ºèƒ½æ‰‹æœº' },
    '3': { name: 'AirPods Pro', price: 1999, desc: 'ä¸»åŠ¨é™å™ªè€³æœº' },
  }

export default async function ProductDetailPage({ params }: PageProps) {
  const { id } = await params
  const product = products[id]

  if (!product) {
    return <p>äº§å“ä¸å­˜åœ¨</p>
  }

  return (
    <div className="max-w-md">
      <h2 className="text-2xl font-bold">{product.name}</h2>
      <p className="text-3xl text-blue-600 my-4">Â¥{product.price}</p>
      <p className="text-gray-600">{product.desc}</p>
      <button className="mt-4 px-6 py-2 bg-blue-600 text-white rounded">
        åŠ å…¥è´­ç‰©è½¦
      </button>
    </div>
  )
}
```

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: Layout ä¸­å¦‚ä½•è·å–å½“å‰è·¯å¾„ï¼Ÿ**

```tsx
// app/dashboard/layout.tsx
'use client'

import { usePathname } from 'next/navigation'

export default function DashboardLayout({ children }) {
  const pathname = usePathname()

  return (
    <div>
      <nav>
        <a
          href="/dashboard"
          className={pathname === '/dashboard' ? 'active' : ''}
        >
          é¦–é¡µ
        </a>
      </nav>
      {children}
    </div>
  )
}
```

ğŸ¤” **Q: å¦‚ä½•åœ¨ Layout ä¸­è®¿é—®åŠ¨æ€å‚æ•°ï¼Ÿ**

```tsx
// app/blog/[slug]/layout.tsx
// Next.js 15.x
interface LayoutProps {
  children: React.ReactNode
  params: Promise<{ slug: string }>
}

export default async function BlogLayout({ children, params }: LayoutProps) {
  const { slug } = await params

  return (
    <div>
      <nav>å½“å‰æ–‡ç« : {slug}</nav>
      {children}
    </div>
  )
}
```

ğŸ¤” **Q: å¯ä»¥è®© Layout åªåœ¨æŸäº›å­è·¯ç”±ç”Ÿæ•ˆå—ï¼Ÿ**

ä½¿ç”¨è·¯ç”±ç»„ï¼ˆä¸‹ä¸€ç« ä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼š

```
app/
â”œâ”€â”€ (with-sidebar)/
â”‚   â”œâ”€â”€ layout.tsx      # æœ‰ä¾§è¾¹æ çš„å¸ƒå±€
â”‚   â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ settings/
â””â”€â”€ (no-sidebar)/
    â”œâ”€â”€ login/
    â””â”€â”€ register/
```

---

ä¸‹ä¸€ç¯‡å°†ä»‹ç» Next.js çš„å¼€å‘å·¥å…·ä¸è°ƒè¯•æŠ€å·§ï¼ŒåŒ…æ‹¬ Turbopackã€Fast Refresh å’Œ DevToolsã€‚

-EOF-
