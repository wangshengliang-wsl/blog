---
title: æ‹¦æˆªè·¯ç”±
description: æŒæ¡ Next.js æ‹¦æˆªè·¯ç”±è¯­æ³• (.)ã€(..)ã€(...)ï¼Œå®ç°ä¼˜é›…çš„æ¨¡æ€æ¡†é¢„è§ˆä¸é¡µé¢åˆ‡æ¢æ•ˆæœ
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'æ‹¦æˆªè·¯ç”±', 'æ¨¡æ€æ¡†', 'è·¯ç”±']
---

ğŸ™‹ æƒ³è¦ç‚¹å‡»å›¾ç‰‡å¼¹å‡ºæ¨¡æ€æ¡†é¢„è§ˆï¼Œä½†ç›´æ¥è®¿é—® URL åˆèƒ½çœ‹åˆ°å®Œæ•´é¡µé¢ï¼Ÿè¿™ç§"Instagram å¼"çš„ä½“éªŒå¦‚ä½•å®ç°ï¼Ÿ

## æ‹¦æˆªè·¯ç”±è¯­æ³•

æ‹¦æˆªè·¯ç”±ä½¿ç”¨ç‰¹æ®Šæ–‡ä»¶å¤¹å‘½åæ¥"æ‹¦æˆª"ç›®æ ‡è·¯ç”±ï¼š

| è¯­æ³•       | å«ä¹‰     | ç±»æ¯”     |
| ---------- | -------- | -------- |
| `(.)`      | åŒçº§ç›®å½• | `./`     |
| `(..)`     | çˆ¶çº§ç›®å½• | `../`    |
| `(..)(..)` | ä¸Šä¸¤çº§   | `../../` |
| `(...)`    | æ ¹ç›®å½•   | `/`      |

## åŸºç¡€ç¤ºä¾‹

### å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡†

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx              # å›¾ç‰‡åˆ—è¡¨
â”œâ”€â”€ @modal/
â”‚   â”œâ”€â”€ default.tsx       # é»˜è®¤ç©º
â”‚   â””â”€â”€ (.)photo/
â”‚       â””â”€â”€ [id]/
â”‚           â””â”€â”€ page.tsx  # æ‹¦æˆªåçš„æ¨¡æ€æ¡†
â””â”€â”€ photo/
    â””â”€â”€ [id]/
        â””â”€â”€ page.tsx      # ç‹¬ç«‹é¡µé¢
```

**è¡Œä¸ºè¯´æ˜**ï¼š

1. ä»åˆ—è¡¨ç‚¹å‡»å›¾ç‰‡ â†’ `@modal/(.)photo/[id]` æ‹¦æˆªï¼Œæ˜¾ç¤ºæ¨¡æ€æ¡†
2. ç›´æ¥è®¿é—® `/photo/123` â†’ `photo/[id]` æ¸²æŸ“å®Œæ•´é¡µé¢
3. åœ¨æ¨¡æ€æ¡†ä¸­åˆ·æ–° â†’ å˜æˆå®Œæ•´é¡µé¢

```tsx
// app/page.tsx - å›¾ç‰‡åˆ—è¡¨
// Next.js 15.x
import Link from 'next/link'

const photos = [
  { id: '1', title: 'é£æ™¯' },
  { id: '2', title: 'åŸå¸‚' },
  { id: '3', title: 'äººç‰©' },
]

export default function HomePage() {
  return (
    <div className="grid grid-cols-3 gap-4 p-8">
      {photos.map((photo) => (
        <Link
          key={photo.id}
          href={`/photo/${photo.id}`}
          className="aspect-square bg-gray-200 rounded-lg"
        >
          <img
            src={`/images/${photo.id}.jpg`}
            alt={photo.title}
            className="w-full h-full object-cover rounded-lg"
          />
        </Link>
      ))}
    </div>
  )
}
```

```tsx
// app/@modal/(.)photo/[id]/page.tsx - æ¨¡æ€æ¡†
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'
import { use } from 'react'

interface PageProps {
  params: Promise<{ id: string }>
}

export default function PhotoModal({ params }: PageProps) {
  const { id } = use(params)
  const router = useRouter()

  return (
    <div
      className="fixed inset-0 bg-black/80 flex items-center justify-center z-50"
      onClick={() => router.back()}
    >
      <div
        className="relative max-w-4xl max-h-[90vh]"
        onClick={(e) => e.stopPropagation()}
      >
        <img
          src={`/images/${id}.jpg`}
          alt={`Photo ${id}`}
          className="max-w-full max-h-[90vh] object-contain"
        />
        <button
          onClick={() => router.back()}
          className="absolute top-4 right-4 text-white bg-black/50 rounded-full p-2"
        >
          âœ•
        </button>
      </div>
    </div>
  )
}
```

```tsx
// app/photo/[id]/page.tsx - å®Œæ•´é¡µé¢
// Next.js 15.x
import Link from 'next/link'

interface PageProps {
  params: Promise<{ id: string }>
}

export default async function PhotoPage({ params }: PageProps) {
  const { id } = await params

  return (
    <main className="min-h-screen p-8">
      <Link href="/" className="text-blue-600 mb-4 inline-block">
        â† è¿”å›åˆ—è¡¨
      </Link>
      <img
        src={`/images/${id}.jpg`}
        alt={`Photo ${id}`}
        className="w-full max-w-4xl mx-auto"
      />
      <div className="max-w-4xl mx-auto mt-4">
        <h1 className="text-2xl font-bold">å›¾ç‰‡ {id}</h1>
        <p className="text-gray-600 mt-2">å›¾ç‰‡è¯¦æƒ…å’Œæè¿°...</p>
      </div>
    </main>
  )
}
```

```tsx
// app/@modal/default.tsx
// Next.js 15.x

export default function ModalDefault() {
  return null
}
```

```tsx
// app/layout.tsx
// Next.js 15.x

export default function RootLayout({
  children,
  modal,
}: {
  children: React.ReactNode
  modal: React.ReactNode
}) {
  return (
    <html lang="zh-CN">
      <body>
        {children}
        {modal}
      </body>
    </html>
  )
}
```

## æ‹¦æˆªå±‚çº§è¯¦è§£

### (.) åŒçº§æ‹¦æˆª

```
app/
â”œâ”€â”€ feed/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ (.)photo/         # æ‹¦æˆª feed/photo
â”‚       â””â”€â”€ [id]/page.tsx
â””â”€â”€ feed/
    â””â”€â”€ photo/
        â””â”€â”€ [id]/page.tsx
```

ä» `/feed` ç‚¹å‡»é“¾æ¥åˆ° `/feed/photo/1` æ—¶ï¼Œ`(.)photo` æ‹¦æˆªã€‚

### (..) çˆ¶çº§æ‹¦æˆª

```
app/
â”œâ”€â”€ @modal/
â”‚   â””â”€â”€ (..)photo/        # ä» @modal å‘ä¸Šä¸€çº§æ‹¦æˆª photo
â”‚       â””â”€â”€ [id]/page.tsx
â””â”€â”€ photo/
    â””â”€â”€ [id]/page.tsx
```

ğŸ”¶ **æ³¨æ„**ï¼š`@modal` æ˜¯æ’æ§½ï¼Œä¸ç®—ä½œè·¯ç”±æ®µã€‚æ‰€ä»¥ `(..)` å®é™…ä¸Šæ˜¯æ‹¦æˆª `app/photo`ã€‚

### (...) æ ¹ç›®å½•æ‹¦æˆª

```
app/
â”œâ”€â”€ shop/
â”‚   â”œâ”€â”€ page.tsx
â”‚   â””â”€â”€ @modal/
â”‚       â””â”€â”€ (...)cart/    # ä»ä»»æ„ä½ç½®æ‹¦æˆª /cart
â”‚           â””â”€â”€ page.tsx
â””â”€â”€ cart/
    â””â”€â”€ page.tsx
```

## å®Œæ•´æ¨¡æ€æ¡†ç¤ºä¾‹

### å•†å“å¿«é€Ÿé¢„è§ˆ

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ products/
â”‚   â”œâ”€â”€ page.tsx                    # å•†å“åˆ—è¡¨
â”‚   â””â”€â”€ @preview/
â”‚       â”œâ”€â”€ default.tsx
â”‚       â””â”€â”€ (.)detail/
â”‚           â””â”€â”€ [id]/
â”‚               â””â”€â”€ page.tsx        # å¿«é€Ÿé¢„è§ˆæ¨¡æ€æ¡†
â””â”€â”€ products/
    â””â”€â”€ detail/
        â””â”€â”€ [id]/
            â””â”€â”€ page.tsx            # å•†å“è¯¦æƒ…é¡µ
```

```tsx
// app/products/page.tsx
// Next.js 15.x
import Link from 'next/link'

const products = [
  { id: '1', name: 'MacBook Pro', price: 12999 },
  { id: '2', name: 'iPhone 15', price: 7999 },
  { id: '3', name: 'AirPods Pro', price: 1999 },
]

export default function ProductsPage() {
  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold mb-6">å•†å“åˆ—è¡¨</h1>
      <div className="grid grid-cols-3 gap-6">
        {products.map((product) => (
          <Link
            key={product.id}
            href={`/products/detail/${product.id}`}
            className="border rounded-lg p-4 hover:shadow-lg transition"
          >
            <div className="aspect-square bg-gray-100 rounded mb-4" />
            <h2 className="font-semibold">{product.name}</h2>
            <p className="text-blue-600">Â¥{product.price}</p>
          </Link>
        ))}
      </div>
    </div>
  )
}
```

```tsx
// app/products/@preview/(.)detail/[id]/page.tsx
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'
import Link from 'next/link'
import { use } from 'react'

interface PageProps {
  params: Promise<{ id: string }>
}

const products: Record<string, { name: string; price: number; desc: string }> =
  {
    '1': { name: 'MacBook Pro', price: 12999, desc: 'ä¸“ä¸šçº§ç¬”è®°æœ¬' },
    '2': { name: 'iPhone 15', price: 7999, desc: 'æ–°ä¸€ä»£æ‰‹æœº' },
    '3': { name: 'AirPods Pro', price: 1999, desc: 'é™å™ªè€³æœº' },
  }

export default function ProductPreview({ params }: PageProps) {
  const { id } = use(params)
  const router = useRouter()
  const product = products[id]

  if (!product) return null

  return (
    <div
      className="fixed inset-0 bg-black/50 flex items-center justify-center z-50"
      onClick={() => router.back()}
    >
      <div
        className="bg-white rounded-lg p-6 max-w-md w-full mx-4"
        onClick={(e) => e.stopPropagation()}
      >
        <div className="aspect-video bg-gray-100 rounded mb-4" />
        <h2 className="text-xl font-bold">{product.name}</h2>
        <p className="text-2xl text-blue-600 my-2">Â¥{product.price}</p>
        <p className="text-gray-600 mb-4">{product.desc}</p>

        <div className="flex gap-2">
          <button className="flex-1 bg-blue-600 text-white py-2 rounded">
            åŠ å…¥è´­ç‰©è½¦
          </button>
          <Link
            href={`/products/detail/${id}`}
            className="flex-1 border py-2 rounded text-center"
            onClick={(e) => e.stopPropagation()}
          >
            æŸ¥çœ‹è¯¦æƒ…
          </Link>
        </div>

        <button
          onClick={() => router.back()}
          className="absolute top-4 right-4 text-gray-400"
        >
          âœ•
        </button>
      </div>
    </div>
  )
}
```

```tsx
// app/products/layout.tsx
// Next.js 15.x

export default function ProductsLayout({
  children,
  preview,
}: {
  children: React.ReactNode
  preview: React.ReactNode
}) {
  return (
    <>
      {children}
      {preview}
    </>
  )
}
```

## ä½¿ç”¨åœºæ™¯

### 1. å›¾ç‰‡ç”»å»Š

- ç‚¹å‡»ç¼©ç•¥å›¾ â†’ æ¨¡æ€æ¡†é¢„è§ˆå¤§å›¾
- ç›´æ¥ URL â†’ å›¾ç‰‡è¯¦æƒ…é¡µ
- åˆ†äº« URL â†’ å¯¹æ–¹çœ‹åˆ°å®Œæ•´é¡µé¢

### 2. ç™»å½•/æ³¨å†Œ

- ç‚¹å‡»"ç™»å½•" â†’ æ¨¡æ€æ¡†ç™»å½•è¡¨å•
- ç›´æ¥è®¿é—® `/login` â†’ å®Œæ•´ç™»å½•é¡µé¢

### 3. å•†å“å¿«é€Ÿé¢„è§ˆ

- åˆ—è¡¨ä¸­æ‚¬åœ/ç‚¹å‡» â†’ å¿«é€Ÿé¢„è§ˆå¼¹çª—
- æƒ³è¦è¯¦ç»†äº†è§£ â†’ ç‚¹å‡»è¿›å…¥è¯¦æƒ…é¡µ

### 4. è¯„è®º/å›å¤

- ç‚¹å‡»å›å¤ â†’ æ¨¡æ€æ¡†å†™å›å¤
- åˆ·æ–° â†’ ç‹¬ç«‹çš„å›å¤é¡µé¢

## ç»“åˆå¹¶è¡Œè·¯ç”±

æ‹¦æˆªè·¯ç”±é€šå¸¸ä¸å¹¶è¡Œè·¯ç”±ï¼ˆ`@folder`ï¼‰é…åˆä½¿ç”¨ï¼š

```
app/
â”œâ”€â”€ layout.tsx              # æ¸²æŸ“ children + modal
â”œâ”€â”€ @modal/                 # å¹¶è¡Œè·¯ç”±æ’æ§½
â”‚   â”œâ”€â”€ default.tsx         # é»˜è®¤ç©º
â”‚   â””â”€â”€ (.)items/           # æ‹¦æˆª /items
â”‚       â””â”€â”€ [id]/
â”‚           â””â”€â”€ page.tsx    # æ¨¡æ€æ¡†å†…å®¹
â”œâ”€â”€ page.tsx                # åˆ—è¡¨é¡µ
â””â”€â”€ items/
    â””â”€â”€ [id]/
        â””â”€â”€ page.tsx        # è¯¦æƒ…é¡µ
```

## å¸¸è§é™·é˜±

### 1. è·¯ç”±æ®µè®¡ç®—

`@folder` ä¸è®¡å…¥è·¯ç”±æ®µï¼š

```
app/
â””â”€â”€ shop/
    â””â”€â”€ @modal/
        â””â”€â”€ (..)cart/       # å®é™…æ‹¦æˆª app/cartï¼Œä¸æ˜¯ app/shop/cart
```

### 2. åˆ·æ–°è¡Œä¸º

æ¨¡æ€æ¡†çŠ¶æ€åœ¨åˆ·æ–°åä¼šä¸¢å¤±ï¼Œæ˜¾ç¤ºç‹¬ç«‹é¡µé¢ï¼š

```tsx
// è§£å†³æ–¹æ¡ˆï¼šæ·»åŠ è¿”å›æŒ‰é’®
<Link href="/">â† è¿”å›åˆ—è¡¨</Link>
```

### 3. é»˜è®¤æ–‡ä»¶

å¹¶è¡Œè·¯ç”±å¿…é¡»æœ‰ `default.tsx`ï¼Œå¦åˆ™å¯¼èˆªåˆ°å…¶ä»–è·¯ç”±ä¼š 404ã€‚

## åŠ¨ç”»å¢å¼º

```tsx
// app/@modal/(.)photo/[id]/page.tsx
// Next.js 15.x
'use client'

import { motion, AnimatePresence } from 'framer-motion'
import { useRouter } from 'next/navigation'

export default function PhotoModal({ params }) {
  const router = useRouter()

  return (
    <AnimatePresence>
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        className="fixed inset-0 bg-black/80 flex items-center justify-center"
        onClick={() => router.back()}
      >
        <motion.div
          initial={{ scale: 0.9, opacity: 0 }}
          animate={{ scale: 1, opacity: 1 }}
          exit={{ scale: 0.9, opacity: 0 }}
          onClick={(e) => e.stopPropagation()}
        >
          <img src={`/images/${params.id}.jpg`} alt="" />
        </motion.div>
      </motion.div>
    </AnimatePresence>
  )
}
```

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: è½¯å¯¼èˆªå’Œç¡¬å¯¼èˆªçš„åŒºåˆ«ï¼Ÿ**

- **è½¯å¯¼èˆª**ï¼šå®¢æˆ·ç«¯å¯¼èˆªï¼ˆLink ç‚¹å‡»ï¼‰ï¼Œè§¦å‘æ‹¦æˆª
- **ç¡¬å¯¼èˆª**ï¼šé¡µé¢åˆ·æ–°ã€ç›´æ¥è¾“å…¥ URLï¼Œä¸è§¦å‘æ‹¦æˆª

ğŸ¤” **Q: å¦‚ä½•åˆ¤æ–­æ˜¯æ¨¡æ€æ¡†è¿˜æ˜¯ç‹¬ç«‹é¡µé¢ï¼Ÿ**

```tsx
'use client'
import { usePathname } from 'next/navigation'

// åœ¨æ¨¡æ€æ¡†ä¸­
const isModal = usePathname().includes('/@modal')

// æˆ–é€šè¿‡ searchParams æ ‡è®°
// /photo/1?modal=true
```

ğŸ¤” **Q: æ¨¡æ€æ¡†ä¸­çš„è¡¨å•æäº¤åå¦‚ä½•å¤„ç†ï¼Ÿ**

```tsx
async function handleSubmit() {
  await submitForm()
  router.back() // å…³é—­æ¨¡æ€æ¡†
  router.refresh() // åˆ·æ–°åˆ—è¡¨æ•°æ®
}
```

---

ä¸‹ä¸€ç¯‡å°†ä»‹ç»å¯¼èˆªä¸é“¾æ¥ï¼Œæ·±å…¥ Link ç»„ä»¶ã€useRouter å’Œé¢„å–ç­–ç•¥ã€‚

-EOF-
