---
title: æ–‡ä»¶ç³»ç»Ÿè·¯ç”±
description: æŒæ¡ Next.js App Router çš„æ–‡ä»¶ç³»ç»Ÿè·¯ç”±æœºåˆ¶ï¼Œç†è§£è·¯ç”±çº¦å®šã€ç‰¹æ®Šæ–‡ä»¶ä¸è·¯ç”±æ®µè§„åˆ™
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'è·¯ç”±', 'æ–‡ä»¶ç³»ç»Ÿ', 'App Router']
---

ğŸ™‹ Next.js çš„è·¯ç”±ä¸éœ€è¦é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹ç»“æ„å°±æ˜¯è·¯ç”±ç»“æ„ã€‚è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

## æ ¸å¿ƒæ¦‚å¿µ

App Router ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ¥å®šä¹‰è·¯ç”±ï¼š

- **æ–‡ä»¶å¤¹** = è·¯ç”±è·¯å¾„
- **page.tsx** = é¡µé¢å†…å®¹
- **layout.tsx** = å…±äº«å¸ƒå±€

```
app/
â”œâ”€â”€ page.tsx              # /
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx          # /about
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx          # /blog
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx      # /blog/:slug
â””â”€â”€ (marketing)/
    â”œâ”€â”€ pricing/
    â”‚   â””â”€â”€ page.tsx      # /pricing
    â””â”€â”€ contact/
        â””â”€â”€ page.tsx      # /contact
```

ğŸ¯ **è®°ä½**ï¼šåªæœ‰åŒ…å« `page.tsx` çš„æ–‡ä»¶å¤¹æ‰æ˜¯å¯è®¿é—®çš„è·¯ç”±ã€‚

## è·¯ç”±æ®µ

### ä»€ä¹ˆæ˜¯è·¯ç”±æ®µ

URL è·¯å¾„ç”±å¤šä¸ªè·¯ç”±æ®µç»„æˆï¼š

```
https://example.com/blog/2024/hello-world
                    â”œâ”€â”€â”˜ â”œâ”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    æ®µ1  æ®µ2      æ®µ3
```

å¯¹åº”çš„æ–‡ä»¶ç»“æ„ï¼š

```
app/
â””â”€â”€ blog/           # æ®µ1: /blog
    â””â”€â”€ 2024/       # æ®µ2: /blog/2024
        â””â”€â”€ hello-world/  # æ®µ3: /blog/2024/hello-world
            â””â”€â”€ page.tsx
```

### æ®µç±»å‹

| ç±»å‹     | è¯­æ³•           | ç¤ºä¾‹     | ç”¨é€”       |
| -------- | -------------- | -------- | ---------- |
| é™æ€æ®µ   | `folder/`      | `about/` | å›ºå®šè·¯å¾„   |
| åŠ¨æ€æ®µ   | `[param]/`     | `[id]/`  | å•ä¸ªå‚æ•°   |
| æ•è·æ‰€æœ‰ | `[...slug]/`   | åŒ¹é…å¤šæ®µ | å¤šçº§è·¯å¾„   |
| å¯é€‰æ•è· | `[[...slug]]/` | å¯é€‰å¤šæ®µ | åŒ…å«æ ¹è·¯å¾„ |

## ç‰¹æ®Šæ–‡ä»¶

### æ–‡ä»¶çº¦å®šä¸€è§ˆ

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx      # å¸ƒå±€ï¼ˆåŒ…è£¹å­è·¯ç”±ï¼‰
    â”œâ”€â”€ template.tsx    # æ¨¡æ¿ï¼ˆæ¯æ¬¡å¯¼èˆªé‡æ–°æŒ‚è½½ï¼‰
    â”œâ”€â”€ page.tsx        # é¡µé¢å†…å®¹
    â”œâ”€â”€ loading.tsx     # åŠ è½½çŠ¶æ€
    â”œâ”€â”€ error.tsx       # é”™è¯¯è¾¹ç•Œ
    â”œâ”€â”€ not-found.tsx   # 404 é¡µé¢
    â”œâ”€â”€ route.ts        # API ç«¯ç‚¹
    â””â”€â”€ default.tsx     # å¹¶è¡Œè·¯ç”±é»˜è®¤å†…å®¹
```

### æ¸²æŸ“å±‚çº§

ç‰¹æ®Šæ–‡ä»¶æŒ‰å›ºå®šé¡ºåºåµŒå¥—æ¸²æŸ“ï¼š

```tsx
<Layout>
  <Template>
    <ErrorBoundary fallback={<Error />}>
      <Suspense fallback={<Loading />}>
        <Page />
      </Suspense>
    </ErrorBoundary>
  </Template>
</Layout>
```

### page.tsx

å®šä¹‰è·¯ç”±çš„ UI å†…å®¹ï¼š

```tsx
// app/about/page.tsx
// Next.js 15.x

export default function AboutPage() {
  return (
    <main>
      <h1>å…³äºæˆ‘ä»¬</h1>
      <p>è¿™æ˜¯å…³äºé¡µé¢ã€‚</p>
    </main>
  )
}
```

### layout.tsx

å®šä¹‰å…±äº« UIï¼Œä¸éšè·¯ç”±åˆ‡æ¢è€Œé‡æ–°æ¸²æŸ“ï¼š

```tsx
// app/dashboard/layout.tsx
// Next.js 15.x

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <div className="flex">
      <aside className="w-64">ä¾§è¾¹æ </aside>
      <main className="flex-1">{children}</main>
    </div>
  )
}
```

### loading.tsx

ä½¿ç”¨ React Suspense æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼š

```tsx
// app/dashboard/loading.tsx
// Next.js 15.x

export default function Loading() {
  return (
    <div className="flex items-center justify-center h-64">
      <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600" />
    </div>
  )
}
```

### error.tsx

æ•è·å­æ ‘ä¸­çš„é”™è¯¯ï¼š

```tsx
// app/dashboard/error.tsx
// Next.js 15.x
'use client' // å¿…é¡»æ˜¯å®¢æˆ·ç«¯ç»„ä»¶

interface ErrorProps {
  error: Error & { digest?: string }
  reset: () => void
}

export default function Error({ error, reset }: ErrorProps) {
  return (
    <div className="p-4 bg-red-50 rounded">
      <h2 className="text-red-600">å‡ºé”™äº†ï¼</h2>
      <p className="text-gray-600">{error.message}</p>
      <button
        onClick={reset}
        className="mt-4 px-4 py-2 bg-red-600 text-white rounded"
      >
        é‡è¯•
      </button>
    </div>
  )
}
```

### not-found.tsx

è‡ªå®šä¹‰ 404 é¡µé¢ï¼š

```tsx
// app/not-found.tsx
// Next.js 15.x
import Link from 'next/link'

export default function NotFound() {
  return (
    <div className="flex flex-col items-center justify-center min-h-screen">
      <h1 className="text-6xl font-bold text-gray-300">404</h1>
      <p className="mt-4 text-xl text-gray-600">é¡µé¢ä¸å­˜åœ¨</p>
      <Link href="/" className="mt-8 px-6 py-3 bg-blue-600 text-white rounded">
        è¿”å›é¦–é¡µ
      </Link>
    </div>
  )
}
```

è§¦å‘ 404ï¼š

```tsx
// app/users/[id]/page.tsx
import { notFound } from 'next/navigation'

export default async function UserPage({ params }) {
  const { id } = await params
  const user = await getUser(id)

  if (!user) {
    notFound() // è§¦å‘ not-found.tsx
  }

  return <div>{user.name}</div>
}
```

## Colocationï¼ˆæ–‡ä»¶å…±ç½®ï¼‰

### å®‰å…¨çš„æ–‡ä»¶ç»„ç»‡

åœ¨ `app` ç›®å½•ä¸­ï¼Œä½ å¯ä»¥å®‰å…¨åœ°æ”¾ç½®éè·¯ç”±æ–‡ä»¶ï¼š

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ page.tsx           # è·¯ç”±é¡µé¢
    â”œâ”€â”€ layout.tsx         # å¸ƒå±€
    â”œâ”€â”€ components/        # âœ… ä¸ä¼šæˆä¸ºè·¯ç”±
    â”‚   â”œâ”€â”€ Chart.tsx
    â”‚   â””â”€â”€ Stats.tsx
    â”œâ”€â”€ hooks/             # âœ… ä¸ä¼šæˆä¸ºè·¯ç”±
    â”‚   â””â”€â”€ useData.ts
    â”œâ”€â”€ utils.ts           # âœ… ä¸ä¼šæˆä¸ºè·¯ç”±
    â””â”€â”€ types.ts           # âœ… ä¸ä¼šæˆä¸ºè·¯ç”±
```

ğŸ¯ **è§„åˆ™**ï¼šåªæœ‰ `page.tsx` å’Œ `route.ts` ä¼šä½¿æ–‡ä»¶å¤¹æˆä¸ºå¯è®¿é—®è·¯ç”±ã€‚

### ç§æœ‰æ–‡ä»¶å¤¹

ä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€æ ‡è®°ç§æœ‰æ–‡ä»¶å¤¹ï¼š

```
app/
â”œâ”€â”€ _components/          # ç§æœ‰ï¼Œæ°¸è¿œä¸ä¼šæˆä¸ºè·¯ç”±
â”‚   â”œâ”€â”€ Header.tsx
â”‚   â””â”€â”€ Footer.tsx
â”œâ”€â”€ _lib/                 # ç§æœ‰
â”‚   â””â”€â”€ utils.ts
â””â”€â”€ dashboard/
    â””â”€â”€ page.tsx
```

### ç»„ç»‡ç­–ç•¥å¯¹æ¯”

**ç­–ç•¥ä¸€ï¼šæŒ‰è·¯ç”±ç»„ç»‡**

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ page.tsx
    â”œâ”€â”€ components/       # Dashboard ä¸“ç”¨ç»„ä»¶
    â””â”€â”€ hooks/           # Dashboard ä¸“ç”¨ hooks
```

**ç­–ç•¥äºŒï¼šæŒ‰åŠŸèƒ½ç»„ç»‡**

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ dashboard/
â”‚       â””â”€â”€ page.tsx
â”œâ”€â”€ components/          # å…¨å±€å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ ui/
â”‚   â””â”€â”€ dashboard/
â””â”€â”€ lib/                # å…¨å±€å·¥å…·å‡½æ•°
```

âœ… **æ¨è**ï¼šå°é¡¹ç›®ç”¨ç­–ç•¥ä¸€ï¼Œå¤§é¡¹ç›®ç”¨ç­–ç•¥äºŒã€‚

## è·¯ç”±æ˜ å°„è§„åˆ™

### å®Œæ•´æ˜ å°„è¡¨

| æ–‡ä»¶è·¯å¾„                            | URL è·¯å¾„      |
| ----------------------------------- | ------------- |
| `app/page.tsx`                      | `/`           |
| `app/about/page.tsx`                | `/about`      |
| `app/blog/page.tsx`                 | `/blog`       |
| `app/blog/[slug]/page.tsx`          | `/blog/:slug` |
| `app/shop/[...categories]/page.tsx` | `/shop/*`     |
| `app/(marketing)/pricing/page.tsx`  | `/pricing`    |
| `app/@modal/login/page.tsx`         | å¹¶è¡Œè·¯ç”±æ’æ§½  |

### ç‰¹æ®Šè·¯å¾„å¤„ç†

```
app/
â”œâ”€â”€ (auth)/              # è·¯ç”±ç»„ï¼Œä¸å½±å“ URL
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx     # /login
â”‚   â””â”€â”€ register/
â”‚       â””â”€â”€ page.tsx     # /register
â”œâ”€â”€ api/                 # API è·¯ç”±
â”‚   â””â”€â”€ users/
â”‚       â””â”€â”€ route.ts     # /api/users
â””â”€â”€ [[...slug]]/         # å¯é€‰æ•è·æ‰€æœ‰
    â””â”€â”€ page.tsx         # / å’Œ /* éƒ½åŒ¹é…
```

## å®æˆ˜ç¤ºä¾‹

### åšå®¢ç½‘ç«™ç»“æ„

```
app/
â”œâ”€â”€ layout.tsx           # æ ¹å¸ƒå±€ï¼ˆå¯¼èˆªã€é¡µè„šï¼‰
â”œâ”€â”€ page.tsx             # é¦–é¡µ
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ layout.tsx       # åšå®¢å¸ƒå±€ï¼ˆä¾§è¾¹æ ï¼‰
â”‚   â”œâ”€â”€ page.tsx         # æ–‡ç« åˆ—è¡¨ /blog
â”‚   â””â”€â”€ [slug]/
â”‚       â”œâ”€â”€ page.tsx     # æ–‡ç« è¯¦æƒ… /blog/:slug
â”‚       â””â”€â”€ loading.tsx  # åŠ è½½çŠ¶æ€
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx         # å…³äºé¡µé¢ /about
â””â”€â”€ not-found.tsx        # å…¨å±€ 404
```

### ç”µå•†ç½‘ç«™ç»“æ„

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx              # é¦–é¡µ
â”œâ”€â”€ products/
â”‚   â”œâ”€â”€ page.tsx          # å•†å“åˆ—è¡¨
â”‚   â”œâ”€â”€ [category]/
â”‚   â”‚   â”œâ”€â”€ page.tsx      # åˆ†ç±»é¡µ /products/electronics
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx  # å•†å“è¯¦æƒ… /products/electronics/123
â”‚   â””â”€â”€ loading.tsx
â”œâ”€â”€ cart/
â”‚   â””â”€â”€ page.tsx          # è´­ç‰©è½¦
â”œâ”€â”€ checkout/
â”‚   â”œâ”€â”€ page.tsx          # ç»“è´¦
â”‚   â””â”€â”€ success/
â”‚       â””â”€â”€ page.tsx      # æˆåŠŸé¡µ
â””â”€â”€ (auth)/
    â”œâ”€â”€ login/
    â”‚   â””â”€â”€ page.tsx
    â””â”€â”€ register/
        â””â”€â”€ page.tsx
```

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: æ–‡ä»¶å¤¹æ²¡æœ‰ page.tsx ä¼šæ€æ ·ï¼Ÿ**

è¯¥è·¯å¾„æ— æ³•è®¿é—®ï¼Œè¿”å› 404ã€‚ä½†å¯ä»¥æ”¾ç½®å…¶ä»–æ–‡ä»¶ï¼ˆç»„ä»¶ã€å·¥å…·å‡½æ•°ç­‰ï¼‰ã€‚

ğŸ¤” **Q: å¤šä¸ª layout.tsx å¦‚ä½•åµŒå¥—ï¼Ÿ**

è‡ªåŠ¨åµŒå¥—ï¼Œä»æ ¹ç›®å½•åˆ°å½“å‰è·¯ç”±çš„æ‰€æœ‰ layout éƒ½ä¼šæŒ‰é¡ºåºåŒ…è£¹ pageã€‚

ğŸ¤” **Q: å¦‚ä½•å…±äº«å¤šä¸ªè·¯ç”±çš„å¸ƒå±€ï¼Ÿ**

ä½¿ç”¨è·¯ç”±ç»„ `(folder)`ï¼š

```
app/
â”œâ”€â”€ (shop)/
â”‚   â”œâ”€â”€ layout.tsx      # å•†åº—å¸ƒå±€
â”‚   â”œâ”€â”€ products/
â”‚   â””â”€â”€ cart/
â””â”€â”€ (marketing)/
    â”œâ”€â”€ layout.tsx      # è¥é”€å¸ƒå±€
    â”œâ”€â”€ about/
    â””â”€â”€ pricing/
```

---

ä¸‹ä¸€ç¯‡å°†æ·±å…¥åŠ¨æ€è·¯ç”±ï¼Œå­¦ä¹  `[slug]`ã€`[...slug]` å’Œ `[[...slug]]` çš„ä½¿ç”¨åœºæ™¯ã€‚

-EOF-
