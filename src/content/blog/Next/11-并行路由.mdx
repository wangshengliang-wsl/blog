---
title: å¹¶è¡Œè·¯ç”±
description: æŒæ¡ Next.js å¹¶è¡Œè·¯ç”± @folder æ’æ§½æœºåˆ¶ï¼Œå®ç°æ¨¡æ€æ¡†ã€ä»ªè¡¨ç›˜å¤šé¢æ¿ä¸æ¡ä»¶æ¸²æŸ“
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'å¹¶è¡Œè·¯ç”±', 'æ’æ§½', 'æ¨¡æ€æ¡†']
---

ğŸ™‹ æƒ³åœ¨åŒä¸€ä¸ªé¡µé¢åŒæ—¶æ˜¾ç¤ºå¤šä¸ªç‹¬ç«‹çš„å†…å®¹åŒºåŸŸï¼Ÿæ¯”å¦‚ä»ªè¡¨ç›˜çš„å¤šä¸ªé¢æ¿ï¼Œæˆ–è€…ä¸æ”¹å˜ URL çš„æ¨¡æ€æ¡†ï¼Ÿ

## å¹¶è¡Œè·¯ç”±æ¦‚å¿µ

å¹¶è¡Œè·¯ç”±ä½¿ç”¨ `@folder` è¯­æ³•åˆ›å»ºå‘½åæ’æ§½ï¼Œå¯ä»¥åœ¨åŒä¸€å¸ƒå±€ä¸­åŒæ—¶æ¸²æŸ“å¤šä¸ªé¡µé¢ï¼š

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â”œâ”€â”€ @analytics/
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ @team/
    â””â”€â”€ page.tsx
```

```tsx
// app/layout.tsx
// Next.js 15.x

export default function Layout({
  children,
  analytics,
  team,
}: {
  children: React.ReactNode
  analytics: React.ReactNode
  team: React.ReactNode
}) {
  return (
    <div>
      <main>{children}</main>
      <aside>
        {analytics}
        {team}
      </aside>
    </div>
  )
}
```

ğŸ¯ **å…³é”®**ï¼š`@analytics` å’Œ `@team` ä¸ä¼šå½±å“ URLï¼Œå®ƒä»¬æ˜¯"æ’æ§½"ã€‚

## åŸºç¡€ç”¨æ³•

### ä»ªè¡¨ç›˜å¤šé¢æ¿

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx
    â”œâ”€â”€ page.tsx           # ä¸»å†…å®¹
    â”œâ”€â”€ @stats/
    â”‚   â””â”€â”€ page.tsx       # ç»Ÿè®¡é¢æ¿
    â”œâ”€â”€ @activity/
    â”‚   â””â”€â”€ page.tsx       # æ´»åŠ¨é¢æ¿
    â””â”€â”€ @notifications/
        â””â”€â”€ page.tsx       # é€šçŸ¥é¢æ¿
```

```tsx
// app/dashboard/layout.tsx
// Next.js 15.x

interface LayoutProps {
  children: React.ReactNode
  stats: React.ReactNode
  activity: React.ReactNode
  notifications: React.ReactNode
}

export default function DashboardLayout({
  children,
  stats,
  activity,
  notifications,
}: LayoutProps) {
  return (
    <div className="grid grid-cols-12 gap-4 p-4">
      {/* ä¸»å†…å®¹åŒº */}
      <main className="col-span-8">{children}</main>

      {/* ä¾§è¾¹æ  */}
      <aside className="col-span-4 space-y-4">
        <div className="bg-white rounded-lg p-4">{stats}</div>
        <div className="bg-white rounded-lg p-4">{activity}</div>
        <div className="bg-white rounded-lg p-4">{notifications}</div>
      </aside>
    </div>
  )
}
```

```tsx
// app/dashboard/@stats/page.tsx
// Next.js 15.x

export default async function StatsPanel() {
  const stats = await getStats()

  return (
    <div>
      <h3 className="font-bold mb-2">ç»Ÿè®¡æ•°æ®</h3>
      <div className="grid grid-cols-2 gap-2">
        <div>è®¿é—®é‡: {stats.visits}</div>
        <div>ç”¨æˆ·æ•°: {stats.users}</div>
      </div>
    </div>
  )
}
```

### ç‹¬ç«‹åŠ è½½çŠ¶æ€

æ¯ä¸ªæ’æ§½å¯ä»¥æœ‰ç‹¬ç«‹çš„ `loading.tsx`ï¼š

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ @stats/
    â”‚   â”œâ”€â”€ page.tsx
    â”‚   â””â”€â”€ loading.tsx    # ç»Ÿè®¡é¢æ¿åŠ è½½çŠ¶æ€
    â”œâ”€â”€ @activity/
    â”‚   â”œâ”€â”€ page.tsx
    â”‚   â””â”€â”€ loading.tsx    # æ´»åŠ¨é¢æ¿åŠ è½½çŠ¶æ€
    â””â”€â”€ @notifications/
        â”œâ”€â”€ page.tsx
        â””â”€â”€ loading.tsx    # é€šçŸ¥é¢æ¿åŠ è½½çŠ¶æ€
```

```tsx
// app/dashboard/@stats/loading.tsx
// Next.js 15.x

export default function StatsLoading() {
  return (
    <div className="animate-pulse">
      <div className="h-4 bg-gray-200 rounded w-1/2 mb-2"></div>
      <div className="h-8 bg-gray-200 rounded"></div>
    </div>
  )
}
```

ğŸ¯ **æ•ˆæœ**ï¼šä¸‰ä¸ªé¢æ¿ç‹¬ç«‹åŠ è½½ï¼Œäº’ä¸é˜»å¡ã€‚

### ç‹¬ç«‹é”™è¯¯å¤„ç†

```
app/
â””â”€â”€ dashboard/
    â””â”€â”€ @stats/
        â”œâ”€â”€ page.tsx
        â””â”€â”€ error.tsx      # ç»Ÿè®¡é¢æ¿é”™è¯¯è¾¹ç•Œ
```

```tsx
// app/dashboard/@stats/error.tsx
// Next.js 15.x
'use client'

export default function StatsError({
  error,
  reset,
}: {
  error: Error
  reset: () => void
}) {
  return (
    <div className="bg-red-50 p-4 rounded">
      <p className="text-red-600">ç»Ÿè®¡åŠ è½½å¤±è´¥</p>
      <button onClick={reset} className="text-sm underline">
        é‡è¯•
      </button>
    </div>
  )
}
```

## æ¡ä»¶æ¸²æŸ“

### åŸºäºç”¨æˆ·è§’è‰²

```tsx
// app/dashboard/layout.tsx
// Next.js 15.x
import { getSession } from '@/lib/auth'

interface LayoutProps {
  children: React.ReactNode
  admin: React.ReactNode
  user: React.ReactNode
}

export default async function DashboardLayout({
  children,
  admin,
  user,
}: LayoutProps) {
  const session = await getSession()
  const isAdmin = session?.role === 'admin'

  return (
    <div className="flex">
      <main className="flex-1">{children}</main>
      <aside className="w-80">{isAdmin ? admin : user}</aside>
    </div>
  )
}
```

### åŸºäºè®¤è¯çŠ¶æ€

```tsx
// app/layout.tsx
// Next.js 15.x
import { getSession } from '@/lib/auth'

interface LayoutProps {
  children: React.ReactNode
  auth: React.ReactNode
  dashboard: React.ReactNode
}

export default async function RootLayout({
  children,
  auth,
  dashboard,
}: LayoutProps) {
  const session = await getSession()

  return (
    <html>
      <body>
        {session ? dashboard : auth}
        {children}
      </body>
    </html>
  )
}
```

## default.tsx æ–‡ä»¶

å½“å¯¼èˆªåˆ°å­è·¯ç”±æ—¶ï¼Œçˆ¶çº§æ’æ§½éœ€è¦ `default.tsx` æ¥å®šä¹‰é»˜è®¤å†…å®¹ï¼š

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â”œâ”€â”€ @modal/
â”‚   â”œâ”€â”€ default.tsx       # é»˜è®¤ä¸æ˜¾ç¤ºæ¨¡æ€æ¡†
â”‚   â””â”€â”€ login/
â”‚       â””â”€â”€ page.tsx      # /login æ—¶æ˜¾ç¤ºç™»å½•æ¨¡æ€æ¡†
â””â”€â”€ settings/
    â””â”€â”€ page.tsx          # /settings
```

```tsx
// app/@modal/default.tsx
// Next.js 15.x

export default function ModalDefault() {
  return null // é»˜è®¤ä¸æ¸²æŸ“ä»»ä½•å†…å®¹
}
```

ğŸ”¶ **é‡è¦**ï¼šæ²¡æœ‰ `default.tsx` æ—¶ï¼Œå¯¼èˆªåˆ°éåŒ¹é…è·¯ç”±ä¼šå¯¼è‡´ 404ã€‚

## æ¨¡æ€æ¡†æ¨¡å¼

### åŸºç¡€æ¨¡æ€æ¡†

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â”œâ”€â”€ @modal/
â”‚   â”œâ”€â”€ default.tsx
â”‚   â””â”€â”€ (.)photo/
â”‚       â””â”€â”€ [id]/
â”‚           â””â”€â”€ page.tsx
â””â”€â”€ photo/
    â””â”€â”€ [id]/
        â””â”€â”€ page.tsx
```

```tsx
// app/layout.tsx
// Next.js 15.x

interface LayoutProps {
  children: React.ReactNode
  modal: React.ReactNode
}

export default function RootLayout({ children, modal }: LayoutProps) {
  return (
    <html>
      <body>
        {children}
        {modal}
      </body>
    </html>
  )
}
```

```tsx
// app/@modal/(.)photo/[id]/page.tsx
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'

interface PageProps {
  params: Promise<{ id: string }>
}

export default function PhotoModal({ params }: PageProps) {
  const router = useRouter()

  return (
    <div
      className="fixed inset-0 bg-black/50 flex items-center justify-center"
      onClick={() => router.back()}
    >
      <div
        className="bg-white p-4 rounded-lg max-w-lg"
        onClick={(e) => e.stopPropagation()}
      >
        <img src={`/photos/${params.id}.jpg`} alt="Photo" />
        <button onClick={() => router.back()}>å…³é—­</button>
      </div>
    </div>
  )
}
```

```tsx
// app/photo/[id]/page.tsx - ç‹¬ç«‹é¡µé¢ç‰ˆæœ¬
// Next.js 15.x

interface PageProps {
  params: Promise<{ id: string }>
}

export default async function PhotoPage({ params }: PageProps) {
  const { id } = await params

  return (
    <main className="p-8">
      <img src={`/photos/${id}.jpg`} alt="Photo" className="w-full" />
    </main>
  )
}
```

ğŸ¯ **æ•ˆæœ**ï¼š

- ç‚¹å‡»é“¾æ¥ â†’ æ˜¾ç¤ºæ¨¡æ€æ¡†ï¼ˆURL å˜ä¸º `/photo/1`ï¼‰
- åˆ·æ–°é¡µé¢ â†’ æ˜¾ç¤ºå®Œæ•´é¡µé¢
- ç‚¹å‡»é®ç½©/å…³é—­ â†’ è¿”å›ä¸Šä¸€é¡µ

### ç™»å½•æ¨¡æ€æ¡†

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â””â”€â”€ @auth/
    â”œâ”€â”€ default.tsx
    â””â”€â”€ (.)login/
        â””â”€â”€ page.tsx
```

```tsx
// app/@auth/(.)login/page.tsx
// Next.js 15.x
'use client'

import { useRouter } from 'next/navigation'

export default function LoginModal() {
  const router = useRouter()

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <div className="bg-white p-8 rounded-lg w-full max-w-md">
        <h2 className="text-xl font-bold mb-4">ç™»å½•</h2>
        <form>
          <input
            type="email"
            placeholder="é‚®ç®±"
            className="w-full p-2 border rounded mb-4"
          />
          <input
            type="password"
            placeholder="å¯†ç "
            className="w-full p-2 border rounded mb-4"
          />
          <button
            type="submit"
            className="w-full bg-blue-600 text-white p-2 rounded"
          >
            ç™»å½•
          </button>
        </form>
        <button
          onClick={() => router.back()}
          className="mt-4 text-gray-500 text-sm"
        >
          å–æ¶ˆ
        </button>
      </div>
    </div>
  )
}
```

## æ’æ§½ä¸è·¯ç”±åŒ¹é…

### è½¯å¯¼èˆª

ä»é¦–é¡µç‚¹å‡»é“¾æ¥åˆ° `/settings`ï¼š

```
é¦–é¡µ â†’ /settings
â”œâ”€â”€ @sidebar ä¿æŒå½“å‰çŠ¶æ€
â”œâ”€â”€ @modal ä¿æŒå½“å‰çŠ¶æ€
â””â”€â”€ children æ›´æ–°ä¸º settings å†…å®¹
```

### ç¡¬å¯¼èˆªï¼ˆåˆ·æ–°ï¼‰

ç›´æ¥è®¿é—® `/settings`ï¼š

```
ç›´æ¥è®¿é—® /settings
â”œâ”€â”€ @sidebar æ¸²æŸ“ default.tsx æˆ– settings/page.tsx
â”œâ”€â”€ @modal æ¸²æŸ“ default.tsx
â””â”€â”€ children æ¸²æŸ“ settings/page.tsx
```

## å®æˆ˜ç¤ºä¾‹

### å¯å…³é—­çš„ä¾§è¾¹é¢æ¿

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx
    â”œâ”€â”€ page.tsx
    â””â”€â”€ @panel/
        â”œâ”€â”€ default.tsx
        â””â”€â”€ details/
            â””â”€â”€ [id]/
                â””â”€â”€ page.tsx
```

```tsx
// app/dashboard/layout.tsx
// Next.js 15.x
'use client'

import { usePathname } from 'next/navigation'

interface LayoutProps {
  children: React.ReactNode
  panel: React.ReactNode
}

export default function DashboardLayout({ children, panel }: LayoutProps) {
  const pathname = usePathname()
  const showPanel = pathname.includes('/details/')

  return (
    <div className="flex">
      <main className={showPanel ? 'w-2/3' : 'w-full'}>{children}</main>
      {showPanel && <aside className="w-1/3 border-l">{panel}</aside>}
    </div>
  )
}
```

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: æ’æ§½ä¼šå½±å“ URL å—ï¼Ÿ**

ä¸ä¼šã€‚`@folder` åªæ˜¯ç»„ç»‡ä»£ç çš„æ–¹å¼ï¼Œä¸ä¼šå‡ºç°åœ¨ URL ä¸­ã€‚

ğŸ¤” **Q: å¯ä»¥åµŒå¥—æ’æ§½å—ï¼Ÿ**

å¯ä»¥ï¼Œä½†è¦å°å¿ƒç®¡ç† `default.tsx`ï¼š

```
app/
â”œâ”€â”€ @sidebar/
â”‚   â””â”€â”€ @submenu/
â”‚       â””â”€â”€ default.tsx
â””â”€â”€ layout.tsx
```

ğŸ¤” **Q: æ’æ§½å†…å®¹å¯ä»¥ç›¸äº’é€šä¿¡å—ï¼Ÿ**

é€šè¿‡ Contextã€URL å‚æ•°æˆ–çŠ¶æ€ç®¡ç†åº“ã€‚

---

ä¸‹ä¸€ç¯‡å°†ä»‹ç»æ‹¦æˆªè·¯ç”±ï¼Œå­¦ä¹  `(.)` è¯­æ³•å®ç°æ›´å¤æ‚çš„æ¨¡æ€æ¡†æ¨¡å¼ã€‚

-EOF-
