---
title: å›¾ç‰‡ä¼˜åŒ–
description: æŒæ¡ Next.js Image ç»„ä»¶ï¼Œå®ç°è‡ªåŠ¨ä¼˜åŒ–ã€æ‡’åŠ è½½ä¸å“åº”å¼å›¾ç‰‡
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'next/image', 'å›¾ç‰‡ä¼˜åŒ–', 'æ€§èƒ½']
---

ğŸ™‹ å›¾ç‰‡æ˜¯ç½‘é¡µåŠ è½½çš„å¤§å¤´ã€‚Next.js Image ç»„ä»¶èƒ½è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡ï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚

## ä¸ºä»€ä¹ˆä½¿ç”¨ next/image

| ç‰¹æ€§         | åŸç”Ÿ img | next/image   |
| ------------ | -------- | ------------ |
| è‡ªåŠ¨æ ¼å¼è½¬æ¢ | âŒ       | âœ… WebP/AVIF |
| å“åº”å¼å°ºå¯¸   | æ‰‹åŠ¨     | è‡ªåŠ¨         |
| æ‡’åŠ è½½       | æ‰‹åŠ¨     | é»˜è®¤å¼€å¯     |
| å°ºå¯¸ä¼˜åŒ–     | âŒ       | âœ…           |
| å¸ƒå±€ç¨³å®šæ€§   | âŒ       | âœ… é¿å… CLS  |

## åŸºç¡€ç”¨æ³•

### æœ¬åœ°å›¾ç‰‡

```tsx
// app/page.tsx
import Image from 'next/image'
import profilePic from './profile.jpg'

export default function Page() {
  return (
    <Image
      src={profilePic}
      alt="ä¸ªäººå¤´åƒ"
      // è‡ªåŠ¨æ¨æ–­å®½é«˜
      placeholder="blur" // æ¨¡ç³Šå ä½
    />
  )
}
```

æœ¬åœ°å›¾ç‰‡è‡ªåŠ¨è·å¾—ï¼š

- å®½é«˜æ¨æ–­ï¼ˆé¿å…å¸ƒå±€åç§»ï¼‰
- æ¨¡ç³Šå ä½ï¼ˆblur placeholderï¼‰

### è¿œç¨‹å›¾ç‰‡

```tsx
// app/page.tsx
import Image from 'next/image'

export default function Page() {
  return (
    <Image
      src="https://example.com/photo.jpg"
      alt="è¿œç¨‹å›¾ç‰‡"
      width={800}
      height={600}
    />
  )
}
```

ğŸ”¶ **æ³¨æ„**ï¼šè¿œç¨‹å›¾ç‰‡å¿…é¡»æŒ‡å®š `width` å’Œ `height`ï¼Œæˆ–ä½¿ç”¨ `fill` å±æ€§ã€‚

### é…ç½®è¿œç¨‹å›¾ç‰‡åŸŸå

```tsx
// next.config.ts
import type { NextConfig } from 'next'

const config: NextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'example.com',
        port: '',
        pathname: '/images/**',
      },
      {
        protocol: 'https',
        hostname: '**.cloudinary.com',
      },
    ],
  },
}

export default config
```

## å¸ƒå±€æ¨¡å¼

### å›ºå®šå°ºå¯¸

```tsx
<Image src="/photo.jpg" alt="å›ºå®šå°ºå¯¸" width={400} height={300} />
```

### å¡«å……å®¹å™¨ (fill)

```tsx
// å›¾ç‰‡å¡«å……çˆ¶å®¹å™¨
<div className="relative w-full h-64">
  <Image src="/photo.jpg" alt="å¡«å……å®¹å™¨" fill className="object-cover" />
</div>
```

### å“åº”å¼

```tsx
<Image
  src="/photo.jpg"
  alt="å“åº”å¼"
  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
  fill
  className="object-cover"
/>
```

`sizes` å‘Šè¯‰æµè§ˆå™¨åœ¨ä¸åŒè§†å£å®½åº¦ä¸‹å›¾ç‰‡çš„å®é™…æ˜¾ç¤ºå®½åº¦ã€‚

## å ä½ç¬¦

### æ¨¡ç³Šå ä½

```tsx
// æœ¬åœ°å›¾ç‰‡è‡ªåŠ¨æ”¯æŒ
import Image from 'next/image'
import photo from './photo.jpg'

<Image
  src={photo}
  alt="æ¨¡ç³Šå ä½"
  placeholder="blur"
/>

// è¿œç¨‹å›¾ç‰‡éœ€è¦æä¾› blurDataURL
<Image
  src="https://example.com/photo.jpg"
  alt="è¿œç¨‹å›¾ç‰‡"
  width={800}
  height={600}
  placeholder="blur"
  blurDataURL="data:image/jpeg;base64,/9j/4AAQSkZJRg..."
/>
```

### ç”Ÿæˆæ¨¡ç³Šæ•°æ®

```tsx
// lib/image.ts
import { getPlaiceholder } from 'plaiceholder'

export async function getBlurDataURL(src: string) {
  const buffer = await fetch(src).then((res) => res.arrayBuffer())
  const { base64 } = await getPlaiceholder(Buffer.from(buffer))
  return base64
}
```

```tsx
// app/photos/page.tsx
import Image from 'next/image'
import { getBlurDataURL } from '@/lib/image'

export default async function PhotosPage() {
  const photos = [
    { url: 'https://example.com/photo1.jpg', alt: 'ç…§ç‰‡1' },
    { url: 'https://example.com/photo2.jpg', alt: 'ç…§ç‰‡2' },
  ]

  const photosWithBlur = await Promise.all(
    photos.map(async (photo) => ({
      ...photo,
      blurDataURL: await getBlurDataURL(photo.url),
    }))
  )

  return (
    <div className="grid grid-cols-2 gap-4">
      {photosWithBlur.map((photo) => (
        <div key={photo.url} className="relative aspect-video">
          <Image
            src={photo.url}
            alt={photo.alt}
            fill
            placeholder="blur"
            blurDataURL={photo.blurDataURL}
          />
        </div>
      ))}
    </div>
  )
}
```

### é¢œè‰²å ä½

```tsx
<Image
  src="https://example.com/photo.jpg"
  alt="é¢œè‰²å ä½"
  width={800}
  height={600}
  placeholder="blur"
  blurDataURL="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNlNWU1ZTUiLz48L3N2Zz4="
/>
```

## åŠ è½½ä¼˜å…ˆçº§

### é¦–å±å›¾ç‰‡ä¼˜å…ˆåŠ è½½

```tsx
<Image
  src="/hero.jpg"
  alt="é¦–å±å¤§å›¾"
  width={1920}
  height={1080}
  priority // é¢„åŠ è½½ï¼Œç¦ç”¨æ‡’åŠ è½½
/>
```

### æ‡’åŠ è½½ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰

```tsx
<Image
  src="/photo.jpg"
  alt="æ‡’åŠ è½½å›¾ç‰‡"
  width={800}
  height={600}
  loading="lazy" // é»˜è®¤å€¼
/>
```

## å“åº”å¼å›¾ç‰‡

### srcset è‡ªåŠ¨ç”Ÿæˆ

```tsx
<Image
  src="/photo.jpg"
  alt="å“åº”å¼"
  width={800}
  height={600}
  // è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå°ºå¯¸
/>
```

ç”Ÿæˆçš„ HTML ç±»ä¼¼ï¼š

```html
<img
  srcset="
    /_next/image?url=%2Fphoto.jpg&w=640&q=75 640w,
    /_next/image?url=%2Fphoto.jpg&w=750&q=75 750w,
    /_next/image?url=%2Fphoto.jpg&w=828&q=75 828w,
    ...
  "
  sizes="100vw"
/>
```

### è‡ªå®šä¹‰ sizes

```tsx
// å“åº”å¼ç½‘æ ¼å¸ƒå±€
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {images.map((image) => (
    <div key={image.id} className="relative aspect-square">
      <Image
        src={image.url}
        alt={image.alt}
        fill
        sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
      />
    </div>
  ))}
</div>
```

## å›¾ç‰‡è´¨é‡

```tsx
// é»˜è®¤è´¨é‡ 75
<Image
  src="/photo.jpg"
  alt="é«˜è´¨é‡"
  width={800}
  height={600}
  quality={90}
/>

// ä½è´¨é‡ç”¨äºç¼©ç•¥å›¾
<Image
  src="/thumbnail.jpg"
  alt="ç¼©ç•¥å›¾"
  width={200}
  height={200}
  quality={50}
/>
```

å…¨å±€é…ç½®ï¼š

```tsx
// next.config.ts
const config: NextConfig = {
  images: {
    quality: 80, // å…¨å±€é»˜è®¤è´¨é‡
  },
}
```

## å›¾ç‰‡æ ¼å¼

Next.js è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ ¼å¼ï¼š

```tsx
// next.config.ts
const config: NextConfig = {
  images: {
    formats: ['image/avif', 'image/webp'],
    // æŒ‰é¡ºåºå°è¯•ï¼Œå›é€€åˆ°åŸæ ¼å¼
  },
}
```

## å¸¸è§æ¨¡å¼

### å¤´åƒç»„ä»¶

```tsx
// components/Avatar.tsx
import Image from 'next/image'

interface AvatarProps {
  src: string
  alt: string
  size?: 'sm' | 'md' | 'lg'
}

const sizes = {
  sm: 32,
  md: 48,
  lg: 64,
}

export function Avatar({ src, alt, size = 'md' }: AvatarProps) {
  const dimension = sizes[size]

  return (
    <Image
      src={src}
      alt={alt}
      width={dimension}
      height={dimension}
      className="rounded-full object-cover"
    />
  )
}
```

### å›¾ç‰‡ç”»å»Š

```tsx
// components/Gallery.tsx
'use client'

import Image from 'next/image'
import { useState } from 'react'

interface GalleryProps {
  images: { src: string; alt: string }[]
}

export function Gallery({ images }: GalleryProps) {
  const [selectedIndex, setSelectedIndex] = useState(0)

  return (
    <div className="space-y-4">
      {/* ä¸»å›¾ */}
      <div className="relative aspect-video">
        <Image
          src={images[selectedIndex].src}
          alt={images[selectedIndex].alt}
          fill
          className="object-contain"
          priority
        />
      </div>

      {/* ç¼©ç•¥å›¾ */}
      <div className="grid grid-cols-5 gap-2">
        {images.map((image, index) => (
          <button
            key={image.src}
            onClick={() => setSelectedIndex(index)}
            className={`relative aspect-square ${
              index === selectedIndex ? 'ring-2 ring-blue-600' : ''
            }`}
          >
            <Image
              src={image.src}
              alt={image.alt}
              fill
              className="object-cover"
              sizes="20vw"
            />
          </button>
        ))}
      </div>
    </div>
  )
}
```

### èƒŒæ™¯å›¾ç‰‡

```tsx
// components/Hero.tsx
import Image from 'next/image'

export function Hero() {
  return (
    <section className="relative h-screen">
      <Image
        src="/hero-bg.jpg"
        alt=""
        fill
        className="object-cover"
        priority
        quality={85}
      />
      <div className="absolute inset-0 bg-black/50" />
      <div className="relative z-10 flex items-center justify-center h-full">
        <h1 className="text-5xl font-bold text-white">æ¬¢è¿</h1>
      </div>
    </section>
  )
}
```

### äº§å“å¡ç‰‡

```tsx
// components/ProductCard.tsx
import Image from 'next/image'
import Link from 'next/link'

interface ProductCardProps {
  id: string
  name: string
  price: number
  image: string
}

export function ProductCard({ id, name, price, image }: ProductCardProps) {
  return (
    <Link href={`/products/${id}`} className="group">
      <div className="relative aspect-square overflow-hidden rounded-lg bg-gray-100">
        <Image
          src={image}
          alt={name}
          fill
          className="object-cover transition-transform group-hover:scale-105"
          sizes="(max-width: 768px) 50vw, (max-width: 1200px) 33vw, 25vw"
        />
      </div>
      <h3 className="mt-2 font-medium">{name}</h3>
      <p className="text-gray-600">Â¥{price}</p>
    </Link>
  )
}
```

## æ€§èƒ½ä¼˜åŒ–é…ç½®

```tsx
// next.config.ts
const config: NextConfig = {
  images: {
    // è®¾å¤‡å°ºå¯¸æ–­ç‚¹
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],

    // å›¾ç‰‡å°ºå¯¸æ–­ç‚¹
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],

    // æ ¼å¼ä¼˜å…ˆçº§
    formats: ['image/avif', 'image/webp'],

    // æœ€å°ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
    minimumCacheTTL: 60 * 60 * 24 * 30, // 30 å¤©

    // ç¦ç”¨é™æ€å¯¼å…¥
    disableStaticImages: false,

    // è‡ªå®šä¹‰ loader
    loader: 'default',
  },
}
```

## è‡ªå®šä¹‰ Loader

### ä½¿ç”¨ Cloudinary

```tsx
// lib/cloudinary-loader.ts
export default function cloudinaryLoader({
  src,
  width,
  quality,
}: {
  src: string
  width: number
  quality?: number
}) {
  const params = ['f_auto', 'c_limit', `w_${width}`, `q_${quality || 'auto'}`]
  return `https://res.cloudinary.com/demo/image/upload/${params.join(',')}${src}`
}
```

```tsx
// next.config.ts
const config: NextConfig = {
  images: {
    loader: 'custom',
    loaderFile: './lib/cloudinary-loader.ts',
  },
}
```

### ä½¿ç”¨ Imgix

```tsx
// lib/imgix-loader.ts
export default function imgixLoader({
  src,
  width,
  quality,
}: {
  src: string
  width: number
  quality?: number
}) {
  const url = new URL(`https://example.imgix.net${src}`)
  url.searchParams.set('auto', 'format')
  url.searchParams.set('fit', 'max')
  url.searchParams.set('w', width.toString())
  if (quality) {
    url.searchParams.set('q', quality.toString())
  }
  return url.href
}
```

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: è¿œç¨‹å›¾ç‰‡æŠ¥é”™æ€ä¹ˆåŠï¼Ÿ**

æ£€æŸ¥ `next.config.ts` æ˜¯å¦é…ç½®äº† `remotePatterns`ï¼š

```tsx
images: {
  remotePatterns: [
    { hostname: 'example.com' },
  ],
}
```

ğŸ¤” **Q: å¦‚ä½•ç¦ç”¨å›¾ç‰‡ä¼˜åŒ–ï¼Ÿ**

```tsx
<Image src="/photo.jpg" alt="æœªä¼˜åŒ–" width={800} height={600} unoptimized />
```

æˆ–å…¨å±€ç¦ç”¨ï¼š

```tsx
images: {
  unoptimized: true,
}
```

ğŸ¤” **Q: fill æ¨¡å¼å›¾ç‰‡å˜å½¢æ€ä¹ˆåŠï¼Ÿ**

ä½¿ç”¨ `object-fit`ï¼š

```tsx
<Image
  src="/photo.jpg"
  alt="ä¿æŒæ¯”ä¾‹"
  fill
  className="object-cover" // æˆ– object-contain
/>
```

---

ä¸‹ä¸€ç¯‡å°†ä»‹ç»å­—ä½“ä¼˜åŒ–ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨ next/font ä¼˜åŒ–å­—ä½“åŠ è½½ã€‚

-EOF-
