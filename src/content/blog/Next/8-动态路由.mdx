---
title: åŠ¨æ€è·¯ç”±
description: æ·±å…¥æŒæ¡ Next.js åŠ¨æ€è·¯ç”±çš„ä¸‰ç§æ¨¡å¼ï¼šå•å‚æ•° [slug]ã€æ•è·æ‰€æœ‰ [...slug] å’Œå¯é€‰æ•è· [[...slug]]
pubDate: 2025-12-03
toc: true
ogImage: true
category: Next
tags: ['Next.js', 'åŠ¨æ€è·¯ç”±', 'è·¯ç”±å‚æ•°', 'App Router']
---

ğŸ™‹ åšå®¢æ–‡ç« ã€ç”¨æˆ·ä¸»é¡µã€å•†å“è¯¦æƒ…...è¿™äº›è·¯å¾„ä¸å¯èƒ½é€ä¸ªæ‰‹å†™ã€‚åŠ¨æ€è·¯ç”±å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ

## åŠ¨æ€è·¯ç”±æ¦‚è¿°

åŠ¨æ€è·¯ç”±ä½¿ç”¨æ–¹æ‹¬å· `[]` è¯­æ³•å®šä¹‰å‚æ•°åŒ–è·¯å¾„ï¼š

| è¯­æ³•          | ç¤ºä¾‹              | åŒ¹é…            |
| ------------- | ----------------- | --------------- |
| `[slug]`      | `/blog/[slug]`    | `/blog/hello`   |
| `[...slug]`   | `/docs/[...slug]` | `/docs/a/b/c`   |
| `[[...slug]]` | `/[[...slug]]`    | `/` å’Œ `/a/b/c` |

## å•å‚æ•°åŠ¨æ€è·¯ç”± [param]

### åŸºç¡€ç”¨æ³•

```
app/
â””â”€â”€ blog/
    â””â”€â”€ [slug]/
        â””â”€â”€ page.tsx    # /blog/:slug
```

```tsx
// app/blog/[slug]/page.tsx
// Next.js 15.x

interface PageProps {
  params: Promise<{ slug: string }>
}

export default async function BlogPost({ params }: PageProps) {
  const { slug } = await params

  // æ ¹æ® slug è·å–æ–‡ç« æ•°æ®
  const post = await getPost(slug)

  return (
    <article>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
    </article>
  )
}

async function getPost(slug: string) {
  // æ¨¡æ‹Ÿæ•°æ®è·å–
  return {
    title: `æ–‡ç« : ${slug}`,
    content: 'è¿™æ˜¯æ–‡ç« å†…å®¹...',
  }
}
```

è®¿é—® `/blog/hello-world`ï¼Œ`slug` å€¼ä¸º `"hello-world"`ã€‚

### å¤šä¸ªåŠ¨æ€å‚æ•°

```
app/
â””â”€â”€ [category]/
    â””â”€â”€ [productId]/
        â””â”€â”€ page.tsx    # /:category/:productId
```

```tsx
// app/[category]/[productId]/page.tsx
// Next.js 15.x

interface PageProps {
  params: Promise<{
    category: string
    productId: string
  }>
}

export default async function ProductPage({ params }: PageProps) {
  const { category, productId } = await params

  return (
    <div>
      <p>åˆ†ç±»: {category}</p>
      <p>äº§å“ ID: {productId}</p>
    </div>
  )
}
```

è®¿é—® `/electronics/iphone-15`ï¼š

- `category` = `"electronics"`
- `productId` = `"iphone-15"`

### ç”Ÿæˆé™æ€è·¯å¾„

ä½¿ç”¨ `generateStaticParams` é¢„ç”Ÿæˆé™æ€é¡µé¢ï¼š

```tsx
// app/blog/[slug]/page.tsx
// Next.js 15.x

// æ„å»ºæ—¶ç”Ÿæˆè¿™äº›è·¯å¾„çš„é™æ€é¡µé¢
export async function generateStaticParams() {
  const posts = await getAllPosts()

  return posts.map((post) => ({
    slug: post.slug,
  }))
}

interface PageProps {
  params: Promise<{ slug: string }>
}

export default async function BlogPost({ params }: PageProps) {
  const { slug } = await params
  const post = await getPost(slug)

  return <article>{post.title}</article>
}
```

ğŸ¯ **æ•ˆæœ**ï¼šæ„å»ºæ—¶ä¸ºæ¯ç¯‡æ–‡ç« ç”Ÿæˆé™æ€ HTMLï¼Œè®¿é—®é€Ÿåº¦æå¿«ã€‚

## æ•è·æ‰€æœ‰è·¯ç”± [...slug]

### åŸºç¡€ç”¨æ³•

æ•è·è·¯å¾„ä¸­çš„æ‰€æœ‰æ®µï¼š

```
app/
â””â”€â”€ docs/
    â””â”€â”€ [...slug]/
        â””â”€â”€ page.tsx    # /docs/*
```

```tsx
// app/docs/[...slug]/page.tsx
// Next.js 15.x

interface PageProps {
  params: Promise<{ slug: string[] }>
}

export default async function DocsPage({ params }: PageProps) {
  const { slug } = await params

  // slug æ˜¯æ•°ç»„
  return (
    <div>
      <p>è·¯å¾„æ®µ: {slug.join(' / ')}</p>
      <p>æ®µæ•°é‡: {slug.length}</p>
    </div>
  )
}
```

åŒ¹é…ç¤ºä¾‹ï¼š

| URL                                  | slug å€¼                               |
| ------------------------------------ | ------------------------------------- |
| `/docs/intro`                        | `["intro"]`                           |
| `/docs/getting-started/installation` | `["getting-started", "installation"]` |
| `/docs/api/v2/users`                 | `["api", "v2", "users"]`              |
| `/docs`                              | âŒ ä¸åŒ¹é…                             |

ğŸ”¶ **æ³¨æ„**ï¼š`[...slug]` ä¸åŒ¹é…çˆ¶è·¯å¾„ `/docs`ã€‚

### æ–‡æ¡£ç½‘ç«™ç¤ºä¾‹

```tsx
// app/docs/[...slug]/page.tsx
// Next.js 15.x
import { notFound } from 'next/navigation'

// æ¨¡æ‹Ÿæ–‡æ¡£ç»“æ„
const docs: Record<string, { title: string; content: string }> = {
  'intro': {
    title: 'ç®€ä»‹',
    content: 'æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„æ–‡æ¡£...',
  },
  'getting-started/installation': {
    title: 'å®‰è£…',
    content: 'è¿è¡Œ npm install...',
  },
  'api/reference': {
    title: 'API å‚è€ƒ',
    content: 'API æ–‡æ¡£...',
  },
}

interface PageProps {
  params: Promise<{ slug: string[] }>
}

export default async function DocsPage({ params }: PageProps) {
  const { slug } = await params
  const path = slug.join('/')
  const doc = docs[path]

  if (!doc) {
    notFound()
  }

  return (
    <article>
      <nav className="text-sm text-gray-500 mb-4">
        {slug.map((segment, i) => (
          <span key={i}>
            {i > 0 && ' / '}
            {segment}
          </span>
        ))}
      </nav>
      <h1 className="text-2xl font-bold">{doc.title}</h1>
      <p className="mt-4">{doc.content}</p>
    </article>
  )
}
```

### ç”Ÿæˆé™æ€è·¯å¾„

```tsx
// app/docs/[...slug]/page.tsx

export async function generateStaticParams() {
  return [
    { slug: ['intro'] },
    { slug: ['getting-started', 'installation'] },
    { slug: ['getting-started', 'configuration'] },
    { slug: ['api', 'reference'] },
    { slug: ['api', 'examples'] },
  ]
}
```

## å¯é€‰æ•è·æ‰€æœ‰è·¯ç”± [[...slug]]

### åŸºç¡€ç”¨æ³•

åŒæ–¹æ‹¬å·ä½¿æ•è·å˜ä¸ºå¯é€‰ï¼Œå¯ä»¥åŒ¹é…çˆ¶è·¯å¾„ï¼š

```
app/
â””â”€â”€ [[...slug]]/
    â””â”€â”€ page.tsx    # / å’Œ /*
```

```tsx
// app/[[...slug]]/page.tsx
// Next.js 15.x

interface PageProps {
  params: Promise<{ slug?: string[] }>
}

export default async function CatchAllPage({ params }: PageProps) {
  const { slug } = await params

  if (!slug) {
    return <h1>é¦–é¡µ</h1>
  }

  return <h1>è·¯å¾„: /{slug.join('/')}</h1>
}
```

åŒ¹é…ç¤ºä¾‹ï¼š

| URL               | slug å€¼                    |
| ----------------- | -------------------------- |
| `/`               | `undefined`                |
| `/about`          | `["about"]`                |
| `/blog/2024/post` | `["blog", "2024", "post"]` |

### SPA é™çº§æ¨¡å¼

å¯é€‰æ•è·å¸¸ç”¨äº SPA é™çº§æˆ–æ—§ç«™ç‚¹è¿ç§»ï¼š

```tsx
// app/[[...slug]]/page.tsx
// Next.js 15.x
'use client'

import { useEffect } from 'react'
import { usePathname } from 'next/navigation'

export default function SPAFallback() {
  const pathname = usePathname()

  useEffect(() => {
    // å®¢æˆ·ç«¯è·¯ç”±å¤„ç†
    console.log('å½“å‰è·¯å¾„:', pathname)
  }, [pathname])

  return (
    <div>
      <h1>SPA åº”ç”¨</h1>
      {/* å®¢æˆ·ç«¯è·¯ç”±é€»è¾‘ */}
    </div>
  )
}
```

## è·å– URL å‚æ•°

### æŸ¥è¯¢å‚æ•° searchParams

```tsx
// app/search/page.tsx
// Next.js 15.x

interface PageProps {
  searchParams: Promise<{ [key: string]: string | string[] | undefined }>
}

export default async function SearchPage({ searchParams }: PageProps) {
  const { q, page, category } = await searchParams

  return (
    <div>
      <p>æœç´¢è¯: {q}</p>
      <p>é¡µç : {page ?? '1'}</p>
      <p>åˆ†ç±»: {Array.isArray(category) ? category.join(', ') : category}</p>
    </div>
  )
}
```

è®¿é—® `/search?q=next&page=2&category=docs&category=blog`ï¼š

- `q` = `"next"`
- `page` = `"2"`
- `category` = `["docs", "blog"]`

### å®¢æˆ·ç«¯è·å–å‚æ•°

```tsx
// components/SearchBox.tsx
// Next.js 15.x
'use client'

import { useSearchParams, usePathname, useRouter } from 'next/navigation'

export default function SearchBox() {
  const searchParams = useSearchParams()
  const pathname = usePathname()
  const router = useRouter()

  const query = searchParams.get('q') ?? ''

  const handleSearch = (term: string) => {
    const params = new URLSearchParams(searchParams.toString())

    if (term) {
      params.set('q', term)
    } else {
      params.delete('q')
    }

    router.push(`${pathname}?${params.toString()}`)
  }

  return (
    <input
      type="search"
      defaultValue={query}
      onChange={(e) => handleSearch(e.target.value)}
      placeholder="æœç´¢..."
    />
  )
}
```

## åŠ¨æ€å…ƒæ•°æ®

### åŸºäºå‚æ•°ç”Ÿæˆå…ƒæ•°æ®

```tsx
// app/blog/[slug]/page.tsx
// Next.js 15.x
import type { Metadata } from 'next'

interface PageProps {
  params: Promise<{ slug: string }>
}

export async function generateMetadata({
  params,
}: PageProps): Promise<Metadata> {
  const { slug } = await params
  const post = await getPost(slug)

  return {
    title: post.title,
    description: post.excerpt,
    openGraph: {
      title: post.title,
      description: post.excerpt,
      images: [post.coverImage],
    },
  }
}

export default async function BlogPost({ params }: PageProps) {
  const { slug } = await params
  const post = await getPost(slug)

  return <article>{post.content}</article>
}
```

## è·¯ç”±ä¼˜å…ˆçº§

å½“å¤šä¸ªè·¯ç”±å¯èƒ½åŒ¹é…æ—¶ï¼ŒNext.js æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§é€‰æ‹©ï¼š

1. **é™æ€è·¯ç”±** > **åŠ¨æ€è·¯ç”±**
2. **å…·ä½“è·¯ç”±** > **æ•è·æ‰€æœ‰è·¯ç”±**

```
app/
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx              # /blogï¼ˆä¼˜å…ˆï¼‰
â”‚   â”œâ”€â”€ featured/
â”‚   â”‚   â””â”€â”€ page.tsx          # /blog/featuredï¼ˆä¼˜å…ˆï¼‰
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx          # /blog/:slug
â””â”€â”€ [...slug]/
    â””â”€â”€ page.tsx              # å…¶ä»–æ‰€æœ‰è·¯å¾„
```

| URL              | åŒ¹é…                     |
| ---------------- | ------------------------ |
| `/blog`          | `blog/page.tsx`          |
| `/blog/featured` | `blog/featured/page.tsx` |
| `/blog/hello`    | `blog/[slug]/page.tsx`   |
| `/anything/else` | `[...slug]/page.tsx`     |

## å¸¸è§é—®é¢˜

ğŸ¤” **Q: åŠ¨æ€è·¯ç”±å¯ä»¥æœ‰é»˜è®¤å€¼å—ï¼Ÿ**

ä¸èƒ½ç›´æ¥è®¾ç½®é»˜è®¤å€¼ï¼Œä½†å¯ä»¥åœ¨ç»„ä»¶ä¸­å¤„ç†ï¼š

```tsx
export default async function Page({ params }) {
  const { slug = 'default' } = await params

  return <div>{slug}</div>
}
```

ğŸ¤” **Q: å¦‚ä½•éªŒè¯åŠ¨æ€å‚æ•°ï¼Ÿ**

```tsx
import { notFound } from 'next/navigation'

export default async function Page({ params }) {
  const { id } = await params

  // éªŒè¯ ID æ ¼å¼
  if (!/^\d+$/.test(id)) {
    notFound()
  }

  // éªŒè¯æ•°æ®å­˜åœ¨
  const data = await getData(id)
  if (!data) {
    notFound()
  }

  return <div>{data.name}</div>
}
```

ğŸ¤” **Q: åŠ¨æ€è·¯ç”±å’Œ API è·¯ç”±å¯ä»¥åŒè·¯å¾„å—ï¼Ÿ**

ä¸è¡Œã€‚`page.tsx` å’Œ `route.ts` ä¸èƒ½åœ¨åŒä¸€ç›®å½•ï¼š

```
app/
â””â”€â”€ api/
    â””â”€â”€ users/
        â”œâ”€â”€ page.tsx   # âŒ å†²çª
        â””â”€â”€ route.ts   # âŒ å†²çª
```

---

ä¸‹ä¸€ç¯‡å°†æ·±å…¥åµŒå¥—è·¯ç”±ä¸å¸ƒå±€ï¼Œæ¢ç´¢å¦‚ä½•æ„å»ºå¤æ‚çš„é¡µé¢ç»“æ„ã€‚

-EOF-
