---
title: Astro é›†æˆä¸éƒ¨ç½²
description: å­¦ä¹ ä½¿ç”¨ Astro å®˜æ–¹é›†æˆæ‰©å±•åŠŸèƒ½ï¼ŒæŒæ¡æ„å»ºä¼˜åŒ–ç­–ç•¥å’Œå¤šå¹³å°éƒ¨ç½²æ–¹æ¡ˆ
pubDate: 2025-12-02
toc: true
ogImage: true
category: Astro
tags: ['Astro', 'é›†æˆ', 'éƒ¨ç½²', 'Vercel', 'Netlify']
---

## é›†æˆç³»ç»Ÿæ¦‚è¿°

ğŸ™‹ Astro çš„å¼ºå¤§ä¹‹å¤„ä¸ä»…åœ¨äºæ¡†æ¶æœ¬èº«ï¼Œæ›´åœ¨äºå…¶ä¸°å¯Œçš„é›†æˆç”Ÿæ€ã€‚ä» MDX æ”¯æŒåˆ°ç«™ç‚¹åœ°å›¾ç”Ÿæˆï¼Œä» React ç»„ä»¶åˆ°å›¾ç‰‡ä¼˜åŒ–ï¼Œå‡ ä¹æ‰€æœ‰å¸¸è§éœ€æ±‚éƒ½æœ‰ç°æˆçš„é›†æˆå¯ç”¨ã€‚

### ä»€ä¹ˆæ˜¯ Astro é›†æˆï¼Ÿ

é›†æˆï¼ˆIntegrationï¼‰æ˜¯æ‰©å±• Astro åŠŸèƒ½çš„æ’ä»¶ç³»ç»Ÿã€‚å®ƒä»¬å¯ä»¥ï¼š

- ğŸ”§ æ·»åŠ æ–°çš„æ–‡ä»¶ç±»å‹æ”¯æŒï¼ˆMDXã€Svelteã€Vueï¼‰
- ğŸ“¦ æ³¨å…¥æ„å»ºæ—¶å¤„ç†é€»è¾‘ï¼ˆå›¾ç‰‡ä¼˜åŒ–ã€ç«™ç‚¹åœ°å›¾ï¼‰
- ğŸ¨ é›†æˆ CSS æ¡†æ¶ï¼ˆTailwindã€UnoCSSï¼‰
- ğŸš€ é…ç½®éƒ¨ç½²é€‚é…å™¨ï¼ˆVercelã€Netlifyã€Node.jsï¼‰

### å®˜æ–¹é›†æˆ vs ç¤¾åŒºé›†æˆ

| ç±»å‹     | ç‰¹ç‚¹                     | ç¤ºä¾‹                                        |
| -------- | ------------------------ | ------------------------------------------- |
| å®˜æ–¹é›†æˆ | Astro å›¢é˜Ÿç»´æŠ¤ï¼Œç¨³å®šå¯é  | `@astrojs/mdx`, `@astrojs/sitemap`          |
| ç¤¾åŒºé›†æˆ | ç¤¾åŒºè´¡çŒ®ï¼ŒåŠŸèƒ½ä¸°å¯Œ       | `astro-robots-txt`, `astro-expressive-code` |

æŸ¥æ‰¾é›†æˆï¼š

- [Astro é›†æˆç›®å½•](https://astro.build/integrations/)
- npm æœç´¢ `astro-` æˆ– `@astrojs/`

### astro add å‘½ä»¤å¿«é€Ÿå®‰è£…

æœ€ç®€å•çš„å®‰è£…æ–¹å¼æ˜¯ä½¿ç”¨ `astro add` å‘½ä»¤ï¼š

```bash
# å®‰è£…å•ä¸ªé›†æˆ
pnpm astro add mdx

# å®‰è£…å¤šä¸ªé›†æˆ
pnpm astro add react sitemap tailwind

# ä½¿ç”¨ npm
npx astro add mdx

# ä½¿ç”¨ yarn
yarn astro add mdx
```

`astro add` ä¼šè‡ªåŠ¨ï¼š

1. å®‰è£… npm åŒ…
2. æ›´æ–° `astro.config.ts` é…ç½®
3. å®‰è£…å¿…è¦çš„ä¾èµ–

## å¸¸ç”¨å®˜æ–¹é›†æˆ

### @astrojs/mdx - MDX æ”¯æŒ

MDX è®©ä½ åœ¨ Markdown ä¸­ä½¿ç”¨ JSX ç»„ä»¶ï¼š

```bash
pnpm astro add mdx
```

å®‰è£…åå¯ä»¥åœ¨ `.mdx` æ–‡ä»¶ä¸­ï¼š

```mdx
---
title: 'æˆ‘çš„æ–‡ç« '
---

import Chart from '../components/Chart.jsx'
import { Button } from '../components/Button.astro'

# æ ‡é¢˜

è¿™æ˜¯æ™®é€šçš„ Markdown å†…å®¹ã€‚

<Chart data={[1, 2, 3]} client:visible />

<Button>ç‚¹å‡»æˆ‘</Button>

export const year = 2025

å½“å‰å¹´ä»½æ˜¯ {year}ã€‚
```

**é…ç½®é€‰é¡¹**ï¼š

```typescript
// astro.config.ts
import mdx from '@astrojs/mdx'

export default defineConfig({
  integrations: [
    mdx({
      // è‡ªå®šä¹‰ remark æ’ä»¶
      remarkPlugins: [remarkGfm],
      // è‡ªå®šä¹‰ rehype æ’ä»¶
      rehypePlugins: [rehypeSlug],
      // ä¼˜åŒ–é€‰é¡¹
      optimize: true,
    }),
  ],
})
```

### @astrojs/sitemap - ç«™ç‚¹åœ°å›¾

è‡ªåŠ¨ç”Ÿæˆ `sitemap.xml`ï¼Œå¸®åŠ©æœç´¢å¼•æ“ç´¢å¼•ç½‘ç«™ï¼š

```bash
pnpm astro add sitemap
```

**é…ç½®**ï¼š

```typescript
// astro.config.ts
import sitemap from '@astrojs/sitemap'

export default defineConfig({
  site: 'https://example.com', // å¿…é¡»è®¾ç½®
  integrations: [
    sitemap({
      // è‡ªå®šä¹‰è¿‡æ»¤
      filter: (page) => !page.includes('/admin/'),
      // æ›´æ”¹é¢‘ç‡
      changefreq: 'weekly',
      // ä¼˜å…ˆçº§
      priority: 0.7,
      // å¤šè¯­è¨€æ”¯æŒ
      i18n: {
        defaultLocale: 'zh',
        locales: {
          zh: 'zh-Hans',
          en: 'en-US',
        },
      },
    }),
  ],
})
```

æ„å»ºåä¼šç”Ÿæˆï¼š

- `dist/sitemap-index.xml`
- `dist/sitemap-0.xml`

### @astrojs/rss - RSS è®¢é˜…

ç”Ÿæˆ RSS feedï¼Œè®©è¯»è€…è®¢é˜…ä½ çš„å†…å®¹ï¼š

```bash
pnpm astro add rss
```

åˆ›å»º RSS ç«¯ç‚¹ï¼š

```typescript
// src/pages/rss.xml.ts
import rss from '@astrojs/rss'
import { getCollection } from 'astro:content'
import { SITE } from '~/config'

export async function GET(context) {
  const posts = await getCollection('blog')

  const sortedPosts = posts
    .filter((post) => !post.data.draft)
    .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())

  return rss({
    title: SITE.title,
    description: SITE.description,
    site: context.site,
    items: sortedPosts.map((post) => ({
      title: post.data.title,
      description: post.data.description,
      pubDate: post.data.pubDate,
      link: `/blog/${post.id}/`,
    })),
    customData: `<language>zh-Hans</language>`,
  })
}
```

### UI æ¡†æ¶é›†æˆ

**React**:

```bash
pnpm astro add react
```

```typescript
// astro.config.ts
import react from '@astrojs/react'

export default defineConfig({
  integrations: [react()],
})
```

**Vue**:

```bash
pnpm astro add vue
```

**Svelte**:

```bash
pnpm astro add svelte
```

å®‰è£…åå³å¯å¯¼å…¥å¯¹åº”æ¡†æ¶çš„ç»„ä»¶ï¼š

```astro
---
import ReactComponent from '../components/React.jsx'
import VueComponent from '../components/Vue.vue'
import SvelteComponent from '../components/Svelte.svelte'
---

<ReactComponent client:load />
<VueComponent client:idle />
<SvelteComponent client:visible />
```

## æ„å»ºä¼˜åŒ–

### å›¾ç‰‡ä¼˜åŒ–

Astro å†…ç½®å›¾ç‰‡ä¼˜åŒ–åŠŸèƒ½ï¼Œè‡ªåŠ¨å¤„ç†å›¾ç‰‡ï¼š

```astro
---
import { Image } from 'astro:assets'
import myImage from '../assets/hero.png'
---

<!-- è‡ªåŠ¨ä¼˜åŒ–ï¼šå‹ç¼©ã€ç”Ÿæˆå¤šç§æ ¼å¼ã€å“åº”å¼ -->
<Image src={myImage} alt="Hero image" />

<!-- æŒ‡å®šå°ºå¯¸ -->
<Image src={myImage} width={800} height={600} alt="Sized image" />

<!-- è¿œç¨‹å›¾ç‰‡ -->
<Image
  src="https://example.com/image.jpg"
  width={800}
  height={600}
  alt="Remote image"
/>
```

**é…ç½®å›¾ç‰‡ä¼˜åŒ–**ï¼š

```typescript
// astro.config.ts
export default defineConfig({
  image: {
    // å…è®¸çš„è¿œç¨‹å›¾ç‰‡åŸŸå
    domains: ['cdn.example.com', 'images.unsplash.com'],
    // å“åº”å¼å›¾ç‰‡è¡Œä¸º
    layout: 'constrained',
    responsiveStyles: true,
  },
})
```

### é¢„å–é“¾æ¥ (Prefetch)

Astro å†…ç½®é“¾æ¥é¢„å–åŠŸèƒ½ï¼Œæå‡å¯¼èˆªé€Ÿåº¦ï¼š

```typescript
// astro.config.ts
export default defineConfig({
  prefetch: {
    // é¢„å–ç­–ç•¥
    defaultStrategy: 'viewport', // è¿›å…¥è§†å£æ—¶é¢„å–
    // æˆ– 'hover' - é¼ æ ‡æ‚¬åœæ—¶é¢„å–
    // æˆ– 'load' - é¡µé¢åŠ è½½åé¢„å–æ‰€æœ‰
  },
})
```

åœ¨é“¾æ¥ä¸Šæ§åˆ¶é¢„å–ï¼š

```astro
<!-- ä½¿ç”¨é»˜è®¤ç­–ç•¥ -->
<a href="/about">å…³äº</a>

<!-- å¼ºåˆ¶é¢„å– -->
<a href="/contact" data-astro-prefetch>è”ç³»</a>

<!-- ç¦ç”¨é¢„å– -->
<a href="/external" data-astro-prefetch="false">å¤–éƒ¨é“¾æ¥</a>

<!-- æŒ‡å®šç­–ç•¥ -->
<a href="/heavy-page" data-astro-prefetch="hover">æ‚¬åœé¢„å–</a>
```

### å‹ç¼©ä¸ç¼“å­˜ç­–ç•¥

**HTML å‹ç¼©**ï¼ˆä½¿ç”¨ `astro-compress`ï¼‰ï¼š

```bash
pnpm add astro-compress
```

```typescript
// astro.config.ts
import compress from 'astro-compress'

export default defineConfig({
  integrations: [
    compress({
      CSS: true,
      HTML: true,
      JavaScript: true,
      Image: false, // å·²æœ‰å†…ç½®ä¼˜åŒ–
      SVG: true,
    }),
  ],
})
```

**èµ„æºå“ˆå¸Œ**ï¼š

Astro æ„å»ºæ—¶è‡ªåŠ¨ä¸ºèµ„æºæ·»åŠ å†…å®¹å“ˆå¸Œï¼Œå®ç°é•¿æœŸç¼“å­˜ï¼š

```
dist/
â”œâ”€â”€ _astro/
â”‚   â”œâ”€â”€ index.a1b2c3d4.css
â”‚   â””â”€â”€ script.e5f6g7h8.js
```

### View Transitions

Astro å†…ç½® View Transitions API æ”¯æŒï¼Œå®ç°é¡µé¢è¿‡æ¸¡åŠ¨ç”»ï¼š

```astro
---
// src/layouts/Layout.astro
import { ViewTransitions } from 'astro:transitions'
---

<html>
  <head>
    <ViewTransitions />
  </head>
  <body>
    <slot />
  </body>
</html>
```

è‡ªå®šä¹‰è¿‡æ¸¡åŠ¨ç”»ï¼š

```astro
---
import { fade, slide } from 'astro:transitions'
---

<header transition:animate={fade({ duration: '0.3s' })}>
  <nav>...</nav>
</header>

<main transition:animate={slide({ duration: '0.5s' })}>
  <slot />
</main>
```

## éƒ¨ç½²æ–¹å¼

### é™æ€æ‰˜ç®¡ (SSG)

é»˜è®¤æƒ…å†µä¸‹ï¼ŒAstro ç”Ÿæˆé™æ€ HTML æ–‡ä»¶ï¼Œå¯ä»¥éƒ¨ç½²åˆ°ä»»ä½•é™æ€æ‰˜ç®¡æœåŠ¡ã€‚

**Vercel**ï¼š

```bash
# å®‰è£…é€‚é…å™¨ï¼ˆå¯é€‰ï¼Œç”¨äºè¾¹ç¼˜ä¼˜åŒ–ï¼‰
pnpm astro add vercel
```

æ¨é€åˆ° GitHub åï¼Œåœ¨ Vercel å¯¼å…¥é¡¹ç›®å³å¯ã€‚

**Netlify**ï¼š

```bash
pnpm astro add netlify
```

é…ç½® `netlify.toml`ï¼š

```toml
[build]
  command = "pnpm build"
  publish = "dist"
```

**Cloudflare Pages**ï¼š

```bash
pnpm astro add cloudflare
```

åœ¨ Cloudflare Dashboard è¿æ¥ Git ä»“åº“ï¼Œè®¾ç½®ï¼š

- Build command: `pnpm build`
- Build output directory: `dist`

### æœåŠ¡ç«¯æ¸²æŸ“ (SSR)

éœ€è¦åŠ¨æ€å†…å®¹æ—¶ï¼Œä½¿ç”¨ SSR æ¨¡å¼ï¼š

```typescript
// astro.config.ts
export default defineConfig({
  output: 'server',  // æˆ– 'hybrid'
  adapter: /* é€‚é…å™¨ */,
})
```

**Node.js é€‚é…å™¨**ï¼š

```bash
pnpm astro add node
```

```typescript
import node from '@astrojs/node'

export default defineConfig({
  output: 'server',
  adapter: node({
    mode: 'standalone', // æˆ– 'middleware'
  }),
})
```

æ„å»ºåè¿è¡Œï¼š

```bash
pnpm build
node ./dist/server/entry.mjs
```

**Vercel SSR**ï¼š

```typescript
import vercel from '@astrojs/vercel'

export default defineConfig({
  output: 'server',
  adapter: vercel({
    // Edge Functions
    edgeMiddleware: true,
    // å›¾ç‰‡ä¼˜åŒ–æœåŠ¡
    imageService: true,
  }),
})
```

**Netlify SSR**ï¼š

```typescript
import netlify from '@astrojs/netlify'

export default defineConfig({
  output: 'server',
  adapter: netlify({
    // Edge Functions
    edgeMiddleware: true,
  }),
})
```

### æ··åˆæ¨¡å¼ (Hybrid)

å¤§éƒ¨åˆ†é¡µé¢é™æ€ï¼Œå°‘æ•°é¡µé¢ SSRï¼š

```typescript
export default defineConfig({
  output: 'hybrid', // é»˜è®¤é™æ€
  adapter: vercel(),
})
```

æ ‡è®°éœ€è¦ SSR çš„é¡µé¢ï¼š

```astro
---
// src/pages/api/search.astro
export const prerender = false // ç¦ç”¨é¢„æ¸²æŸ“
---
```

æˆ–è€…æ ‡è®°é™æ€é¡µé¢ï¼š

```astro
---
// src/pages/about.astro
export const prerender = true // å¼ºåˆ¶é¢„æ¸²æŸ“
---
```

## éƒ¨ç½²å®æˆ˜

### ç¯å¢ƒå˜é‡é…ç½®

Astro æ”¯æŒ `.env` æ–‡ä»¶ï¼š

```bash
# .env
PUBLIC_SITE_URL=https://example.com
API_SECRET=your-secret-key
```

åœ¨ä»£ç ä¸­è®¿é—®ï¼š

```typescript
// å…¬å¼€å˜é‡ï¼ˆå®¢æˆ·ç«¯å¯è®¿é—®ï¼‰
const siteUrl = import.meta.env.PUBLIC_SITE_URL

// ç§æœ‰å˜é‡ï¼ˆä»…æœåŠ¡ç«¯ï¼‰
const apiSecret = import.meta.env.API_SECRET

// å†…ç½®å˜é‡
const isDev = import.meta.env.DEV
const isProd = import.meta.env.PROD
const mode = import.meta.env.MODE // 'development' | 'production'
```

**ç±»å‹å£°æ˜**ï¼š

```typescript
// src/env.d.ts
/// <reference types="astro/client" />

interface ImportMetaEnv {
  readonly PUBLIC_SITE_URL: string
  readonly API_SECRET: string
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

### æ„å»ºå‘½ä»¤ä¸è¾“å‡ºç›®å½•

```json
// package.json
{
  "scripts": {
    "dev": "astro dev",
    "build": "astro build",
    "preview": "astro preview",
    "check": "astro check"
  }
}
```

è¾“å‡ºç›®å½•ç»“æ„ï¼š

```
dist/
â”œâ”€â”€ _astro/          # é™æ€èµ„æºï¼ˆå¸¦å“ˆå¸Œï¼‰
â”‚   â”œâ”€â”€ index.css
â”‚   â””â”€â”€ script.js
â”œâ”€â”€ blog/            # åšå®¢é¡µé¢
â”‚   â””â”€â”€ hello-world/
â”‚       â””â”€â”€ index.html
â”œâ”€â”€ index.html       # é¦–é¡µ
â”œâ”€â”€ sitemap-index.xml
â”œâ”€â”€ sitemap-0.xml
â””â”€â”€ robots.txt
```

### è‡ªå®šä¹‰åŸŸåé…ç½®

**è®¾ç½®ç«™ç‚¹ URL**ï¼š

```typescript
// astro.config.ts
export default defineConfig({
  site: 'https://wangshengliang.cn',
  base: '/', // å¦‚æœéƒ¨ç½²åœ¨å­è·¯å¾„
})
```

**DNS é…ç½®**ï¼ˆä»¥ Vercel ä¸ºä¾‹ï¼‰ï¼š

1. åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ åŸŸå
2. åœ¨åŸŸå DNS æ·»åŠ è®°å½•ï¼š
   - A è®°å½•æŒ‡å‘ `76.76.19.19`
   - æˆ– CNAME æŒ‡å‘ `cname.vercel-dns.com`

### CI/CD è‡ªåŠ¨éƒ¨ç½²

**GitHub Actions ç¤ºä¾‹**ï¼š

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  push:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 8

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: pnpm

      - name: Install dependencies
        run: pnpm install

      - name: Build
        run: pnpm build

      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: '--prod'
```

## å®æˆ˜ï¼šå½“å‰åšå®¢çš„æŠ€æœ¯æ ˆ

è®©æˆ‘ä»¬åˆ†æå½“å‰åšå®¢ä½¿ç”¨çš„å®Œæ•´æŠ€æœ¯æ ˆã€‚

### astro.config.ts é…ç½®åˆ†æ

```typescript
// astro.config.ts
import { defineConfig } from 'astro/config'
import sitemap from '@astrojs/sitemap'
import robotsTxt from 'astro-robots-txt'
import unocss from 'unocss/astro'
import astroExpressiveCode from 'astro-expressive-code'
import mdx from '@astrojs/mdx'

import { remarkPlugins, rehypePlugins } from './plugins'
import { SITE } from './src/config'

export default defineConfig({
  site: SITE.website, // https://wangshengliang.cn/
  base: SITE.base, // /

  integrations: [
    sitemap(), // ç«™ç‚¹åœ°å›¾
    robotsTxt(), // robots.txt
    unocss({ injectReset: true }), // åŸå­åŒ– CSS
    astroExpressiveCode(), // ä»£ç å—å¢å¼º
    mdx(), // MDX æ”¯æŒ
  ],

  markdown: {
    syntaxHighlight: false, // ä½¿ç”¨ Expressive Code
    remarkPlugins, // Remark æ’ä»¶
    rehypePlugins, // Rehype æ’ä»¶
  },

  image: {
    domains: SITE.imageDomains,
    layout: 'constrained',
    responsiveStyles: true,
  },

  experimental: {
    contentIntellisense: true, // å†…å®¹é›†åˆæ™ºèƒ½æç¤º
  },
})
```

### ä½¿ç”¨çš„é›†æˆæ¸…å•

| é›†æˆ                    | ç”¨é€”                 |
| ----------------------- | -------------------- |
| `@astrojs/sitemap`      | è‡ªåŠ¨ç”Ÿæˆç«™ç‚¹åœ°å›¾     |
| `@astrojs/mdx`          | MDX æ”¯æŒ             |
| `astro-robots-txt`      | ç”Ÿæˆ robots.txt      |
| `unocss/astro`          | åŸå­åŒ– CSS æ¡†æ¶      |
| `astro-expressive-code` | ä»£ç å—è¯­æ³•é«˜äº®å’Œå¢å¼º |

### Remark/Rehype æ’ä»¶é“¾

Remark å’Œ Rehype æ’ä»¶ç”¨äºå¤„ç† Markdown å†…å®¹ï¼š

```typescript
// plugins/index.ts
import remarkGfm from 'remark-gfm'
import remarkMath from 'remark-math'
import rehypeKatex from 'rehype-katex'
import rehypeSlug from 'rehype-slug'
import rehypeAutolinkHeadings from 'rehype-autolink-headings'

export const remarkPlugins = [
  remarkGfm, // GitHub é£æ ¼ Markdown
  remarkMath, // æ•°å­¦å…¬å¼è¯­æ³•
]

export const rehypePlugins = [
  rehypeKatex, // KaTeX æ•°å­¦æ¸²æŸ“
  rehypeSlug, // ä¸ºæ ‡é¢˜æ·»åŠ  id
  rehypeAutolinkHeadings, // æ ‡é¢˜é”šç‚¹é“¾æ¥
]
```

### æœç´¢åŠŸèƒ½ (Pagefind)

å½“å‰åšå®¢ä½¿ç”¨ Pagefind å®ç°å…¨ç«™æœç´¢ï¼š

```json
// package.json
{
  "scripts": {
    "build": "astro build && pagefind --site dist"
  }
}
```

Pagefind ç‰¹ç‚¹ï¼š

- æ„å»ºæ—¶ç”Ÿæˆæœç´¢ç´¢å¼•
- æå°çš„ JavaScript ä½“ç§¯ï¼ˆ~10KBï¼‰
- æ”¯æŒä¸­æ–‡åˆ†è¯
- æ— éœ€åç«¯æœåŠ¡

### è¯„è®ºç³»ç»Ÿ (Giscus)

åŸºäº GitHub Discussions çš„è¯„è®ºç³»ç»Ÿï¼š

```typescript
// src/config.ts
export const FEATURES = {
  giscus: [
    true,
    {
      'data-repo': 'wangshengliang-wsl/blog',
      'data-repo-id': 'R_kgDOP4yOiQ',
      'data-category': 'Announcements',
      'data-category-id': 'DIC_kwDOP4yOic4CwBgk',
      'data-mapping': 'pathname',
      'data-lang': 'zh-CN',
    },
  ],
}
```

Giscus ç»„ä»¶ï¼š

```astro
---
// src/components/Giscus.astro
import { FEATURES } from '~/config'

const [enabled, config] = FEATURES.giscus
if (!enabled) return null
---

<section class="giscus-container mt-8">
  <script
    src="https://giscus.app/client.js"
    data-repo={config['data-repo']}
    data-repo-id={config['data-repo-id']}
    data-category={config['data-category']}
    data-category-id={config['data-category-id']}
    data-mapping={config['data-mapping']}
    data-lang={config['data-lang']}
    crossorigin="anonymous"
    async></script>
</section>
```

### OG å›¾ç‰‡ç”Ÿæˆ

OGï¼ˆOpen Graphï¼‰å›¾ç‰‡ç”¨äºç¤¾äº¤åª’ä½“åˆ†äº«é¢„è§ˆï¼š

```typescript
// plugins/og-image.ts
// è‡ªåŠ¨ä¸ºæ¯ç¯‡æ–‡ç« ç”Ÿæˆ OG å›¾ç‰‡
// ä½¿ç”¨ Satori æˆ– @vercel/og ç”Ÿæˆ SVG/PNG
```

## éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤ï¼š

- [ ] `astro.config.ts` ä¸­è®¾ç½®äº†æ­£ç¡®çš„ `site` URL
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®ï¼ˆæœ¬åœ° `.env` å’Œéƒ¨ç½²å¹³å°ï¼‰
- [ ] è¿è¡Œ `pnpm build` æ— é”™è¯¯
- [ ] è¿è¡Œ `pnpm preview` æœ¬åœ°é¢„è§ˆæ­£å¸¸
- [ ] `robots.txt` å’Œ `sitemap.xml` æ­£ç¡®ç”Ÿæˆ
- [ ] å›¾ç‰‡ä¼˜åŒ–æ­£å¸¸å·¥ä½œ
- [ ] æœç´¢åŠŸèƒ½ï¼ˆå¦‚æœ‰ï¼‰ç´¢å¼•å®Œæˆ
- [ ] è¯„è®ºç³»ç»Ÿï¼ˆå¦‚æœ‰ï¼‰é…ç½®æ­£ç¡®

## æ€§èƒ½ä¼˜åŒ–æ€»ç»“

ğŸ¯ å½“å‰åšå®¢çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼š

1. **é›¶ JavaScript é»˜è®¤** - åªæœ‰äº¤äº’ç»„ä»¶åŠ è½½ JS
2. **å›¾ç‰‡ä¼˜åŒ–** - è‡ªåŠ¨å‹ç¼©ã€æ ¼å¼è½¬æ¢ã€å“åº”å¼
3. **èµ„æºå“ˆå¸Œ** - é•¿æœŸç¼“å­˜é™æ€èµ„æº
4. **é¢„å–é“¾æ¥** - æå‡é¡µé¢å¯¼èˆªé€Ÿåº¦
5. **å†…å®¹ç´¢å¼•** - Pagefind ç¦»çº¿æœç´¢
6. **åŸå­åŒ– CSS** - UnoCSS æŒ‰éœ€ç”Ÿæˆ

## ç³»åˆ—æ€»ç»“

ğŸ‰ æ­å–œä½ å®Œæˆäº† Astro ç³»åˆ—çš„å­¦ä¹ ï¼å›é¡¾ä¸€ä¸‹æˆ‘ä»¬å­¦åˆ°çš„å†…å®¹ï¼š

1. **å…¥é—¨æŒ‡å—** - Astro æ ¸å¿ƒç†å¿µã€å²›å±¿æ¶æ„ã€é¡¹ç›®åˆ›å»º
2. **è·¯ç”±ä¸é¡µé¢** - æ–‡ä»¶è·¯ç”±ã€åŠ¨æ€è·¯ç”±ã€åˆ†é¡µå®ç°
3. **ç»„ä»¶ä¸æ ·å¼** - ç»„ä»¶ç³»ç»Ÿã€æ¡†æ¶é›†æˆã€æ ·å¼æ–¹æ¡ˆ
4. **å†…å®¹é›†åˆ** - Content Layer APIã€Schema éªŒè¯
5. **é›†æˆä¸éƒ¨ç½²** - å®˜æ–¹é›†æˆã€æ„å»ºä¼˜åŒ–ã€éƒ¨ç½²æ–¹æ¡ˆ

ç°åœ¨ä½ å·²ç»å…·å¤‡äº†ç”¨ Astro æ„å»ºå†…å®¹é©±åŠ¨ç½‘ç«™çš„å®Œæ•´çŸ¥è¯†ã€‚åŠ¨æ‰‹å®è·µå§ï¼

## å‚è€ƒèµ„æ–™

- [Astro é›†æˆæ–‡æ¡£](https://docs.astro.build/en/guides/integrations-guide/)
- [Astro éƒ¨ç½²æŒ‡å—](https://docs.astro.build/en/guides/deploy/)
- [Vercel Astro éƒ¨ç½²](https://docs.astro.build/en/guides/deploy/vercel/)
- [Netlify Astro éƒ¨ç½²](https://docs.astro.build/en/guides/deploy/netlify/)
- [Pagefind æ–‡æ¡£](https://pagefind.app/)
- [Giscus é…ç½®](https://giscus.app/zh-CN)
