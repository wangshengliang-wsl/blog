---
title: Astro 入门指南
description: Astro 是一款现代化的静态站点生成器，本文涵盖安装配置、项目结构、核心概念及与其他框架的对比
pubDate: 2025-11-27
toc: true
ogImage: true
category: Astro
---

Astro 是一款专注于内容的现代化 Web 框架，采用"群岛架构"（Islands Architecture），默认生成零 JavaScript 的静态页面，同时支持按需加载交互组件。非常适合构建博客、文档站点、营销页面等内容驱动型网站。

> 本文基于 Astro v5.x 编写。

## 为什么选择 Astro

| 特性       | 说明                                         |
| ---------- | -------------------------------------------- |
| 零 JS 默认 | 页面默认不包含客户端 JavaScript              |
| 群岛架构   | 只对需要交互的组件进行 hydration             |
| 框架无关   | 支持 React、Vue、Svelte、Solid 等            |
| 内容优先   | 内置 Markdown/MDX 支持和 Content Collections |
| 极致性能   | Lighthouse 满分的性能表现                    |
| 开发体验   | 快速热更新、TypeScript 原生支持              |

### 性能对比

| 框架    | 默认 JS 体积 | 首次加载 |
| ------- | ------------ | -------- |
| Astro   | 0 KB         | 极快     |
| Next.js | ~80 KB       | 快       |
| Nuxt    | ~70 KB       | 快       |
| Gatsby  | ~60 KB       | 中       |

## 快速开始

### 创建项目

```bash
# 使用官方 CLI
npm create astro@latest

# 或指定模板
npm create astro@latest -- --template blog
npm create astro@latest -- --template docs
npm create astro@latest -- --template portfolio
```

交互式创建过程：

```text
◆  Where should we create your new project?
│  ./my-astro-site
│
◆  How would you like to start your new project?
│  Use blog template
│
◆  Do you plan to write TypeScript?
│  Yes
│
◆  How strict should TypeScript be?
│  Strict (recommended)
│
◆  Install dependencies?
│  Yes
│
◆  Initialize a new git repository?
│  Yes
```

### 启动开发服务器

```bash
cd my-astro-site
npm run dev
```

访问 `http://localhost:4321` 查看效果。

### 构建生产版本

```bash
npm run build
npm run preview  # 本地预览构建结果
```

构建产物位于 `dist/` 目录。

## 项目结构

```text
my-astro-site/
├── public/              # 静态资源（直接复制到 dist）
│   ├── favicon.svg
│   └── robots.txt
├── src/
│   ├── components/      # 组件
│   │   └── Header.astro
│   ├── layouts/         # 布局
│   │   └── Layout.astro
│   ├── pages/           # 页面（自动路由）
│   │   ├── index.astro
│   │   └── about.astro
│   ├── content/         # 内容集合
│   │   └── blog/
│   ├── styles/          # 全局样式
│   │   └── global.css
│   └── assets/          # 需要处理的资源
│       └── logo.png
├── astro.config.mjs     # Astro 配置
├── package.json
└── tsconfig.json
```

### 目录说明

| 目录              | 用途                     |
| ----------------- | ------------------------ |
| `public/`         | 静态资源，不经过处理     |
| `src/pages/`      | 页面文件，自动生成路由   |
| `src/layouts/`    | 布局组件                 |
| `src/components/` | 可复用组件               |
| `src/content/`    | 内容集合（Markdown/MDX） |
| `src/assets/`     | 需要优化的资源（图片等） |

## 核心概念

### .astro 文件结构

Astro 组件由两部分组成：

```astro
---
// 组件脚本（服务端执行）
import Header from '../components/Header.astro'
import { getCollection } from 'astro:content'

const posts = await getCollection('blog')
const title = 'Hello Astro'
---

<!-- 组件模板（HTML） -->
<html>
  <head>
    <title>{title}</title>
  </head>
  <body>
    <Header />
    <h1>{title}</h1>
    <ul>
      {posts.map((post) => <li>{post.data.title}</li>)}
    </ul>
  </body>
</html>

<style>
  /* 作用域样式 */
  h1 {
    color: purple;
  }
</style>
```

### 模板语法

Astro 使用类 JSX 的模板语法：

```astro
---
const items = ['Apple', 'Banana', 'Orange']
const isLoggedIn = true
const user = { name: 'Alice', avatar: '/avatar.png' }
---

<!-- 变量插值 -->
<h1>{user.name}</h1>

<!-- 条件渲染 -->
{isLoggedIn && <p>Welcome back!</p>}

{isLoggedIn ? <a href="/logout">Logout</a> : <a href="/login">Login</a>}

<!-- 列表渲染 -->
<ul>
  {items.map((item) => <li>{item}</li>)}
</ul>

<!-- 动态属性 -->
<img src={user.avatar} alt={user.name} />

<!-- 展开属性 -->
<div {...props}></div>
```

### Props 传递

```astro
---
// Card.astro
interface Props {
  title: string
  description?: string
  href: string
}

const { title, description = '默认描述', href } = Astro.props
---

<a href={href} class="card">
  <h2>{title}</h2>
  <p>{description}</p>
</a>
```

使用组件：

```astro
---
import Card from './Card.astro'
---

<Card title="文章标题" description="文章描述" href="/blog/post-1" />
```

### Slots 插槽

```astro
---
// Button.astro
interface Props {
  variant?: 'primary' | 'secondary'
}

const { variant = 'primary' } = Astro.props
---

<button class={`btn btn-${variant}`}>
  <slot />
</button>
```

```astro
---
import Button from './Button.astro'
---

<Button variant="primary"> 点击我 </Button>
```

具名插槽：

```astro
---
// Card.astro
---

<div class="card">
  <header>
    <slot name="header" />
  </header>
  <main>
    <slot />
    <!-- 默认插槽 -->
  </main>
  <footer>
    <slot name="footer" />
  </footer>
</div>
```

```astro
<Card>
  <h2 slot="header">标题</h2>
  <p>正文内容</p>
  <span slot="footer">页脚</span>
</Card>
```

## 配置文件

`astro.config.mjs` 基础配置：

```javascript
import { defineConfig } from 'astro/config'

export default defineConfig({
  // 站点 URL
  site: 'https://example.com',

  // 基础路径
  base: '/blog',

  // 输出模式：static | server | hybrid
  output: 'static',

  // 开发服务器配置
  server: {
    port: 4321,
    host: true,
  },

  // 构建配置
  build: {
    format: 'directory', // 'file' | 'directory' | 'preserve'
  },

  // Vite 配置
  vite: {
    // ...
  },

  // 集成
  integrations: [
    // ...
  ],
})
```

## 常用命令

| 命令              | 说明            |
| ----------------- | --------------- |
| `npm run dev`     | 启动开发服务器  |
| `npm run build`   | 构建生产版本    |
| `npm run preview` | 预览构建结果    |
| `npx astro add`   | 添加集成        |
| `npx astro check` | TypeScript 检查 |

## Astro vs Next.js vs Nuxt

| 特性      | Astro     | Next.js  | Nuxt     |
| --------- | --------- | -------- | -------- |
| 定位      | 内容站点  | 全栈应用 | 全栈应用 |
| 默认渲染  | 静态      | 混合     | 混合     |
| 客户端 JS | 按需      | 必需     | 必需     |
| UI 框架   | 多框架    | React    | Vue      |
| 学习曲线  | 低        | 中       | 中       |
| 适用场景  | 博客/文档 | Web 应用 | Web 应用 |

**选择建议**：

- 博客、文档、营销页面 → Astro
- React 全栈应用 → Next.js
- Vue 全栈应用 → Nuxt

## 参考资料

- [Astro 官方文档](https://docs.astro.build/)
- [Astro 模板市场](https://astro.build/themes/)
- [Astro 集成目录](https://astro.build/integrations/)
- [Astro GitHub](https://github.com/withastro/astro)
