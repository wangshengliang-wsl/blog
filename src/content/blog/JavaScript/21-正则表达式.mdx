---
title: 'æ­£åˆ™è¡¨è¾¾å¼'
description: 'æŒæ¡ JavaScript æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼Œå­¦ä¼šæ¨¡å¼åŒ¹é…ä¸æ–‡æœ¬å¤„ç†'
pubDate: 2025-12-03
toc: true
ogImage: true
category: 'JavaScript'
tags: ['JavaScript', 'æ­£åˆ™è¡¨è¾¾å¼', 'RegExp', 'æ¨¡å¼åŒ¹é…']
---

æ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”¨äºåŒ¹é…å­—ç¬¦ä¸²æ¨¡å¼çš„å·¥å…·ã€‚æŒæ¡æ­£åˆ™ï¼Œèƒ½è®©æ–‡æœ¬å¤„ç†æ•ˆç‡å¤§å¤§æå‡ã€‚

## ğŸ¯ åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼

### å­—é¢é‡æ–¹å¼

```javascript
// åŸºæœ¬è¯­æ³•ï¼š/pattern/flags
const regex1 = /hello/
const regex2 = /hello/i // i å¿½ç•¥å¤§å°å†™
const regex3 = /hello/g // g å…¨å±€åŒ¹é…

// æµ‹è¯•åŒ¹é…
console.log(regex1.test('hello world')) // true
console.log(regex1.test('Hello world')) // false
console.log(regex2.test('Hello world')) // true
```

### æ„é€ å‡½æ•°æ–¹å¼

```javascript
// å½“æ¨¡å¼æ˜¯åŠ¨æ€çš„æ—¶å€™ä½¿ç”¨
const pattern = 'hello'
const regex = new RegExp(pattern, 'i')

console.log(regex.test('Hello')) // true

// ğŸ”¶ æ³¨æ„ï¼šå­—ç¬¦ä¸²ä¸­çš„åæ–œæ éœ€è¦è½¬ä¹‰
const regex2 = new RegExp('\\d+') // åŒ¹é…æ•°å­—
// ç­‰åŒäº /\d+/
```

## ä¿®é¥°ç¬¦ï¼ˆFlagsï¼‰

```javascript
// i - å¿½ç•¥å¤§å°å†™
/abc/i.test('ABC')  // true

// g - å…¨å±€åŒ¹é…ï¼ˆæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…é¡¹ï¼‰
'abcabc'.match(/abc/g)  // ['abc', 'abc']

// m - å¤šè¡Œæ¨¡å¼ï¼ˆ^ å’Œ $ åŒ¹é…æ¯è¡Œï¼‰
/^abc/m.test('xxx\nabc')  // true

// s - ç‚¹å·åŒ¹é…æ¢è¡Œç¬¦ï¼ˆES2018ï¼‰
/a.b/s.test('a\nb')  // true

// u - Unicode æ¨¡å¼
/\u{1F600}/u.test('ğŸ˜€')  // true

// y - ç²˜æ€§åŒ¹é…ï¼ˆä» lastIndex å¼€å§‹ï¼‰
const sticky = /abc/y
sticky.lastIndex = 3
sticky.test('xxxabc')  // true
```

## åŸºç¡€è¯­æ³•

### æ™®é€šå­—ç¬¦

```javascript
// æ™®é€šå­—ç¬¦åŒ¹é…è‡ªèº«
/hello/.test('hello world')  // true
/123/.test('abc123def')      // true
```

### å…ƒå­—ç¬¦

```javascript
// . åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼ˆé™¤æ¢è¡Œç¬¦ï¼‰
/a.c/.test('abc')  // true
/a.c/.test('aXc')  // true
/a.c/.test('ac')   // false

// ^ åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´
/^hello/.test('hello world')  // true
/^hello/.test('say hello')    // false

// $ åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾
/world$/.test('hello world')  // true
/world$/.test('world hello')  // false

// ^...$ ç²¾ç¡®åŒ¹é…
/^hello$/.test('hello')        // true
/^hello$/.test('hello world')  // false
```

### å­—ç¬¦ç±»

```javascript
// [...] åŒ¹é…æ‹¬å·å†…çš„ä»»æ„å­—ç¬¦
/[abc]/.test('a')    // true
/[abc]/.test('d')    // false

// [^...] åŒ¹é…ä¸åœ¨æ‹¬å·å†…çš„å­—ç¬¦
/[^abc]/.test('d')   // true
/[^abc]/.test('a')   // false

// èŒƒå›´
/[a-z]/.test('m')    // trueï¼ˆå°å†™å­—æ¯ï¼‰
/[A-Z]/.test('M')    // trueï¼ˆå¤§å†™å­—æ¯ï¼‰
/[0-9]/.test('5')    // trueï¼ˆæ•°å­—ï¼‰
/[a-zA-Z0-9]/.test('x')  // trueï¼ˆå­—æ¯æ•°å­—ï¼‰

// ç»„åˆ
/[a-z0-9_]/.test('_')  // true
```

### é¢„å®šä¹‰å­—ç¬¦ç±»

```javascript
// \d æ•°å­—ï¼Œç­‰åŒäº [0-9]
/\d/.test('123')     // true

// \D éæ•°å­—ï¼Œç­‰åŒäº [^0-9]
/\D/.test('abc')     // true

// \w å•è¯å­—ç¬¦ï¼Œç­‰åŒäº [a-zA-Z0-9_]
/\w/.test('hello')   // true

// \W éå•è¯å­—ç¬¦
/\W/.test('@')       // true

// \s ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç­‰ï¼‰
/\s/.test(' ')       // true
/\s/.test('\t')      // true

// \S éç©ºç™½å­—ç¬¦
/\S/.test('a')       // true

// \b å•è¯è¾¹ç•Œ
/\bcat\b/.test('the cat sat')  // true
/\bcat\b/.test('category')     // false

// \B éå•è¯è¾¹ç•Œ
/\Bcat\B/.test('category')     // false
/\Bcat/.test('tomcat')         // true
```

## é‡è¯

```javascript
// * é›¶æ¬¡æˆ–å¤šæ¬¡
/ab*c/.test('ac')     // true
/ab*c/.test('abc')    // true
/ab*c/.test('abbbc')  // true

// + ä¸€æ¬¡æˆ–å¤šæ¬¡
/ab+c/.test('ac')     // false
/ab+c/.test('abc')    // true
/ab+c/.test('abbbc')  // true

// ? é›¶æ¬¡æˆ–ä¸€æ¬¡
/ab?c/.test('ac')     // true
/ab?c/.test('abc')    // true
/ab?c/.test('abbc')   // false

// {n} æ°å¥½ n ï¿½ï¿½ï¿½
/a{3}/.test('aaa')    // true
/a{3}/.test('aa')     // false

// {n,} è‡³å°‘ n æ¬¡
/a{2,}/.test('aa')    // true
/a{2,}/.test('aaaa')  // true

// {n,m} n åˆ° m æ¬¡
/a{2,4}/.test('a')     // false
/a{2,4}/.test('aa')    // true
/a{2,4}/.test('aaaa')  // true
/a{2,4}/.test('aaaaa') // trueï¼ˆåŒ¹é…å‰4ä¸ªï¼‰
```

### è´ªå©ªä¸éè´ªå©ª

```javascript
const str = '<div>hello</div>'

// è´ªå©ªæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰ï¼šå°½å¯èƒ½å¤šåœ°åŒ¹é…
str.match(/<.+>/) // ['<div>hello</div>']

// éè´ªå©ªæ¨¡å¼ï¼šå°½å¯èƒ½å°‘åœ°åŒ¹é…ï¼ˆé‡è¯ååŠ  ?ï¼‰
str.match(/<.+?>/) // ['<div>']

// å…¶ä»–éè´ªå©ªé‡è¯
// *?  é›¶æ¬¡æˆ–å¤šæ¬¡ï¼ˆéè´ªå©ªï¼‰
// +?  ä¸€æ¬¡æˆ–å¤šæ¬¡ï¼ˆéè´ªå©ªï¼‰
// ??  é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼ˆéè´ªå©ªï¼‰
// {n,m}? n åˆ° m æ¬¡ï¼ˆéè´ªå©ªï¼‰
```

## åˆ†ç»„ä¸å¼•ç”¨

### æ•è·åˆ†ç»„

```javascript
// ä½¿ç”¨ () åˆ›å»ºåˆ†ç»„
const regex = /(\d{4})-(\d{2})-(\d{2})/
const match = regex.exec('2024-01-15')

console.log(match[0]) // '2024-01-15'ï¼ˆå®Œæ•´åŒ¹é…ï¼‰
console.log(match[1]) // '2024'ï¼ˆç¬¬ä¸€ä¸ªåˆ†ç»„ï¼‰
console.log(match[2]) // '01'ï¼ˆç¬¬äºŒä¸ªåˆ†ç»„ï¼‰
console.log(match[3]) // '15'ï¼ˆç¬¬ä¸‰ä¸ªåˆ†ç»„ï¼‰

// åœ¨æ›¿æ¢ä¸­ä½¿ç”¨åˆ†ç»„
'2024-01-15'.replace(/(\d{4})-(\d{2})-(\d{2})/, '$2/$3/$1')
// '01/15/2024'
```

### éæ•è·åˆ†ç»„

```javascript
// (?:...) ä¸æ•è·åˆ†ç»„
const regex = /(?:https?:\/\/)?(\w+\.\w+)/
const match = regex.exec('https://example.com')

console.log(match[1]) // 'example.com'ï¼ˆåªæœ‰ä¸€ä¸ªæ•è·ç»„ï¼‰
```

### å‘½ååˆ†ç»„ï¼ˆES2018ï¼‰

```javascript
const regex = /(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/
const match = regex.exec('2024-01-15')

console.log(match.groups.year) // '2024'
console.log(match.groups.month) // '01'
console.log(match.groups.day) // '15'

// åœ¨æ›¿æ¢ä¸­ä½¿ç”¨
'2024-01-15'.replace(regex, '$<month>/$<day>/$<year>')
// '01/15/2024'
```

### åå‘å¼•ç”¨

```javascript
// \1, \2 å¼•ç”¨ä¹‹å‰çš„åˆ†ç»„
// åŒ¹é…é‡å¤çš„å•è¯
const regex = /(\w+)\s+\1/
regex.test('hello hello') // true
regex.test('hello world') // false

// åŒ¹é…å¼•å·å†…å®¹ï¼ˆå¼•å·å¿…é¡»é…å¯¹ï¼‰
const quoteRegex = /(['"])(.*?)\1/
quoteRegex.exec('"hello"') // ['"hello"', '"', 'hello']
quoteRegex.exec("'world'") // ["'world'", "'", 'world']
```

## é€‰æ‹©ä¸æ–­è¨€

### é€‰æ‹©ï¼ˆæˆ–ï¼‰

```javascript
// | è¡¨ç¤ºæˆ–
/cat|dog/.test('cat')  // true
/cat|dog/.test('dog')  // true
/cat|dog/.test('bird') // false

// åˆ†ç»„ä¸­çš„é€‰æ‹©
/(red|blue) car/.test('red car')   // true
/(red|blue) car/.test('blue car')  // true
```

### å…ˆè¡Œæ–­è¨€

```javascript
// (?=...) æ­£å‘å…ˆè¡Œæ–­è¨€ï¼šåé¢å¿…é¡»æ˜¯...
/foo(?=bar)/.test('foobar')  // true
/foo(?=bar)/.test('foobaz')  // false
'foobar'.match(/foo(?=bar)/) // ['foo']ï¼ˆä¸åŒ…å« barï¼‰

// (?!...) è´Ÿå‘å…ˆè¡Œæ–­è¨€ï¼šåé¢ä¸èƒ½æ˜¯...
/foo(?!bar)/.test('foobaz')  // true
/foo(?!bar)/.test('foobar')  // false
```

### åè¡Œæ–­è¨€ï¼ˆES2018ï¼‰

```javascript
// (?<=...) æ­£å‘åè¡Œæ–­è¨€ï¼šå‰é¢å¿…é¡»æ˜¯...
/(?<=\$)\d+/.exec('$100')  // ['100']
/(?<=\$)\d+/.exec('â‚¬100')  // null

// (?<!...) è´Ÿå‘åè¡Œæ–­è¨€ï¼šå‰é¢ä¸èƒ½æ˜¯...
/(?<!\$)\d+/.exec('â‚¬100')  // ['100']
/(?<!\$)\d+/.exec('$100')  // nullï¼ˆ$ åé¢çš„ä¸åŒ¹é…ï¼‰
```

## å¸¸ç”¨æ–¹æ³•

### RegExp æ–¹æ³•

```javascript
const regex = /\d+/g

// testï¼šæµ‹è¯•æ˜¯å¦åŒ¹é…
regex.test('abc123') // true

// execï¼šè¿”å›åŒ¹é…è¯¦æƒ…
regex.exec('abc123def456') // ['123', index: 3, ...]
regex.exec('abc123def456') // ['456', index: 9, ...]
regex.exec('abc123def456') // nullï¼ˆæ²¡æœ‰æ›´å¤šåŒ¹é…ï¼‰

// ğŸ”¶ æ³¨æ„ï¼šg æ¨¡å¼ä¸‹ exec ä¼šè®°ä½ lastIndex
regex.lastIndex = 0 // é‡ç½®
```

### String æ–¹æ³•

```javascript
const str = 'hello world'

// matchï¼šè¿”å›åŒ¹é…ç»“æœ
str.match(/o/) // ['o', index: 4, ...]
str.match(/o/g) // ['o', 'o']ï¼ˆg æ¨¡å¼è¿”å›æ‰€æœ‰åŒ¹é…ï¼‰
str.match(/x/) // null

// matchAllï¼ˆES2020ï¼‰ï¼šè¿”å›è¿­ä»£å™¨
const matches = str.matchAll(/o/g)
for (const match of matches) {
  console.log(match.index) // 4, 7
}

// searchï¼šè¿”å›åŒ¹é…ä½ç½®
str.search(/world/) // 6
str.search(/xyz/) // -1

// replaceï¼šæ›¿æ¢
str.replace(/world/, 'JavaScript') // 'hello JavaScript'
str.replace(/o/g, '0') // 'hell0 w0rld'

// æ›¿æ¢å›è°ƒå‡½æ•°
'hello'.replace(/./g, (char, index) => {
  return index === 0 ? char.toUpperCase() : char
}) // 'Hello'

// splitï¼šåˆ†å‰²
'a,b;c|d'.split(/[,;|]/) // ['a', 'b', 'c', 'd']
```

## å®ç”¨æ­£åˆ™è¡¨è¾¾å¼

### å¸¸è§éªŒè¯

```javascript
// é‚®ç®±ï¼ˆç®€åŒ–ç‰ˆï¼‰
const emailRegex = /^[\w.-]+@[\w.-]+\.\w+$/
emailRegex.test('user@example.com') // true

// æ‰‹æœºå·ï¼ˆä¸­å›½å¤§é™†ï¼‰
const phoneRegex = /^1[3-9]\d{9}$/
phoneRegex.test('13812345678') // true

// URL
const urlRegex = /^https?:\/\/[\w.-]+(?:\/[\w./?%&=-]*)?$/
urlRegex.test('https://example.com/path?query=1') // true

// èº«ä»½è¯å·ï¼ˆç®€åŒ–ç‰ˆï¼‰
const idCardRegex = /^\d{17}[\dXx]$/
idCardRegex.test('11010119900101001X') // true

// å¯†ç ï¼ˆ8-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—ï¼‰
const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,20}$/
passwordRegex.test('password123') // true

// ä¸­æ–‡å­—ç¬¦
const chineseRegex = /[\u4e00-\u9fa5]/
chineseRegex.test('ä½ å¥½') // true

// IP åœ°å€ï¼ˆç®€åŒ–ç‰ˆï¼‰
const ipRegex = /^(\d{1,3}\.){3}\d{1,3}$/
ipRegex.test('192.168.1.1') // true
```

### æ–‡æœ¬å¤„ç†

```javascript
// å»é™¤é¦–å°¾ç©ºæ ¼
const trimRegex = /^\s+|\s+$/g
'  hello  '.replace(trimRegex, '') // 'hello'

// å‹ç¼©å¤šä¸ªç©ºæ ¼
'hello   world'.replace(/\s+/g, ' ') // 'hello world'

// æå–æ•°å­—
'ä»·æ ¼: Â¥199.99'.match(/\d+\.?\d*/g) // ['199.99']

// é©¼å³°è½¬è¿å­—ç¬¦
'backgroundColor'.replace(/([A-Z])/g, '-$1').toLowerCase()
// 'background-color'

// è¿å­—ç¬¦è½¬é©¼å³°
'background-color'.replace(/-([a-z])/g, (_, char) => char.toUpperCase())
// 'backgroundColor'

// é¦–å­—æ¯å¤§å†™
'hello world'.replace(/\b\w/g, (char) => char.toUpperCase())
// 'Hello World'

// è½¬ä¹‰ HTML ç‰¹æ®Šå­—ç¬¦
function escapeHtml(str) {
  return str.replace(
    /[&<>"']/g,
    (char) =>
      ({
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
      })[char]
  )
}
```

## æ€§èƒ½ä¼˜åŒ–

```javascript
// âœ… ç¼–è¯‘ä¸€æ¬¡ï¼Œå¤šæ¬¡ä½¿ç”¨
const regex = /pattern/
for (const str of strings) {
  regex.test(str)
}

// ğŸ”¶ é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºæ­£åˆ™
for (const str of strings) {
  /pattern/.test(str)  // æ¯æ¬¡éƒ½åˆ›å»ºæ–°æ­£åˆ™
}

// âœ… é¿å…å›æº¯ç¾éš¾
// ğŸ”¶ ä¸å¥½ï¼šåµŒå¥—é‡è¯å¯èƒ½å¯¼è‡´æŒ‡æ•°çº§å›æº¯
const bad = /^(a+)+$/

// âœ… å¥½ï¼šä½¿ç”¨åŸå­ç»„æˆ–æ›´ç²¾ç¡®çš„æ¨¡å¼
const good = /^a+$/

// âœ… ä½¿ç”¨éæ•è·ç»„å‡å°‘å†…å­˜
/(?:abc)+/  // ä¸éœ€è¦æ•è·æ—¶ä½¿ç”¨ (?:...)
```

## æ€»ç»“

| å…ƒå­—ç¬¦    | å«ä¹‰       |
| --------- | ---------- |
| `.`       | ä»»æ„å­—ç¬¦   |
| `^`       | å¼€å¤´       |
| `$`       | ç»“å°¾       |
| `*`       | é›¶æ¬¡æˆ–å¤šæ¬¡ |
| `+`       | ä¸€æ¬¡æˆ–å¤šæ¬¡ |
| `?`       | é›¶æ¬¡æˆ–ä¸€æ¬¡ |
| `\d`      | æ•°å­—       |
| `\w`      | å•è¯å­—ç¬¦   |
| `\s`      | ç©ºç™½å­—ç¬¦   |
| `\b`      | å•è¯è¾¹ç•Œ   |
| `[...]`   | å­—ç¬¦ç±»     |
| `(...)`   | æ•è·åˆ†ç»„   |
| `(?:...)` | éæ•è·åˆ†ç»„ |
| `\|`      | æˆ–         |

**æ ¸å¿ƒè¦ç‚¹**ï¼š

- å­—é¢é‡ `/pattern/` ç”¨äºé™æ€æ¨¡å¼
- æ„é€ å‡½æ•° `new RegExp()` ç”¨äºåŠ¨æ€æ¨¡å¼
- é‡è¯é»˜è®¤è´ªå©ªï¼ŒåŠ  `?` å˜éè´ªå©ª
- ä½¿ç”¨åˆ†ç»„æå–å’Œå¼•ç”¨åŒ¹é…å†…å®¹
- æ–­è¨€åŒ¹é…ä½ç½®è€Œéå­—ç¬¦
