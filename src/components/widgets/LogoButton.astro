---
import Link from '~/components/base/Link.astro'
import { withBasePath } from '~/utils/path'
import { SITE } from '~/config'
---

<Link
  class="select-none op-transition"
  href={withBasePath('/')}
  aria-label={SITE.author}
  aria-current={Astro.url.pathname === `${withBasePath('/')}` ? 'page' : false}
>
  <div class="logo-container">
    <!-- Animated WSL Signature Logo - Readable handwriting style -->
    <svg
      width="150"
      height="55"
      viewBox="0 0 150 55"
      xmlns="http://www.w3.org/2000/svg"
      aria-hidden="true"
      class="logo-svg"
    >
      <!-- Mask for variable stroke width -->
      <defs>
        <mask id="logo-mask">
          <!-- Fill shape for mask (bold signature style) -->
          <!-- Continuous single stroke path for 'wsl' -->
          <path
            d="M 10 20 L 15 40 L 20 18 L 25 40 L 30 20 Q 35 18 40 20 Q 42 22 42 25 Q 42 30 48 30 Q 54 30 54 35 Q 54 42 48 42 Q 45 42 44 38 L 46 32 Q 50 28 56 30 L 62 16 L 60 38 Q 60 43 64 43"
            fill="none"
            stroke="white"
            stroke-width="12"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </mask>
      </defs>

      <!-- Animated stroke path - single continuous line -->
      <path
        class="logo-path"
        d="M 36.4 74 L 25.7 74 L 0 6.5 L 9.3 2.9 L 31.3 63.6 L 53.4 3.2 L 62 6.5 L 36.4 74 Z M 169.2 69.7 L 169.2 74 L 160.8 74 L 160.8 0 L 169.8 0 L 169.8 27.4 Q 171.8 25.1 175.65 22.95 Q 179.5 20.8 184.8 20.8 Q 190.8 20.8 196.05 23.95 Q 201.3 27.1 204.5 33.05 Q 207.7 39 207.7 47.5 Q 207.7 53.7 205.7 58.8 Q 203.7 63.9 200.35 67.55 Q 197 71.2 192.8 73.2 Q 188.6 75.2 184.2 75.2 Q 179.7 75.2 175.75 73.55 Q 171.8 71.9 169.2 69.7 Z M 108.6 51.7 L 72.2 51.7 Q 73.1 59 77.3 63.1 Q 81.5 67.2 88.4 67.2 Q 92.9 67.2 96.5 66.25 Q 100.1 65.3 103.4 63.8 L 105.5 71.5 Q 101.9 73.1 97.4 74.15 Q 92.9 75.2 87.3 75.2 Q 76.1 75.2 69.55 68.05 Q 63 60.9 63 48 Q 63 40.2 65.95 34.05 Q 68.9 27.9 74.2 24.35 Q 79.5 20.8 86.5 20.8 Q 94 20.8 98.95 24.05 Q 103.9 27.3 106.4 32.8 Q 108.9 38.3 108.9 44.9 Q 108.9 48.4 108.6 51.7 Z M 129.9 74 L 120.9 74 L 120.9 22 L 129.6 22 L 129.6 33.3 Q 130.9 30 133.1 27.15 Q 135.3 24.3 138.6 22.55 Q 141.9 20.8 146.3 20.8 Q 147.8 20.8 149.3 20.95 Q 150.8 21.1 151.8 21.4 L 149.1 30.7 Q 147.2 29.9 144.6 29.9 Q 140.9 29.9 137.55 32 Q 134.2 34.1 132.05 38.5 Q 129.9 42.9 129.9 49.7 L 129.9 74 Z M 169.8 35.4 L 169.8 63.2 Q 172.1 65 175.2 66.1 Q 178.3 67.2 181.8 67.2 Q 186.7 67.2 190.45 64.8 Q 194.2 62.4 196.35 58 Q 198.5 53.6 198.5 47.8 Q 198.5 41.8 196.35 37.5 Q 194.2 33.2 190.65 30.9 Q 187.1 28.6 182.8 28.6 Q 178.5 28.6 175.05 30.75 Q 171.6 32.9 169.8 35.4 Z M 72.1 44.4 L 100.6 44.4 Q 100.6 36.8 96.8 32.7 Q 93 28.6 86.3 28.6 Q 80.5 28.6 76.7 32.65 Q 72.9 36.7 72.1 44.4 Z"
        fill="none"
        stroke="currentColor"
        stroke-width="4"
        stroke-linecap="round"
        stroke-linejoin="round"
        mask="url(#logo-mask)"></path>
    </svg>
  </div>
</Link>

<style>
  .logo-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.8rem;
    transform: scale(1.05);
  }

  @media (max-width: 767.9px) {
    .logo-container {
      margin-top: 0.125rem;
      transform-origin: 0%;
      transform: scale(0.95);
    }
  }

  .logo-svg {
    height: 2rem;
  }

  /* Animated signature effect - single continuous stroke */
  @media (prefers-reduced-motion: no-preference) {
    .logo-path {
      stroke-dasharray: 260;
      stroke-dashoffset: 260;
      animation:
        draw 3s ease-in-out forwards,
        loop 7s ease-in-out 3s infinite;
    }

    @keyframes draw {
      to {
        stroke-dashoffset: 0;
      }
    }

    @keyframes loop {
      0% {
        stroke-dashoffset: 0;
      }
      40% {
        stroke-dashoffset: 0;
      }
      70% {
        stroke-dashoffset: 260;
      }
      100% {
        stroke-dashoffset: 0;
      }
    }
  }

  /* Respect reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .logo-path {
      stroke-dasharray: none;
      animation: none;
    }
  }

  /* Color adaptation */
  .logo-path {
    color: #17191e;
  }

  :global(.dark) .logo-path {
    color: #fdfdfd;
  }
</style>
