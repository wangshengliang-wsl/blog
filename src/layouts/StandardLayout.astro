---
interface Props {
  title?: string
  titleIcon?: string
  subtitle?: string
  isCentered?: boolean
  isSearchable?: boolean
  searchFilter?: string
  class?: string
}

const {
  title,
  titleIcon,
  subtitle,
  isCentered = false,
  isSearchable,
  searchFilter,
  class: className,
} = Astro.props

// Check if titleIcon is a URL or an icon class
const isImageUrl = titleIcon ? /^https?:\/\//.test(titleIcon) : false
const iconClass =
  titleIcon && !isImageUrl
    ? titleIcon.startsWith('i-')
      ? titleIcon
      : `i-${titleIcon}`
    : undefined
---

<header
  class:list={{
    'prose mx-auto': true,
    'text-center': isCentered,
  }}
>
  {
    title && (
      <h1>
        {titleIcon &&
          (isImageUrl ? (
            <img
              src={titleIcon}
              alt=""
              class="mr-2 inline-block h-[1.2em] w-[1.2em] align-text-bottom"
              aria-hidden="true"
            />
          ) : iconClass ? (
            <span class={`${iconClass} mr-2`} aria-hidden="true" />
          ) : null)}
        {title}
      </h1>
    )
  }
  {subtitle && <p class="mt--4! op-50 italic">{subtitle}</p>}
  <slot name="head" />
</header>
{
  Astro.slots.has('article') && (
    <article
      class="slide-enter-content prose mx-auto"
      data-pagefind-body={isSearchable ? '' : undefined}
      data-pagefind-filter={
        isSearchable && searchFilter ? searchFilter : undefined
      }
    >
      <slot name="article" />
    </article>
  )
}
{
  Astro.slots.has('default') && (
    <div class:list={['mx-auto', className]}>
      <slot />
    </div>
  )
}
